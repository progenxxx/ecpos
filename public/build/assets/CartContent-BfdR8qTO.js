import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as c,e as d,r as T,d as n,s as S,k as I,G as P,a as t,b as _,j as g,q as v,F,h as A,t as i}from"./app-DfIvzsOQ.js";import{C as D}from"./Cart-CyCcG2n-.js";import{C as E}from"./SwipeRight-DNg903qX.js";import"./sweetalert2.esm.all-IRYXxR_Z.js";const O={},q={class:"font-bold text-gray-900 tracking-wider text-base"};function V(f,a){return c(),d("h5",q,[T(f.$slots,"default")])}const ut=j(O,[["render",V]]),B={class:"relative bg-white border-s border-gray-400 shadow-md shadow-gray-600 w-full h-full lg:w-full lg:h-full max-w-sm lg:max-w-full"},N={class:"absolute left-0 right-0 top-0 h-10 bg-white text-black flex justify-center items-center text-xl font-bold p-3"},R={class:"ml-auto flex items-center"},U=["disabled"],$={class:"absolute top-7 bottom-12 left-0 right-0 my-2 px-2 overflow-y-auto"},L={class:"h-5/6 px-1 py-3"},M={class:"h-full w-full overflow-y-auto bg-white p-3 top-0 right-0 left-0 m-0"},G={class:"grid grid-cols-4 text-md font-bold lg:grid-cols-4"},H={class:"p-2 flex justify-center"},J={class:"inline-flex items-center"},Q={class:"p-2 flex justify-center"},z={class:"inline-flex items-center"},K=["value"],W={class:"p-2 overflow-hidden"},X={class:"whitespace-no-wrap"},Y={class:"p-2 flex justify-center"},Z={class:"font-bold text-xs"},tt={class:"p-2 flex justify-center"},et={class:"font-bold text-xs mx-2"},st={class:"absolute left-0 right-0 bottom-0 h-14 text-white bg-navy flex justify-between items-center border-t border-gray-900 shadow-sm shadow-gray-900"},lt={class:"flex flex-col justify-start ps-1 tracking-wider"},ot={class:"font-extrabold text-lg ml-2"},at={class:"skeleton m-5 w-1/3 h-10 bg-blue-900 flex justify-center items-center cursor-pointer font-bold text-white tracking-wider text-xs md:text-sm lg:text-base"},ft={__name:"CartContent",setup(f){const a=n([]),p=n(0),o=n([]),r=n(!1);let m;const x=async()=>{try{const e=await(await fetch("/api/cart")).json();a.value=e.items.map(l=>({...l,total_price:parseFloat(l.total_price),total_qty:parseFloat(l.total_qty)})),u()}catch(s){console.error("Error fetching cart data:",s)}},u=()=>{p.value=a.value.reduce((s,e)=>s+e.total_price,0)},b=async()=>{try{await fetch("/api/cart/clear",{method:"POST"}),a.value=[],o.value=[],r.value=!1,u()}catch(s){console.error("Error clearing cart:",s)}},y=async()=>{if(o.value.length!==0)try{(await fetch("/api/cart/delete-multiple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:o.value})})).ok?(a.value=a.value.filter(e=>!o.value.includes(e.itemname)),o.value=[],r.value=!1,u()):console.error("Failed to delete items")}catch(s){console.error("Error deleting selected items:",s)}},w=()=>{r.value?o.value=a.value.map(s=>s.itemname):o.value=[]},h=s=>typeof s=="number"?s.toFixed(2):"0.00",k=S(()=>h(p.value));return I(()=>{x(),m=setInterval(x,5e3)}),P(()=>{clearInterval(m)}),(s,e)=>(c(),d("div",B,[t("div",N,[e[2]||(e[2]=t("p",{class:"tracking-widest"},"ORDER | CART",-1)),t("div",R,[t("button",{onClick:y,class:"mr-2 px-2 py-1 bg-red-500 text-white rounded text-xs",disabled:o.value.length===0}," Delete Selected ",8,U),t("a",{class:"text-xs cursor-pointer",onClick:b},[_(E,{class:"w-7 h-7"})])])]),t("div",$,[t("section",L,[t("div",M,[t("ul",G,[t("li",H,[t("label",J,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),onChange:w,class:"form-checkbox h-4 w-4 text-blue-600 rounded-full"},null,544),[[v,r.value]]),e[3]||(e[3]=t("span",{class:"ml-2"},"All",-1))])]),e[4]||(e[4]=t("li",{class:"p-2 flex justify-center"},[t("a",null,"Item")],-1)),e[5]||(e[5]=t("li",{class:"p-2 flex justify-center"},[t("a",null,"Price")],-1)),e[6]||(e[6]=t("li",{class:"p-2 flex justify-center"},[t("a",null,"Qty")],-1)),e[7]||(e[7]=t("li",{class:"w-full col-span-6"},[t("hr")],-1))]),(c(!0),d(F,null,A(a.value,l=>(c(),d("ul",{key:l.itemname,class:"grid grid-cols-4 text-sm lg:grid-cols-4"},[t("li",Q,[t("label",z,[g(t("input",{type:"checkbox",value:l.itemname,"onUpdate:modelValue":e[1]||(e[1]=C=>o.value=C),class:"form-checkbox h-4 w-4 text-blue-600 rounded-full"},null,8,K),[[v,o.value]])])]),t("li",W,[t("a",X,i(l.itemname),1)]),t("li",Y,[t("a",null,[t("span",Z,i(h(l.total_price)),1)])]),t("li",tt,[t("a",null,[t("span",et,i(l.total_qty)+" PCS",1)])])]))),128)),e[8]||(e[8]=t("hr",{class:"h-px-10 bg-gray-100"},null,-1))])])]),t("div",st,[t("div",lt,[e[9]||(e[9]=t("p",{class:"font-thin text-xs text-white ml-2"},"TOTAL",-1)),t("p",ot,"PHP "+i(k.value),1)]),t("div",at,[_(D,{class:"w-10 p-2 lg:p-1"})])])]))}};export{ut as T,ft as _};
