import{q as d,d as x,c as k,w as b,B as S,o as f,a as e,e as C,b as p,f as R,j as _,v as w,t as o,u as A}from"./app-BNPGhoL2.js";import{_ as V}from"./AdminPanel-C3by1daL.js";import{_ as E}from"./Main-CkYp62E2.js";import{_ as M}from"./MultiSelectDropdown-CM9RFtQU.js";import{T as O}from"./TableContainer-DOq29hCC.js";import{P as N,D as P}from"./dataTables-CYoR-ngT.js";import"./buttons.print-BML1l2ev.js";import"./exceljs.min-Bz6n0dRn.js";import"./RetailGroup-afsdHTlZ.js";import"./Logout-B5n2G0rZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                             */import"./Modal-k3aPgSoE.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-B6Xc1nH0.js";import"./RetailItems-BzVTUMDz.js";import"./Attendance-D3nGk9-s.js";import"./PartyCake143-DUp1Stp_.js";const U={class:"mb-4 flex flex-wrap gap-4 p-4 bg-white rounded-lg shadow z-[999]"},I={key:0,class:"flex-1 min-w-[200px]"},q={class:"flex-1 min-w-[200px]"},$={class:"flex-1 min-w-[200px]"},j={class:"flex items-end"},W={class:"mb-4 bg-white rounded-lg shadow",open:""},z={class:"p-4"},L={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Y={class:"bg-gray-50 p-4 rounded-lg"},G={class:"text-2xl mt-1"},H={class:"bg-gray-50 p-4 rounded-lg"},J={class:"text-2xl mt-1"},K={class:"bg-gray-50 p-4 rounded-lg"},Q={class:"text-2xl mt-1"},X={class:"bg-gray-50 p-4 rounded-lg"},Z={class:"text-2xl mt-1"},tt={class:"bg-gray-50 p-4 rounded-lg"},et={class:"text-2xl mt-1"},st={class:"bg-gray-50 p-4 rounded-lg"},rt={class:"text-2xl mt-1"},at={class:"bg-gray-50 p-4 rounded-lg"},ot={class:"text-2xl mt-1 font-bold"},lt={class:"bg-gray-50 p-4 rounded-lg col-span-2"},nt={class:"flex justify-between mt-1"},it={class:"text-xl text-red-600"},dt={class:"text-xl text-green-600"},ut={class:"bg-gray-50 p-4 rounded-lg col-span-full"},mt={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},gt={class:"text-lg"},xt={class:"text-lg"},pt={class:"text-lg"},ct={class:"text-lg"},vt={class:"text-lg"},yt={class:"bg-white rounded-lg shadow"},Mt={__name:"Inventory copy 3",props:{inventory:{type:Array,required:!0,default:()=>[]},stores:{type:Array,required:!0,default:()=>[]},userRole:{type:String,required:!0},filters:{type:Object,required:!0,default:()=>({startDate:"",endDate:"",selectedStores:[]})}},setup(i){N.use(P);const n=i,h=d(()=>n.userRole.toUpperCase()==="STORE"?E:V),u=x(n.filters.selectedStores||[]),m=x(n.filters.startDate||""),g=x(n.filters.endDate||""),c={beginning:0,receivedDelivery:0,stockTransfer:0,sales:0,waste:0,itemcount:0,ending:0,variance:0,throwAway:0,earlyMolds:0,pullOut:0,ratBites:0,antBites:0},l=d(()=>{var s;return(s=n.inventory)!=null&&s.length?n.inventory.reduce((t,r)=>{const a=T=>Number(T||0),y=a(r.throw_away)+a(r.early_molds)+a(r.pull_out)+a(r.rat_bites)+a(r.ant_bites);return{beginning:t.beginning+a(r.beginning),receivedDelivery:t.receivedDelivery+a(r.received_delivery),stockTransfer:t.stockTransfer+a(r.stock_transfer),sales:t.sales+a(r.sales),waste:t.waste+y,itemcount:t.itemcount+a(r.item_count),ending:t.ending+a(r.ending),variance:t.variance+a(r.variance),throwAway:t.throwAway+a(r.throw_away),earlyMolds:t.earlyMolds+a(r.early_molds),pullOut:t.pullOut+a(r.pull_out),ratBites:t.ratBites+a(r.rat_bites),antBites:t.antBites+a(r.ant_bites)}},c):c}),F=d(()=>{var s;return((s=n.inventory)==null?void 0:s.reduce((t,r)=>{const a=Number(r.variance||0);return a<0?t+a:t},0))||0}),B=d(()=>{var s;return((s=n.inventory)==null?void 0:s.reduce((t,r)=>{const a=Number(r.variance||0);return a>0?t+a:t},0))||0}),v=[{data:"itemname",title:"Item Name",className:"min-w-[200px]"},{data:"beginning",title:"Beginning",className:"text-right",render:s=>Number(s||0).toFixed(2)},{data:"received_delivery",title:"Received",className:"text-right",render:s=>Number(s||0).toFixed(2)},{data:"stock_transfer",title:"Stock Transfer",className:"text-right",render:s=>Number(s||0).toFixed(2)},{data:"sales",title:"Sales",className:"text-right",render:s=>Number(s||0).toFixed(2)},{data:"throw_away",title:"Throw Away",className:"text-right",render:s=>Number(s||0).toFixed(2)},{data:"early_molds",title:"Early Molds",className:"text-right",render:s=>Number(s||0).toFixed(2)},{data:"pull_out",title:"Pull Out",className:"text-right",render:s=>Number(s||0).toFixed(2)},{data:"rat_bites",title:"Rat Bites",className:"text-right",render:s=>Number(s||0).toFixed(2)},{data:"ant_bites",title:"Ant Bites",className:"text-right",render:s=>Number(s||0).toFixed(2)},{data:"item_count",title:"Item Count",className:"text-right",render:s=>Number(s||0).toFixed(2)},{data:"ending",title:"Ending",className:"text-right font-bold",render:s=>Number(s||0).toFixed(2)},{data:"variance",title:"Variance",className:"text-right",render:(s,t,r)=>{const a=Number(s||0);return`<span class="${a<0?"text-red-600":"text-green-600"} font-bold">${a.toFixed(2)}</span>`}}],D={serverSide:!0,processing:!0,ajax:{url:"/api/inventory",data:function(s){return{...s,startDate:m.value,endDate:g.value,selectedStores:u.value}}},pageLength:25,deferRender:!0,columns:v.map(s=>({...s,orderable:!s.render,searchable:!s.render})),stateSave:!0,dom:'<"top"Bfr>t<"bottom"lip>',scroller:!0,scrollY:"50vh",scrollCollapse:!0};return(s,t)=>(f(),k(S(h.value),{"active-tab":"REPORTS"},{main:b(()=>[e("div",U,[i.userRole.toUpperCase()==="ADMIN"||i.userRole.toUpperCase()==="SUPERADMIN"?(f(),C("div",I,[p(M,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=r=>u.value=r),options:i.stores,label:"Stores"},null,8,["modelValue","options"])])):R("",!0),e("div",q,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),_(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=r=>m.value=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[w,m.value]])]),e("div",$,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1)),_(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=r=>g.value=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[w,g.value]])]),e("div",j,[e("button",{onClick:t[3]||(t[3]=(...r)=>s.clearFilters&&s.clearFilters(...r)),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md"}," Clear Filters ")])]),e("details",W,[t[22]||(t[22]=e("summary",{class:"px-4 py-3 text-lg font-medium cursor-pointer"}," Inventory Summary ",-1)),e("div",z,[e("div",L,[e("div",Y,[t[6]||(t[6]=e("h3",{class:"text-sm font-semibold text-gray-600"},"Beginning Balance",-1)),e("p",G,o(l.value.beginning.toFixed(2)),1)]),e("div",H,[t[7]||(t[7]=e("h3",{class:"text-sm font-semibold text-gray-600"},"Total Received",-1)),e("p",J,o(l.value.receivedDelivery.toFixed(2)),1)]),e("div",K,[t[8]||(t[8]=e("h3",{class:"text-sm font-semibold text-gray-600"},"Stock Transfer",-1)),e("p",Q,o(l.value.stockTransfer.toFixed(2)),1)]),e("div",X,[t[9]||(t[9]=e("h3",{class:"text-sm font-semibold text-gray-600"},"Total Sales",-1)),e("p",Z,o(l.value.sales.toFixed(2)),1)]),e("div",tt,[t[10]||(t[10]=e("h3",{class:"text-sm font-semibold text-gray-600"},"Total Waste",-1)),e("p",et,o(l.value.waste.toFixed(2)),1)]),e("div",st,[t[11]||(t[11]=e("h3",{class:"text-sm font-semibold text-gray-600"},"Current Count",-1)),e("p",rt,o(l.value.itemcount.toFixed(2)),1)]),e("div",at,[t[12]||(t[12]=e("h3",{class:"text-sm font-semibold text-gray-600"},"Ending Balance",-1)),e("p",ot,o(l.value.ending.toFixed(2)),1)]),e("div",lt,[t[15]||(t[15]=e("h3",{class:"text-sm font-semibold text-gray-600"},"Total Variance",-1)),e("div",nt,[e("div",null,[t[13]||(t[13]=e("span",{class:"text-sm text-gray-500"},"Negative:",-1)),e("p",it,o(F.value.toFixed(2)),1)]),e("div",null,[t[14]||(t[14]=e("span",{class:"text-sm text-gray-500"},"Positive:",-1)),e("p",dt,o(B.value.toFixed(2)),1)])])]),e("div",ut,[t[21]||(t[21]=e("h3",{class:"text-sm font-semibold text-gray-600 mb-2"},"Waste Breakdown",-1)),e("div",mt,[e("div",null,[t[16]||(t[16]=e("p",{class:"text-xs text-gray-500"},"Throw Away",-1)),e("p",gt,o(l.value.throwAway.toFixed(2)),1)]),e("div",null,[t[17]||(t[17]=e("p",{class:"text-xs text-gray-500"},"Early Molds",-1)),e("p",xt,o(l.value.earlyMolds.toFixed(2)),1)]),e("div",null,[t[18]||(t[18]=e("p",{class:"text-xs text-gray-500"},"Pull Out",-1)),e("p",pt,o(l.value.pullOut.toFixed(2)),1)]),e("div",null,[t[19]||(t[19]=e("p",{class:"text-xs text-gray-500"},"Rat Bites",-1)),e("p",ct,o(l.value.ratBites.toFixed(2)),1)]),e("div",null,[t[20]||(t[20]=e("p",{class:"text-xs text-gray-500"},"Ant Bites",-1)),e("p",vt,o(l.value.antBites.toFixed(2)),1)])])])])])]),e("div",yt,[p(O,null,{default:b(()=>[p(A(N),{data:i.inventory,columns:v,class:"w-full relative display",options:D},null,8,["data"])]),_:1})])]),_:1}))}};export{Mt as default};
