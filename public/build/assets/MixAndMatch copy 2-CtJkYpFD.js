import{d as v,s as w,k as N,e as r,a as e,F as g,h as f,t as a,f as h,n as b,j as E,y as T,D as I,o as n}from"./app-yW5Rpkbn.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"p-4"},H={key:0,class:"fixed inset-0 z-50"},P={class:"relative min-h-screen flex items-center justify-center p-4"},V={class:"bg-white w-full max-w-4xl rounded-2xl shadow-2xl overflow-hidden"},Y={class:"bg-gradient-to-r from-purple-600 to-blue-500 p-6"},R={class:"flex justify-between items-center"},q={class:"flex items-center justify-center space-x-4 mt-6"},J={key:0,class:"p-12 text-center"},K={key:1,class:"p-8 text-center"},Q={class:"text-red-600 font-medium"},U={key:2,class:"p-6"},W={key:0,class:"space-y-6"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z=["onClick"],ee={class:"font-bold text-gray-800 group-hover:text-purple-600 transition-colors"},te={key:1,class:"space-y-8"},se={class:"flex items-center justify-between"},oe={class:"px-4 py-2 bg-purple-100 rounded-full"},le={class:"text-purple-600 font-medium"},re={class:"flex items-center space-x-2"},ne={class:"text-lg font-semibold text-gray-800"},ie={class:"px-3 py-1 bg-gray-100 rounded-full text-sm text-gray-600"},ae={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},de=["onClick"],ue={class:"font-medium text-gray-800"},ce={class:"mt-2 inline-flex items-center space-x-1"},pe={class:"text-2xl font-bold text-purple-600"},ve={key:2,class:"space-y-6"},me={class:"space-y-6"},ge={class:"font-semibold text-gray-800"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe={class:"font-medium text-gray-800"},he={class:"mt-2 text-purple-600 font-bold"},be={class:"border-t bg-gray-50 p-6"},ye={class:"flex justify-between items-center"},we={class:"flex space-x-4"},_e=["disabled"],ke={__name:"MixAndMatch copy 2",setup(Ce){const C=v([]),d=v(null),u=v({}),i=v(1),m=v(!1),x=v(!1),p=v(null),L=o=>{d.value=o,u.value={},i.value=2},M=w(()=>d.value?d.value.line_groups.map(o=>({...o,items:o.discount_lines||[],selected:u.value[o.linegroup]||[]})):[]),B=async()=>{x.value=!0,p.value=null;try{const o=await I.get("/mix-match/discounts");C.value=o.data}catch{p.value="Failed to load discounts. Please try again."}finally{x.value=!1}},S=(o,t)=>{u.value[t.linegroup]||(u.value[t.linegroup]=[]);const s=u.value[t.linegroup],l=s.findIndex(c=>c.id===o.id);l>-1?s.splice(l,1):s.length<t.noofitemsneeded&&s.push(o),_.value&&(i.value=3)},O=(o,t)=>{var s;return((s=u.value[t])==null?void 0:s.some(l=>l.id===o.id))||!1},j=o=>{var s;return(((s=u.value[o.linegroup])==null?void 0:s.length)||0)===o.noofitemsneeded},_=w(()=>d.value?d.value.line_groups.every(o=>j(o)):!1),$=w(()=>Object.values(u.value).reduce((o,t)=>o+t.length,0)),D=w(()=>d.value?d.value.line_groups.reduce((o,t)=>o+t.noofitemsneeded,0):0),k=()=>{d.value=null,u.value={},i.value=1},z=async()=>{var o,t;x.value=!0,p.value=null;try{const s={discountId:d.value.id,items:Object.entries(u.value).map(([c,F])=>({groupId:c,items:F.map(y=>({id:y.id,itemid:y.itemid,linegroup:y.linegroup,dealpriceordiscpct:y.dealpriceordiscpct.toString()}))}))},l=await I.post("/mix-match/submit-order",s);if(l.data.status==="success"){m.value=!1,k();const c=document.createElement("div");c.className="fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-2",c.innerHTML=`
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
        </svg>
        <span>Order completed successfully!</span>
      `,document.body.appendChild(c),setTimeout(()=>{c.remove()},3e3)}else throw new Error(l.data.message||"Failed to submit order")}catch(s){p.value=((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.message)||"Failed to submit order. Please try again.";const l=document.createElement("div");l.className="fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center space-x-2",l.innerHTML=`
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
      </svg>
      <span>${p.value}</span>
    `,document.body.appendChild(l),setTimeout(()=>{l.remove()},3e3)}finally{x.value=!1}};return N(B),(o,t)=>(n(),r("div",A,[e("button",{onClick:t[0]||(t[0]=s=>m.value=!0),class:"group relative inline-flex items-center justify-center px-6 py-3 overflow-hidden font-bold text-white rounded-lg shadow-2xl bg-gradient-to-br from-purple-600 to-blue-500 hover:from-purple-500 hover:to-blue-400 transition-all duration-300 ease-out hover:scale-105"},t[4]||(t[4]=[e("span",{class:"absolute right-0 w-8 h-32 -mt-12 transition-all duration-1000 transform translate-x-12 bg-white opacity-10 rotate-12 group-hover:-translate-x-40 ease"},null,-1),e("span",{class:"relative"},"Mix&Match",-1)])),m.value?(n(),r("div",H,[t[15]||(t[15]=e("div",{class:"absolute inset-0 bg-gray-900 bg-opacity-50 backdrop-blur-sm"},null,-1)),e("div",P,[e("div",V,[e("div",Y,[e("div",R,[t[6]||(t[6]=e("h2",{class:"text-2xl font-bold text-white"},"Mix & Match Menu",-1)),e("button",{onClick:t[1]||(t[1]=s=>{m.value=!1,k()}),class:"text-white hover:text-gray-200 transition-colors"},t[5]||(t[5]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",q,[(n(),r(g,null,f(3,s=>e("div",{key:s,class:"flex items-center"},[e("div",{class:b(["w-8 h-8 rounded-full flex items-center justify-center border-2 font-bold",i.value>=s?"bg-white text-purple-600 border-white":"border-white/50 text-white/50"])},a(s),3),s<3?(n(),r("div",{key:0,class:b(["w-16 h-0.5 mx-2",i.value>s?"bg-white":"bg-white/30"])},null,2)):h("",!0)])),64))])]),x.value?(n(),r("div",J,t[7]||(t[7]=[e("div",{class:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Loading available offers...",-1)]))):p.value?(n(),r("div",K,[t[8]||(t[8]=e("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 mb-4"},[e("svg",{class:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("p",Q,a(p.value),1)])):(n(),r("div",U,[i.value===1?(n(),r("div",W,[t[10]||(t[10]=e("h3",{class:"text-xl font-bold text-gray-800"},"Select an Offer",-1)),e("div",X,[(n(!0),r(g,null,f(C.value,s=>(n(),r("div",{key:s.id,onClick:l=>L(s),class:"group relative overflow-hidden p-6 rounded-xl border-2 border-gray-100 cursor-pointer transition-all duration-300 hover:border-purple-500 hover:shadow-lg"},[t[9]||(t[9]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-purple-500/0 to-blue-500/0 group-hover:from-purple-500/5 group-hover:to-blue-500/5 transition-colors duration-300"},null,-1)),e("h4",ee,a(s.description),1)],8,Z))),128))])])):h("",!0),i.value===2&&d.value?(n(),r("div",te,[e("div",se,[t[11]||(t[11]=e("h3",{class:"text-xl font-bold text-gray-800"},"Select Your Items",-1)),e("div",oe,[e("span",le,a($.value)+" of "+a(D.value)+" selected ",1)])]),(n(!0),r(g,null,f(M.value,s=>(n(),r("div",{key:s.linegroup,class:"space-y-4"},[e("div",re,[e("h4",ne,a(s.description||`Group ${s.linegroup}`),1),e("span",ie," Select "+a(s.noofitemsneeded),1)]),e("div",ae,[(n(!0),r(g,null,f(s.items,l=>(n(),r("div",{key:l.id,onClick:c=>S(l,s),class:b(["relative p-4 rounded-xl transition-all duration-300",O(l,s.linegroup)?"bg-gradient-to-r from-purple-500/10 to-blue-500/10 border-2 border-purple-500":j(s)?"opacity-50 cursor-not-allowed bg-gray-50 border-2 border-gray-100":"hover:shadow-md border-2 border-gray-100 cursor-pointer"])},[e("div",ue,"Item: "+a(l.itemid),1),e("div",ce,[e("span",pe,a(l.dealpriceordiscpct)+a(l.disctype===1?"%":""),1),t[12]||(t[12]=e("span",{class:"text-sm text-gray-500"},"off",-1))])],10,de))),128))])]))),128))])):h("",!0),i.value===3?(n(),r("div",ve,[t[13]||(t[13]=e("h3",{class:"text-xl font-bold text-gray-800"},"Review Your Selection",-1)),e("div",me,[(n(!0),r(g,null,f(M.value,s=>(n(),r("div",{key:s.linegroup,class:"p-6 rounded-xl bg-gray-50 space-y-4"},[e("h4",ge,a(s.description),1),e("div",fe,[(n(!0),r(g,null,f(u.value[s.linegroup],l=>(n(),r("div",{key:l.id,class:"p-4 bg-white rounded-lg shadow-sm border border-gray-100"},[e("div",xe,a(l.itemid),1),e("div",he,a(l.dealpriceordiscpct)+a(l.disctype===1?"%":"")+" off ",1)]))),128))])]))),128))])])):h("",!0)])),e("div",be,[e("div",ye,[e("button",{onClick:t[2]||(t[2]=s=>i.value>1?i.value--:k()),class:"px-6 py-2 border-2 border-gray-300 rounded-lg font-medium text-gray-600 hover:bg-gray-100 transition-colors"},a(i.value>1?"Back":"Cancel"),1),e("div",we,[i.value<3?(n(),r("button",{key:0,onClick:t[3]||(t[3]=s=>i.value++),disabled:!d.value||i.value===2&&!_.value,class:b(["px-6 py-2 rounded-lg font-medium transition-all duration-300",!d.value||i.value===2&&!_.value?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-blue-500 text-white hover:from-purple-500 hover:to-blue-400"])}," Continue ",10,_e)):(n(),r("button",{key:1,onClick:z,class:"px-6 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg font-medium hover:from-green-400 hover:to-emerald-500 transition-all duration-300"},t[14]||(t[14]=[e("span",{class:"relative inline-flex items-center"},[e("span",null,"Complete Order"),e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)])))])])])])])])):h("",!0),E(e("div",{class:b(["fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transform transition-all duration-500 ease-in-out",m.value?"translate-y-20 opacity-0":"translate-y-0 opacity-100"])},t[16]||(t[16]=[e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("span",null,"Order completed successfully!")],-1)]),2),[[T,m.value===!1&&i.value===1]])]))}},Ie=G(ke,[["__scopeId","data-v-6eba4992"]]);export{Ie as default};
