import{C as W,_ as K}from"./GetBWP-Dcg9ZbQT.js";import{T as L,d as c,q as Q,k as X,l as Z,o as w,c as _,w as u,a as r,i as ee,b as t,j as I,u as n,e as T,F as te,h as oe,t as V,s as se,v as N,n as O,g as x,G as M,f as re,C as ae}from"./app-tcDoizJR.js";import{_ as b}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-yJWX9S4O.js";import{M as le}from"./Modal-CXwwTKO7.js";import{_ as R,b as S}from"./InputError-DzVTcW_j.js";import{T as ne}from"./TableContainer-YM_KkEqb.js";import{_ as de}from"./AdminPanel-O819wuuc.js";import{S as ie}from"./Save-D2sA3ovJ.js";import{B as ue}from"./Back-DU3Pezo3.js";import{T as ce}from"./Trash-rDxqCRwh.js";import{P as U,D as me}from"./dataTables-CvLdq1lI.js";/* empty css                                                               */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./RetailGroup-CmLptvTZ.js";import"./Logout-yGTYNAB4.js";/* empty css                                                             */import"./RetailItems-D0FvWooD.js";import"./Attendance-BwOqMts8.js";const pe={class:"grid grid-cols-3 gap-4 h-full"},ge={class:"col-span-3"},fe=["value"],be={class:"col-span-3"},ye={class:"relative"},ve=["placeholder"],we={class:"col-span-3"},he=["is-error"],De={__name:"CopyFrom",props:{showModal:Boolean,sptransrepos:{type:Array,required:!1},JOURNALID:String,items:{type:Array,required:!0},rbostoretables:{type:Array,required:!0}},emits:["toggleActive"],setup(g,{emit:m}){const y=m,f=g,h=d=>{e.storeid=d},e=L({JOURNALID:"",itemname:"",storeid:"",qty:"",unitid:"",EndDate:"",remarks:""}),A=c("");c(!1),c(null),Q(()=>f.items.filter(d=>d.itemname.toLowerCase().includes(A.value.toLowerCase())));const D=()=>{e.patch("/special-orders/post",{preserveScroll:!0,onSuccess:()=>{e.reset()},onError:d=>{console.error(d)},data:{...e.data,selectStore:e.storeid}}),location.reload()},E=()=>{y("toggleActive")};return X(()=>{e.JOURNALID=f.JOURNALID,Z(()=>f.JOURNALID,d=>{e.JOURNALID=d})}),(d,s)=>(w(),_(le,{title:"POST SPECIAL ORDERS",onToggleActive:E,"show-modal":g.showModal},{content:u(()=>[r("form",{onSubmit:ee(D,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[r("div",pe,[r("div",ge,[t(R,{for:"StoreName",value:"SELECT STORE"}),I(r("select",{id:"storeid","onUpdate:modelValue":s[0]||(s[0]=l=>n(e).storeid=l),class:"select select-bordered w-full",onChange:s[1]||(s[1]=l=>h(n(e).storeid))},[(w(!0),T(te,null,oe(g.rbostoretables,l=>(w(),T("option",{key:l.storeid,value:l.NAME},V(l.NAME),9,fe))),128))],544),[[se,n(e).storeid]]),t(S,{class:"mt-2",message:n(e).errors.storeid},null,8,["message"])]),t(R,{for:"DATE",value:"DELIVERY DATE"}),r("div",be,[r("div",ye,[s[5]||(s[5]=r("div",{class:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"},[r("svg",{class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[r("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])],-1)),I(r("input",{id:"EndDate",type:"date","onUpdate:modelValue":s[2]||(s[2]=l=>n(e).EndDate=l),onInput:s[3]||(s[3]=(...l)=>d.formattedDate2&&d.formattedDate2(...l)),placeholder:d.formattedDate2,class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,40,ve),[[N,n(e).EndDate]]),t(S,{message:n(e).errors.EndDate,class:"mt-2"},null,8,["message"])])]),r("div",we,[s[6]||(s[6]=r("label",{for:"message",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"REMARKS",-1)),I(r("textarea",{id:"remarks","onUpdate:modelValue":s[4]||(s[4]=l=>n(e).remarks=l),"is-error":!!n(e).errors.remarks,type:"text",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},"                            ",8,he),[[N,n(e).remarks]]),t(S,{message:n(e).errors.remarks,class:"mt-2"},null,8,["message"])])])],32)]),buttons:u(()=>[t(b,{type:"submit",onClick:D,disabled:n(e).processing,class:O({"opacity-25":n(e).processing})},{default:u(()=>s[7]||(s[7]=[x(" POST ")])),_:1},8,["disabled","class"])]),_:1},8,["show-modal"]))}},ke={class:"flex justify-start items-center"},je={__name:"index",props:{sptransrepos:{type:Array,required:!0},sptrans:{type:Array,required:!0},journalid:{type:[String,Number],required:!0},items:{type:Array,required:!0},rbostoretables:{type:Array,required:!0}},setup(g){U.use(me);const m=c("");c(""),c("");const y=c(!1),f=c(!1),h=c(!1),e=g,A=a=>{console.log("Selected rbostoretables:",a)},D=[{data:"ITEMID",title:"ITEMID"},{data:"itemname",title:"ITEMNAME"},{data:"itemgroup",title:"CATEGORY"},{data:"COUNTED",title:"COUNTED",render:function(a,o,p){return o==="display"?`<input type="number" class="counted-input form-input block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" value="${Number(a).toFixed(0)}" min="0" step="1">`:a}}],E={paging:!1,scrollX:!0,scrollY:"70vh",scrollCollapse:!0,drawCallback:function(a){this.api().rows().every(function(){const p=this.data(),k=this.node().querySelector(".counted-input");k&&k.addEventListener("change",z=>P(z,p))})}},d=a=>{m.value="SPECIAL ORDER",f.value=!0,console.log(m.value)},s=a=>{m.value=a,y.value=!0,console.log(m.value)},l=()=>{h.value=!1},J=()=>{f.value=!1},q=()=>{y.value=!1};L({StartDate:"",EndDate:""});const B=()=>{window.location.href="/mgcount"},j=()=>{window.confirm("Are you sure you want to delete all orders?")?window.location.href="/SP-DeleteOrders":console.log("User cancelled the delete operation.")},G=()=>{window.location.href="/specialorders/vieworders"},$=a=>{console.log("Selected Item:",a)},F=c([]),v=M({}),i=M({text:"",type:""}),P=(a,o)=>{const p=a.target.value;v[o.ITEMID]=p},H=async()=>{try{if(i.text="Updating counted values...",i.type="info",(await ae.post("/api/sp-update-all-counted-values",{journalId:e.journalid,updatedValues:v})).data.success){console.log("All values updated successfully");for(const[o,p]of Object.entries(v)){const C=F.value.find(k=>k.ITEMID===o);C&&(C.COUNTED=p)}Object.keys(v).forEach(o=>delete v[o]),i.text="All counted values updated successfully",i.type="success",location.reload()}else throw new Error("Update failed")}catch(a){console.error("You don't have any changes!",a),i.text="You don't have any changes!",i.type="error"}Y()},Y=()=>{setTimeout(()=>{i.text="",i.type=""},5e3)};return(a,o)=>(w(),_(de,{"active-tab":"FGCOUNT"},{modals:u(()=>[t(W,{"show-modal":h.value,JOURNALID:m.value,items:e.items,onToggleActive:l,onSelectItem:$},null,8,["show-modal","JOURNALID","items"]),t(K,{"show-modal":f.value,JOURNALID:m.value,onToggleActive:J},null,8,["show-modal","JOURNALID"]),t(De,{"show-modal":y.value,JOURNALID:m.value,rbostoretables:e.rbostoretables,onSelectItem:A,onToggleActive:q},null,8,["show-modal","JOURNALID","rbostoretables"])]),main:u(()=>[t(ne,null,{default:u(()=>[i.text?(w(),T("div",{key:0,class:O(["p-4 mb-4 rounded-md",i.type==="success"?"bg-green-100 text-green-700":i.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},V(i.text),3)):re("",!0),r("div",{class:O(["absolute adjust",{"mt-20":i.text}])},[r("div",ke,[t(b,{type:"button",onClick:B,class:"m-1 ml-2 bg-navy p-10"},{default:u(()=>[t(ue,{class:"h-5"})]),_:1}),t(b,{type:"button",onClick:o[0]||(o[0]=p=>d(g.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:u(()=>o[1]||(o[1]=[x(" GENERATE ")])),_:1}),t(b,{type:"button",onClick:H,class:"m-1 ml-2 bg-green-900 p-10"},{default:u(()=>[t(ie,{class:"h-5"})]),_:1}),t(b,{type:"button",onClick:j,class:"m-1 ml-2 bg-red-900 p-10"},{default:u(()=>[t(ce,{class:"h-5"})]),_:1}),t(b,{type:"button",onClick:s,class:"m-2 sm:m-6 bg-red-900"},{default:u(()=>o[2]||(o[2]=[x(" POST ")])),_:1}),t(b,{type:"button",onClick:G,class:"m-1 ml-2 bg-navy p-10"},{default:u(()=>o[3]||(o[3]=[x(" SPECIAL ORDERS ")])),_:1})])],2),t(n(U),{data:g.sptransrepos,columns:D,class:"w-full relative display",options:E},{action:u(p=>o[4]||(o[4]=[r("label",{class:"inline-flex items-center"},[r("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600 rounded-full"}),r("span",{class:"ml-2 text-gray-700"})],-1)])),_:1},8,["data"])]),_:1})]),_:1}))}};export{je as default};
