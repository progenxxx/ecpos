import{d as v,H as Me,s as g,l as ue,k as je,e as n,b as ce,w as me,u as Ne,F as S,o as i,a as e,Z as De,g as C,t as l,f,j as T,v as L,x as pe,h as A,n as V,D as ve}from"./app-Do8mhcc_.js";import{_ as Le}from"./Main-DJMaGw9E.js";import{f as Ae}from"./format-cwXK75ha.js";import"./Logout-MAsyIaFu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                             */import"./Modal-BufSFMTr.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-Cw8u42Sx.js";import"./PartyCake143-Bf8C3VD0.js";import"./Attendance-Bi3B0c_5.js";const $e={class:"py-6"},Ie={class:"max-w-12xl mx-auto sm:px-6 lg:px-8"},Ve={key:0,class:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative"},Ee={key:1,class:"mb-4 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded relative"},Fe={class:"mb-6 flex justify-between items-center"},qe={class:"mt-1 text-sm text-gray-600"},Pe=["disabled"],Ue={class:"bg-white p-4 rounded-lg shadow mb-6"},ze={class:"flex flex-wrap gap-4"},Be={class:"flex-1 min-w-[200px]"},Oe={class:"w-48"},Re={class:"w-48"},He={class:"w-48"},Qe={class:"bg-white shadow rounded-lg overflow-hidden"},Ke={class:"overflow-x-auto"},Ze={class:"min-w-full divide-y divide-gray-200"},Ge={class:"bg-gray-50"},Je=["onClick"],We={class:"flex items-center"},Xe={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},Ye={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"},et={class:"bg-white divide-y divide-gray-200"},tt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},at={class:"px-6 py-4 whitespace-nowrap"},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},nt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},it=["onClick"],dt=["onClick"],ut=["onClick"],ct={key:0},mt={class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},pt={class:"flex items-center justify-between"},vt={class:"flex-1 flex justify-between sm:hidden"},ft=["disabled"],xt=["disabled"],yt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},gt={class:"text-sm text-gray-700"},bt={class:"font-medium"},ht={class:"font-medium"},wt={class:"font-medium"},_t={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},kt=["disabled"],St=["onClick"],Ct=["disabled"],Tt={key:2,class:"fixed inset-0 z-50"},Mt={class:"fixed inset-0 z-10 overflow-y-auto"},jt={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Nt={class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-3xl"},Dt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Lt={class:"mt-5"},At={class:"mb-4"},$t=["value"],It={key:0,class:"mt-1 text-sm text-red-600"},Vt={class:"mb-4"},Et={class:"flex items-center justify-between mb-2"},Ft={class:"flex items-center"},qt={class:"mt-2 border rounded-md max-h-60 overflow-y-auto"},Pt={class:"min-w-full divide-y divide-gray-200"},Ut={class:"bg-white divide-y divide-gray-200"},zt={class:"px-4 py-2 text-sm"},Bt={class:"px-4 py-2"},Ot=["onUpdate:modelValue","onInput"],Rt={key:0,class:"mt-1 text-sm text-red-600"},Ht={class:"mb-4"},Qt={key:0,class:"mb-4"},Kt={class:"bg-gray-50 rounded-md p-3"},Zt={class:"text-sm text-gray-600"},Gt={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Jt=["disabled"],Wt={key:3,class:"fixed inset-0 z-50"},Xt={class:"fixed inset-0 z-10 overflow-y-auto"},Yt={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},es={class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-3xl"},ts={class:"bg-white px-4 pt-5 pb-4 sm:p-6"},ss={class:"flex justify-between items-center"},os={class:"text-lg font-medium leading-6 text-gray-900"},rs={class:"mt-4 grid grid-cols-2 gap-4"},as={class:"font-medium"},ls={class:"font-medium"},ns={class:"font-medium"},is={key:0},ds={class:"font-medium"},us={key:1},cs={class:"font-medium"},ms={class:"mt-6"},ps={class:"overflow-x-auto"},vs={class:"min-w-full divide-y divide-gray-200"},fs={class:"bg-white divide-y divide-gray-200"},xs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ys={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},gs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},bs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},hs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ws={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_s={class:"bg-gray-50"},ks={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Ss={key:0,class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Cs=["disabled"],Ts=["disabled"],E=10,Fs={__name:"list",props:{transfers:{type:Array,required:!0,default:()=>[]},stores:{type:Array,required:!0,default:()=>[]},items:{type:Array,required:!0,default:()=>[]},currentStore:{type:String,required:!0}},setup(K){const x=K,fe=[{key:"transfer_number",label:"Transfer #",sortable:!0},{key:"created_at",label:"Date",sortable:!0},{key:"from_store",label:"From Store",sortable:!0},{key:"to_store",label:"To Store",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"items_count",label:"Items",sortable:!0}],F=v(!1),q=v(!1),b=v(!1),N=v(""),$=v(""),I=v(""),k=v({}),m=v(1),p=v("created_at"),D=v("desc"),u=v(null),M=v({}),h=Me({destinationStore:"",notes:""}),c=v({search:"",status:"",dateFrom:"",dateTo:""}),xe=g(()=>{const o=x.stores.find(t=>t.STOREID===x.currentStore);return o?o.NAME:x.currentStore||"No Store Selected"}),P=g(()=>{let o=[...x.transfers];if(c.value.search){const t=c.value.search.toLowerCase();o=o.filter(r=>{var a,d,w,y,_;return((a=r.transfer_number)==null?void 0:a.toLowerCase().includes(t))||((w=(d=r.from_store)==null?void 0:d.NAME)==null?void 0:w.toLowerCase().includes(t))||((_=(y=r.to_store)==null?void 0:y.NAME)==null?void 0:_.toLowerCase().includes(t))})}if(c.value.status&&(o=o.filter(t=>t.status===c.value.status)),c.value.dateFrom){const t=new Date(c.value.dateFrom);o=o.filter(r=>new Date(r.created_at)>=t)}if(c.value.dateTo){const t=new Date(c.value.dateTo);t.setHours(23,59,59),o=o.filter(r=>new Date(r.created_at)<=t)}return o.sort((t,r)=>{var w,y;let a=t[p.value],d=r[p.value];return p.value==="from_store"||p.value==="to_store"?(a=(w=t[p.value])==null?void 0:w.NAME,d=(y=r[p.value])==null?void 0:y.NAME):p.value==="total_amount"&&(a=Q(t),d=Q(r)),D.value==="desc"&&([a,d]=[d,a]),a<d?-1:a>d?1:0}),o}),Z=g(()=>{const o=(m.value-1)*E;return P.value.slice(o,o+E)}),U=g(()=>Math.ceil(P.value.length/E)),ye=g(()=>{const o=U.value,t=m.value,r=[];if(o<=7)for(let a=1;a<=o;a++)r.push(a);else if(t<=3){for(let a=1;a<=5;a++)r.push(a);r.push("..."),r.push(o)}else if(t>=o-2){r.push(1),r.push("...");for(let a=o-4;a<=o;a++)r.push(a)}else{r.push(1),r.push("...");for(let a=t-1;a<=t+1;a++)r.push(a);r.push("..."),r.push(o)}return r}),ge=g(()=>(m.value-1)*E+1),be=g(()=>Math.min(m.value*E,P.value.length)),he=g(()=>{if(!I.value)return x.items;const o=I.value.toLowerCase();return x.items.filter(t=>t.itemname.toLowerCase().includes(o)||t.itemid.toString().toLowerCase().includes(o))}),B=g(()=>Object.values(k.value).filter(o=>o>0).length);g(()=>Object.entries(k.value).reduce((o,[t,r])=>{if(r>0){const a=x.items.find(d=>d.itemid===t);return o+r*((a==null?void 0:a.price)||0)}return o},0));const G=g(()=>h.destinationStore&&B.value>0),we=o=>{k.value[o]<0&&(k.value[o]=0)},_e=async()=>{var o,t,r,a;if(G.value)try{b.value=!0,M.value={};const d=Object.entries(k.value).filter(([y,_])=>_>0).map(([y,_])=>({itemid:y,quantity:parseInt(_)})),w=await ve.post("/stock-transfer",{to_store_id:h.destinationStore,items:d,notes:h.notes});$.value="Stock transfer created successfully",O(),window.location.reload()}catch(d){console.error("Transfer creation error:",d),(t=(o=d.response)==null?void 0:o.data)!=null&&t.errors?M.value=d.response.data.errors:N.value=((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create transfer"}finally{b.value=!1}},z=async(o,t)=>{var r,a;if(o)try{b.value=!0,await ve.patch(`/stock-transfer/${o}/status`,{status:t}),$.value=`Transfer ${t} successfully`,q.value&&W(),window.location.reload()}catch(d){console.error("Status update error:",d),N.value=((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||`Failed to ${t} transfer`}finally{b.value=!1}},J=()=>{h.destinationStore="",h.notes="",k.value={},M.value={},I.value=""},O=()=>{F.value=!1,J()},W=()=>{q.value=!1,u.value=null},ke=o=>{u.value=o,q.value=!0},Se=o=>{p.value===o?D.value=D.value==="asc"?"desc":"asc":(p.value=o,D.value="asc")},X=o=>({request:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",R=o=>o?Ae(new Date(o),"MMM dd, yyyy HH:mm"):"",H=o=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(o||0),Ce=o=>{var t;return((t=x.items.find(r=>r.itemid===o))==null?void 0:t.itemname)||""},Te=o=>{var t;return((t=x.items.find(r=>r.itemid===o))==null?void 0:t.unitid)||""},Q=o=>o!=null&&o.items?o.items.reduce((t,r)=>t+r.quantity*r.unit_price,0):0,Y=o=>o.to_store_id===x.currentStore;return ue(F,o=>{o||J()}),ue([c,p,D],()=>{m.value=1}),je(()=>{x.currentStore||(N.value="Store information not found. Please refresh the page.")}),(o,t)=>(i(),n(S,null,[ce(Ne(De),{title:"Stock Transfers"},{default:me(()=>t[16]||(t[16]=[e("meta",{name:"description",content:"Stock Transfer Management System"},null,-1)])),_:1}),ce(Le,{"active-tab":"STOCKTRANSFER",user:o.$page.props.auth.user},{main:me(()=>{var r,a,d,w,y,_,ee,te,se,oe,re,ae,le,ne;return[e("div",$e,[e("div",Ie,[N.value?(i(),n("div",Ve,[C(l(N.value)+" ",1),e("button",{onClick:t[0]||(t[0]=s=>N.value=""),class:"absolute top-2 right-2"},t[17]||(t[17]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"})],-1)]))])):f("",!0),$.value?(i(),n("div",Ee,[C(l($.value)+" ",1),e("button",{onClick:t[1]||(t[1]=s=>$.value=""),class:"absolute top-2 right-2"},t[18]||(t[18]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"})],-1)]))])):f("",!0),e("div",Fe,[e("div",null,[t[19]||(t[19]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Stock Transfers",-1)),e("p",qe,"Current Store: "+l(xe.value),1)]),e("button",{onClick:t[2]||(t[2]=s=>F.value=!0),disabled:!x.currentStore,class:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},t[20]||(t[20]=[e("span",{class:"mr-2"},"+",-1),C(" Create Stock Transfer ")]),8,Pe)]),e("div",Ue,[e("div",ze,[e("div",Be,[T(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>c.value.search=s),type:"text",placeholder:"Search transfers...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[L,c.value.search]])]),e("div",Oe,[T(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>c.value.status=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[21]||(t[21]=[e("option",{value:""},"All Status",-1),e("option",{value:"request"},"Request",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)]),512),[[pe,c.value.status]])]),e("div",Re,[T(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>c.value.dateFrom=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[L,c.value.dateFrom]])]),e("div",He,[T(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>c.value.dateTo=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[L,c.value.dateTo]])])])]),e("div",Qe,[e("div",Ke,[e("table",Ze,[e("thead",Ge,[e("tr",null,[(i(),n(S,null,A(fe,s=>e("th",{key:s.key,onClick:j=>s.sortable?Se(s.key):null,class:V(["px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",{"cursor-pointer hover:bg-gray-100":s.sortable}])},[e("div",We,[C(l(s.label)+" ",1),s.sortable?(i(),n("svg",{key:0,class:V(["ml-2 h-4 w-4",{"text-gray-400":p.value!==s.key,"text-indigo-600":p.value===s.key}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[p.value===s.key&&D.value==="desc"?(i(),n("path",Xe)):(i(),n("path",Ye))],2)):f("",!0)])],10,Je)),64)),t[22]||(t[22]=e("th",{class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")],-1))])]),e("tbody",et,[(i(!0),n(S,null,A(Z.value,s=>{var j,ie;return i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",tt,l(s.transfer_number),1),e("td",st,l(R(s.created_at)),1),e("td",ot,l((j=s.from_store)==null?void 0:j.NAME),1),e("td",rt,l((ie=s.to_store)==null?void 0:ie.NAME),1),e("td",at,[e("span",{class:V(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",X(s.status)])},l(s.status),3)]),e("td",lt,l(s.items_count)+" items ",1),e("td",nt,[e("button",{onClick:de=>ke(s),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," View ",8,it),s.status==="request"&&Y(s)?(i(),n(S,{key:0},[e("button",{onClick:de=>z(s.id,"approved"),class:"text-green-600 hover:text-green-900 mr-3"}," Approve ",8,dt),e("button",{onClick:de=>z(s.id,"rejected"),class:"text-red-600 hover:text-red-900"}," Reject ",8,ut)],64)):f("",!0)])])}),128)),Z.value.length===0?(i(),n("tr",ct,t[23]||(t[23]=[e("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," No transfers found matching your criteria ",-1)]))):f("",!0)])])]),e("div",mt,[e("div",pt,[e("div",vt,[e("button",{onClick:t[7]||(t[7]=s=>m.value--),disabled:m.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Previous ",8,ft),e("button",{onClick:t[8]||(t[8]=s=>m.value++),disabled:m.value>=U.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Next ",8,xt)]),e("div",yt,[e("div",null,[e("p",gt,[t[24]||(t[24]=C(" Showing ")),e("span",bt,l(ge.value),1),t[25]||(t[25]=C(" to ")),e("span",ht,l(be.value),1),t[26]||(t[26]=C(" of ")),e("span",wt,l(P.value.length),1),t[27]||(t[27]=C(" results "))])]),e("div",null,[e("nav",_t,[e("button",{onClick:t[9]||(t[9]=s=>m.value=1),disabled:m.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"},t[28]||(t[28]=[e("span",{class:"sr-only"},"First",-1),e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M15.707 15.707a1 1 0 01-1.414 0L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0l5 5a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1)]),8,kt),(i(!0),n(S,null,A(ye.value,s=>(i(),n("button",{key:s,onClick:j=>m.value=s,class:V(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",m.value===s?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},l(s),11,St))),128)),e("button",{onClick:t[10]||(t[10]=s=>m.value=U.value),disabled:m.value===U.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"},t[29]||(t[29]=[e("span",{class:"sr-only"},"Last",-1),e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,Ct)])])])])])]),F.value?(i(),n("div",Tt,[t[38]||(t[38]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",Mt,[e("div",jt,[e("div",Nt,[e("div",Dt,[e("div",{class:"flex justify-between items-center"},[t[31]||(t[31]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Create New Stock Transfer ",-1)),e("button",{onClick:O,class:"text-gray-400 hover:text-gray-500"},t[30]||(t[30]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Lt,[e("div",At,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Destination Store ",-1)),T(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>h.destinationStore=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[32]||(t[32]=e("option",{value:""},"Select Store",-1)),(i(!0),n(S,null,A(K.stores,s=>(i(),n("option",{key:s.STOREID,value:s.STOREID},l(s.NAME),9,$t))),128))],512),[[pe,h.destinationStore]]),M.value.destinationStore?(i(),n("p",It,l(M.value.destinationStore),1)):f("",!0)]),e("div",Vt,[e("div",Et,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700"}," Select Items and Quantities ",-1)),e("div",Ft,[T(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=s=>I.value=s),placeholder:"Search items...",class:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[L,I.value]])])]),e("div",qt,[e("table",Pt,[t[35]||(t[35]=e("thead",{class:"bg-gray-50 sticky top-0"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500"},"Item Name"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500"},"Quantity")])],-1)),e("tbody",Ut,[(i(!0),n(S,null,A(he.value,s=>(i(),n("tr",{key:s.itemid},[e("td",zt,l(s.itemname),1),e("td",Bt,[T(e("input",{type:"number","onUpdate:modelValue":j=>k.value[s.itemid]=j,min:"0",class:"w-20 rounded-md border-gray-300",onInput:j=>we(s.itemid)},null,40,Ot),[[L,k.value[s.itemid],void 0,{number:!0}]])])]))),128))])])]),M.value.items?(i(),n("p",Rt,l(M.value.items),1)):f("",!0)]),e("div",Ht,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notes (Optional) ",-1)),T(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=s=>h.notes=s),rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Add any notes..."},null,512),[[L,h.notes]])]),B.value>0?(i(),n("div",Qt,[t[37]||(t[37]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Selected Items Summary",-1)),e("div",Kt,[e("p",Zt," Total Items: "+l(B.value),1)])])):f("",!0)])]),e("div",Gt,[e("button",{type:"button",onClick:_e,disabled:b.value||!G.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},l(b.value?"Creating...":"Create Transfer"),9,Jt),e("button",{type:"button",onClick:O,class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])])):f("",!0),q.value?(i(),n("div",Wt,[t[49]||(t[49]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",Xt,[e("div",Yt,[e("div",es,[e("div",ts,[e("div",ss,[e("h3",os," Transfer Details #"+l((r=u.value)==null?void 0:r.transfer_number),1),e("button",{onClick:W,class:"text-gray-400 hover:text-gray-500"},t[39]||(t[39]=[e("span",{class:"sr-only"},"Close",-1),e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",rs,[e("div",null,[t[40]||(t[40]=e("p",{class:"text-sm text-gray-500"},"From Store",-1)),e("p",as,l((d=(a=u.value)==null?void 0:a.from_store)==null?void 0:d.NAME),1)]),e("div",null,[t[41]||(t[41]=e("p",{class:"text-sm text-gray-500"},"To Store",-1)),e("p",ls,l((y=(w=u.value)==null?void 0:w.to_store)==null?void 0:y.NAME),1)]),e("div",null,[t[42]||(t[42]=e("p",{class:"text-sm text-gray-500"},"Date Created",-1)),e("p",ns,l(R((_=u.value)==null?void 0:_.created_at)),1)]),e("div",null,[t[43]||(t[43]=e("p",{class:"text-sm text-gray-500"},"Status",-1)),e("span",{class:V(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",X((ee=u.value)==null?void 0:ee.status)])},l((te=u.value)==null?void 0:te.status),3)]),(se=u.value)!=null&&se.processed_at?(i(),n("div",is,[t[44]||(t[44]=e("p",{class:"text-sm text-gray-500"},"Processed Date",-1)),e("p",ds,l(R((oe=u.value)==null?void 0:oe.processed_at)),1)])):f("",!0),(re=u.value)!=null&&re.notes?(i(),n("div",us,[t[45]||(t[45]=e("p",{class:"text-sm text-gray-500"},"Notes",-1)),e("p",cs,l((ae=u.value)==null?void 0:ae.notes),1)])):f("",!0)]),e("div",ms,[t[48]||(t[48]=e("h4",{class:"text-md font-medium mb-2"},"Transfer Items",-1)),e("div",ps,[e("table",vs,[t[47]||(t[47]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Item ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Item Name"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Unit"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Quantity"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Unit Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total")])],-1)),e("tbody",fs,[(i(!0),n(S,null,A((le=u.value)==null?void 0:le.items,s=>(i(),n("tr",{key:s.id},[e("td",xs,l(s.itemid),1),e("td",ys,l(Ce(s.itemid)),1),e("td",gs,l(Te(s.itemid)),1),e("td",bs,l(s.quantity),1),e("td",hs,l(H(s.unit_price)),1),e("td",ws,l(H(s.quantity*s.unit_price)),1)]))),128))]),e("tfoot",_s,[e("tr",null,[t[46]||(t[46]=e("td",{colspan:"5",class:"px-6 py-4 text-sm font-medium text-gray-900 text-right"},"Total",-1)),e("td",ks,l(H(Q(u.value))),1)])])])])]),((ne=u.value)==null?void 0:ne.status)==="request"&&Y(u.value)?(i(),n("div",Ss,[e("button",{type:"button",onClick:t[14]||(t[14]=s=>z(u.value.id,"approved")),disabled:b.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-green-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"},l(b.value?"Processing...":"Approve Transfer"),9,Cs),e("button",{type:"button",onClick:t[15]||(t[15]=s=>z(u.value.id,"rejected")),disabled:b.value,class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-red-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Reject Transfer ",8,Ts)])):f("",!0)])])])])])):f("",!0)])])]}),_:1},8,["user"])],64))}};export{Fs as default};
