import{C as V}from"./Create-sPe8u2ZW.js";import{G as S,_}from"./CopyFrom-BoSECAMj.js";import{_ as p}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-DaotuncJ.js";import{T as B}from"./TableContainer-Coscx9RQ.js";import{_ as L}from"./Main-Doj4ueid.js";import{S as $}from"./Save-vUp40Sw1.js";import{C as G}from"./Cart-CAmfJNaw.js";import{d as r,T as J,H as w,c as q,w as n,o as b,b as o,e as H,t as W,n as h,f as Y,a as i,g as F,u as P,D as z}from"./app-Brw7jJEf.js";import{P as C,D as X}from"./dataTables-Jqqx4cQa.js";import"./Modal-CtatsLVe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-DvOIMu0q.js";/* empty css                                                               *//* empty css                                                               */import"./Logout-DCQOxVUr.js";/* empty css                                                             */import"./PartyCake143-CU69s4o2.js";import"./Attendance-DYGT2FcC.js";const K={class:"flex justify-start items-center"},ve={__name:"warehouse",props:{inventjournaltransrepos:{type:Array,required:!0},inventjournaltrans:{type:Array,required:!0},journalid:{type:[String,Number],required:!0},items:{type:Array,required:!0}},setup(u){C.use(X);const c=r("");r(""),r("");const f=r(!1),g=r(!1),v=r(!1),y=u,D=[{data:"ITEMID",title:"ITEMID"},{data:"itemname",title:"ITEMNAME"},{data:"itemgroup",title:"CATEGORY"},{data:"COUNTED",title:"COUNTED",render:function(t,e,s){return e==="display"?`<input type="number" class="counted-input form-input block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" value="${Number(t).toFixed(0)}" min="0" step="1">`:t}}],x={paging:!1,scrollX:!0,scrollY:"70vh",scrollCollapse:!0,drawCallback:function(t){this.api().rows().every(function(){const s=this.data(),d=this.node().querySelector(".counted-input");d&&d.addEventListener("change",R=>U(R,s))})}},I=()=>{v.value=!1},O=()=>{g.value=!1},T=()=>{f.value=!1};J({StartDate:"",EndDate:""});const A=t=>{window.location.href=`/ItemOrders/${t}`},N=t=>{window.location.href=`/warehouse/ViewOrders/${t}`},E=t=>{console.log("Selected Item:",t)},M=r([]),l=w({}),a=w({text:"",type:""}),U=(t,e)=>{const s=t.target.value;l[e.ITEMID]=s},j=async()=>{try{if(a.text="Updating counted values...",a.type="info",(await z.post("/api/update-all-counted-values",{journalId:y.journalid,updatedValues:l})).data.success){console.log("All values updated successfully");for(const[e,s]of Object.entries(l)){const m=M.value.find(d=>d.ITEMID===e);m&&(m.COUNTED=s)}Object.keys(l).forEach(e=>delete l[e]),a.text="All counted values updated successfully",a.type="success",location.reload()}else throw new Error("Update failed")}catch(t){console.error("You don't have any changes!",t),a.text="You don't have any changes!",a.type="error"}k()},k=()=>{setTimeout(()=>{a.text="",a.type=""},5e3)};return(t,e)=>(b(),q(L,{"active-tab":"ORDER"},{modals:n(()=>[o(V,{"show-modal":v.value,JOURNALID:c.value,items:y.items,onToggleActive:I,onSelectItem:E},null,8,["show-modal","JOURNALID","items"]),o(S,{"show-modal":g.value,JOURNALID:c.value,onToggleActive:O},null,8,["show-modal","JOURNALID"]),o(_,{"show-modal":f.value,JOURNALID:c.value,onToggleActive:T},null,8,["show-modal","JOURNALID"])]),main:n(()=>[o(B,null,{default:n(()=>[a.text?(b(),H("div",{key:0,class:h(["p-4 mb-4 rounded-md",a.type==="success"?"bg-green-100 text-green-700":a.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},W(a.text),3)):Y("",!0),i("div",{class:h(["absolute adjust",{"mt-20":a.text}])},[i("div",K,[o(p,{type:"button",onClick:e[0]||(e[0]=s=>A(u.journalid)),class:"m-1 ml-2 bg-red-900 p-10"},{default:n(()=>e[2]||(e[2]=[F(" BWPRODUCT ")])),_:1}),o(p,{type:"button",onClick:j,class:"m-1 ml-2 bg-navy p-10"},{default:n(()=>[o($,{class:"h-5"})]),_:1}),o(p,{type:"button",onClick:e[1]||(e[1]=s=>N(u.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:n(()=>[o(G,{class:"h-5"})]),_:1})])],2),o(P(C),{data:u.inventjournaltransrepos,columns:D,class:"w-full relative display",options:x},{action:n(s=>e[3]||(e[3]=[i("label",{class:"inline-flex items-center"},[i("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600 rounded-full"}),i("span",{class:"ml-2 text-gray-700"})],-1)])),_:1},8,["data"])]),_:1})]),_:1}))}};export{ve as default};
