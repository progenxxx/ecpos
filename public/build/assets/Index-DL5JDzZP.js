import{D as g,d,s as $,l as lt,k as rt,c as U,w as Q,o as b,a as e,t as m,j as H,v as q,n as x,e as f,f as nt,b as N,h as G,E as it,C as dt,F as Z,a0 as ct,g as E}from"./app-Do8mhcc_.js";import{C as h,r as ut}from"./chart-8SaNzrGi.js";import{_ as pt}from"./AdminPanel-B-hw9tyY.js";import{_ as bt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as J,I as mt,r as K,R as X,P as vt}from"./CubeIcon-BaytOQwK.js";import{_ as gt}from"./MultiSelectDropdown-DUxBUClO.js";import ft from"./wasteanalysis-B_2wv0yH.js";/* empty css                                                                        */import"./RetailGroup-D_6SfRWw.js";import"./Logout-MAsyIaFu.js";/* empty css                                                             */import"./Modal-BufSFMTr.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-Cw8u42Sx.js";import"./RetailItems-SitUjnLk.js";import"./Attendance-Bi3B0c_5.js";const yt={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6 space-y-6 relative overflow-hidden"},xt={class:"relative z-10 bg-white/80 rounded-3xl shadow-2xl border border-blue-100/50 p-6 transform transition-all duration-500 hover:scale-[1.02]"},ht={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},wt={class:"flex flex-col w-full md:w-auto"},_t={class:"flex items-center space-x-4"},Ct={class:"text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-3 animate-pulse-slow"},kt={class:"flex space-x-4"},At={class:"flex flex-col"},St={class:"flex flex-col"},Tt={key:0,class:"text-red-500 text-xs mt-2 flex items-center space-x-2 animate-bounce"},Mt={class:"w-full md:w-auto"},Dt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6"},Nt={class:"bg-white/90 rounded-3xl shadow-xl border border-blue-100/50 p-6 space-y-4 relative overflow-hidden group"},Et={class:"flex justify-between items-center relative z-10"},Pt={class:"relative z-10"},Rt={class:"text-xs uppercase tracking-wider text-gray-500 mb-2"},Vt={class:"text-sm text-gray-400 mt-2"},zt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Lt={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},Bt={class:"h-[400px] relative z-10"},Ot={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},It={class:"max-h-[400px] overflow-y-auto custom-scrollbar relative z-10"},Ft={class:"font-semibold text-gray-800 mb-2"},Wt={class:"text-gray-600 text-sm"},jt={key:1,class:"text-gray-500 text-center py-4 italic"},$t={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},Ut={class:"h-[500px] relative z-10"},Qt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ht={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},qt={class:"h-[400px] relative z-10"},Gt={__name:"Index",props:{username:{type:String,default:"User"},announcements:{type:Array,required:!0},metrics:{type:Object,required:!0,default:()=>({totalGross:0,totalNetsales:0,totalDiscount:0,totalCost:0,totalVat:0,totalVatableSales:0,paymentBreakdown:{cash:0,gcash:0,paymaya:0,card:0,loyaltyCard:0,foodPanda:0,grabFood:0}})}},setup(w){h.register(...ut),g.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content");const P=w,_=d(P.initialMetrics),v=d(""),C=d(null);let k=null;const R=d(null);let A=null;d(null),d(null);const V=d([]),u=d([]),Y=async()=>{try{const o=await g.get(route("get.stores"));V.value=o.data,u.value=o.data}catch(o){console.error("Error fetching stores:",o)}};d(null),d(!1);const S=d(null),T=d(null);let M=null,D=null;const n=d({start_date:new Date().toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),tt=$(()=>{const o=new Date(n.value.start_date),t=new Date(n.value.end_date),a=new Date;return o<=t&&o<=a&&t<=a}),p=o=>{const t=Number(o);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(isNaN(t)?0:t)},z=o=>new Intl.NumberFormat("en-US").format(o||0),et=$(()=>{const o=_.value||{};return[{title:"TOTAL GROSS",value:p(o.totalGross),icon:J,color:"text-blue-600",bgColor:"bg-blue-100",description:"Total revenue before deductions"},{title:"TOTAL NETSALES",value:p(o.totalNetsales),icon:mt,color:"text-green-600",bgColor:"bg-green-100",description:"Revenue after all deductions"},{title:"TOTAL DISCOUNT",value:p(o.totalDiscount),icon:J,color:"text-amber-600",bgColor:"bg-amber-100",description:"Sum of all applied discounts"},{title:"TOTAL COST",value:p(o.totalCost),icon:K,color:"text-purple-600",bgColor:"bg-purple-100",description:"Aggregate cost of goods sold"},{title:"TOTAL VAT",value:p(o.totalVat),icon:X,color:"text-pink-600",bgColor:"bg-pink-100",description:"Value Added Tax collected"},{title:"VATABLE SALES",value:p(o.totalVatableSales),icon:vt,color:"text-indigo-600",bgColor:"bg-indigo-100",description:"Sales subject to VAT"},{title:"TOTAL TRANSACTIONS",value:z(o.totalTransactions),icon:X,color:"text-emerald-600",bgColor:"bg-emerald-100",description:"Total number of sales transactions"},{title:"RECEIVED DELIVERIES",value:z(o.totalReceivedDeliveries),icon:K,color:"text-orange-600",bgColor:"bg-orange-100",description:"Total number of received deliveries"}]}),ot=()=>{var l;if(!S.value)return;const o=S.value.getContext("2d");M&&M.destroy();const t=((l=_.value)==null?void 0:l.paymentBreakdown)||{},a=Object.keys(t).map(s=>{const c=t[s],r=s.replace(/([A-Z])/g," $1").trim(),y=p(c);return`${r} (${y})`}),i=Object.values(t).map(s=>Number(s)||0);M=new h(o,{type:"pie",data:{labels:a,datasets:[{data:i,backgroundColor:["#3B82F6","#10B981","#F43F5E","#6366F1","#8B5CF6","#EC4899","#F97316"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:function(s){const c=s.dataset.data.reduce((j,st)=>j+st,0),r=s.parsed,y=(r/c*100).toFixed(2);return`${s.label}: ${r.toFixed(2)} (${y}%)`}}}}}})},L=async()=>{var o,t;try{const i={start_date:n.value.start_date||"2000-01-01",end_date:n.value.end_date,stores:u.value.map(r=>r.NAME||(typeof r=="object"?r.NAME:r))},l=await g.post(route("get.top.bottom.products"),i),s=Array.isArray((o=l==null?void 0:l.data)==null?void 0:o.topProducts)?l.data.topProducts:[],c=Array.isArray((t=l==null?void 0:l.data)==null?void 0:t.bottomProducts)?l.data.bottomProducts:[];B(s,c)}catch(a){console.error("Error fetching top/bottom products:",a),B([],[])}},B=(o,t)=>{if(!T.value)return;const a=T.value.getContext("2d");D&&D.destroy();const i=o.slice(0,10).map(r=>r.itemname),l=t.slice(0,10).map(r=>r.itemname),s=o.slice(0,10).map(r=>r.total_quantity),c=t.slice(0,10).map(r=>r.total_quantity);D=new h(a,{type:"bar",data:{labels:[...i,...l],datasets:[{label:"Top 10 Products (Quantity)",data:s,backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Bottom 10 Products (Quantity)",data:[...Array(10).fill(0),...c],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(r){const y=r.parsed.y;return`${r.dataset.label}: ${y.toFixed(2)}`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Quantity Sold"}}}}})},O=async()=>{try{console.log("Selected Stores:",u.value);const o={start_date:n.value.start_date||"2000-01-01",end_date:n.value.end_date,stores:u.value.map(a=>typeof a=="object"?a.NAME:a)};console.log("Payload for metrics:",o);const t=await g.post(route("get.metrics"),o);console.log("Metrics response:",t.data),_.value=t.data||P.initialMetrics,ot()}catch(o){console.error("Error fetching metrics:",o)}},I=async()=>{try{const o={start_date:n.value.start_date||"2000-01-01",end_date:n.value.end_date,stores:u.value.map(a=>typeof a=="object"?a.NAME:a)},t=await g.post(route("get.monthly.sales"),o);at(t.data)}catch(o){console.error("Error fetching monthly sales:",o)}},at=o=>{if(!C.value)return;const t=C.value.getContext("2d");k&&k.destroy();const a=o.map(l=>l.label),i=o.map(l=>l.total_sales);k=new h(t,{type:"line",data:{labels:a,datasets:[{label:"Monthly Sales",data:i,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.1,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(l){return p(l.parsed.y)}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Sales Amount"},ticks:{callback:function(l){return p(l)}}}}}})},F=async()=>{try{const o={start_date:n.value.start_date||"2000-01-01",end_date:n.value.end_date,stores:u.value.map(i=>typeof i=="object"?i.NAME:i)},t=await g.post(route("get.top.wastes"),o),a=Array.isArray(t==null?void 0:t.data)?t.data:[];W(a)}catch(o){console.error("Error fetching top wastes:",o),W([])}},W=o=>{if(!R.value)return;const t=R.value.getContext("2d");A&&A.destroy();const a=o.slice(0,10).map(s=>s.itemname||s.ITEMID),i=o.slice(0,10).map(s=>Math.abs(Number(s.ADJUSTMENT||0))),l=o.slice(0,10).map(s=>Math.abs(Number(s.SALESAMOUNT||0)));A=new h(t,{type:"bar",data:{labels:a,datasets:[{label:"Waste Quantity",data:i,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1},{label:"Waste Cost",data:l,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(s){const c=s.parsed.y;return`${s.dataset.label}: ${s.dataset.label==="Waste Cost"?p(c):c.toFixed(2)}`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Waste Quantity / Cost"},ticks:{callback:function(s,c,r){return this.getLabelForValue(s)}}}}}})};return lt([()=>n.value.start_date,()=>n.value.end_date,()=>JSON.stringify(u.value)],()=>{tt.value?(v.value="",O(),L(),I(),F()):v.value="Invalid date range. Please check your selections."}),rt(()=>{Y(),O(),L(),I(),F()}),(o,t)=>(b(),U(pt,{"active-tab":"DASHBOARD"},{main:Q(()=>[e("div",yt,[t[16]||(t[16]=e("div",{class:"absolute inset-0 opacity-10 bg-pattern z-0"},null,-1)),e("div",xt,[e("div",ht,[e("div",wt,[e("div",_t,[e("h1",Ct," Welcome back, "+m(w.username)+"! ðŸ‘‹ ",1),e("div",kt,[e("div",At,[t[3]||(t[3]=e("label",{class:"text-sm font-medium text-gray-600 mb-1"},"Start Date",-1)),H(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=a=>n.value.start_date=a),class:x(["border-2 border-blue-200 rounded-xl px-4 py-2 focus:ring-4 focus:ring-blue-300/50 transition-all duration-300",{"border-red-500":v.value}])},null,2),[[q,n.value.start_date]])]),e("div",St,[t[4]||(t[4]=e("label",{class:"text-sm font-medium text-gray-600 mb-1"},"End Date",-1)),H(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=a=>n.value.end_date=a),class:x(["border-2 border-blue-200 rounded-xl px-4 py-2 focus:ring-4 focus:ring-blue-300/50 transition-all duration-300",{"border-red-500":v.value}])},null,2),[[q,n.value.end_date]])])])]),v.value?(b(),f("div",Tt,[t[5]||(t[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("span",null,m(v.value),1)])):nt("",!0)]),e("div",Mt,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Stores",-1)),N(gt,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=a=>u.value=a),options:V.value,multiple:!0,class:"w-full md:w-64"},null,8,["modelValue","options"])])])]),e("div",Dt,[N(ct,{"enter-active-class":"transition-all duration-700 ease-out","enter-from-class":"opacity-0 translate-y-10","enter-to-class":"opacity-100 translate-y-0"},{default:Q(()=>[(b(!0),f(Z,null,G(et.value,(a,i)=>(b(),f("div",{key:a.title,class:"transform transition-all duration-300 hover:-translate-y-2 hover:scale-105 metric-card"},[e("div",Nt,[e("div",{class:"absolute inset-0 opacity-20 group-hover:opacity-30 transition-all duration-300",style:it({background:`linear-gradient(135deg, ${a.color}, transparent)`})},null,4),e("div",Et,[e("div",{class:x([a.bgColor,"p-3 rounded-xl shadow-md transform transition-all group-hover:rotate-12"])},[(b(),U(dt(a.icon),{class:x([a.color,"w-7 h-7"])},null,8,["class"]))],2)]),e("div",Pt,[e("p",Rt,m(a.title),1),e("p",{class:x([a.color,"text-3xl font-bold"])},m(a.value),3),e("p",Vt,m(a.description),1)]),t[7]||(t[7]=e("div",{class:"absolute top-0 left-0 w-24 h-24 bg-opacity-20 rounded-full bg-blue-300 opacity-0 group-hover:opacity-100 transition-all duration-300"},null,-1))])]))),128))]),_:1})]),e("div",zt,[e("div",Lt,[t[8]||(t[8]=e("div",{class:"absolute inset-0 opacity-10 bg-blue-100"},null,-1)),t[9]||(t[9]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a.5.5 0 11-1 0 .5.5 0 011 0zm4 5a.5.5 0 11-1 0 .5.5 0 011 0z"})]),E(" Payment Methods Distribution ")],-1)),e("div",Bt,[e("canvas",{ref_key:"chartRef",ref:S,class:"w-full h-full"},null,512)])]),e("div",Ot,[t[10]||(t[10]=e("div",{class:"absolute inset-0 opacity-10 bg-green-100"},null,-1)),t[11]||(t[11]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})]),E(" Recent Announcements ")],-1)),e("div",It,[w.announcements.length?(b(!0),f(Z,{key:0},G(w.announcements,(a,i)=>(b(),f("div",{key:i,class:"bg-white/60 p-4 rounded-xl border border-blue-100 mb-4 hover:border-blue-300 transition-all duration-300 hover:shadow-lg"},[e("h4",Ft,m(a.title),1),e("p",Wt,m(a.description),1)]))),128)):(b(),f("p",jt," No announcements available "))])])]),e("div",$t,[t[12]||(t[12]=e("div",{class:"absolute inset-0 opacity-10 bg-purple-100"},null,-1)),t[13]||(t[13]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),E(" Popular Products & Products Under Monitoring ")],-1)),e("div",Ut,[e("canvas",{ref_key:"topBottomProductsRef",ref:T,class:"w-full h-full"},null,512)])]),e("div",Qt,[e("div",Ht,[t[14]||(t[14]=e("div",{class:"absolute inset-0 opacity-10 bg-teal-100"},null,-1)),t[15]||(t[15]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"}," Monthly Sales Trend ",-1)),e("div",qt,[e("canvas",{ref_key:"monthlySalesRef",ref:C,class:"w-full h-full"},null,512)])]),N(ft,{selectedDateRange:n.value,selectedStores:u.value},null,8,["selectedDateRange","selectedStores"])])])]),_:1}))}},ce=bt(Gt,[["__scopeId","data-v-782df76c"]]);export{ce as default};
