import{d as n,q as A,k as U,E as L,c as V,w as $,o,a as e,j as p,s as T,e as i,h as f,t as a,F as m,v as B,n as N,b as g,K as q}from"./app-BoaMMdkU.js";import{S as H,a as K,_ as Q,C as Z}from"./SwipeRight-BI8Bs9Z-.js";import"./carousel.es-B9yNKmlO.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as G}from"./Main-BbjkEZ83.js";import{C as J}from"./Cart-DpxzoaIf.js";import"./sweetalert2.esm.all-IRYXxR_Z.js";import"./Logout-BJuIbz2k.js";/* empty css                                                             */import"./Modal-5-iMnX7J.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-DFF7VX6Y.js";import"./PartyCake143-BDy8Cxyz.js";import"./Attendance-CU9DKH9f.js";const W={class:"relative w-full h-full"},X={class:"absolute top-0 bottom-0 left-0 w-4/6 lg:w-4/6 p-2"},Y={class:"flex justify-between items-center gap-2"},ee={class:"flex items-center"},te={class:"w-full lg:w-48 xl:w-64 mb-2 lg:mb-0"},se=["value"],le={class:"w-full lg:w-48 xl:w-64 mb-2 lg:mb-0 lg:ml-2"},oe=["value"],ae={class:"input input-bordered flex items-center gap-2 w-3/5 lg:w-2/5"},re={class:"relative px-10 mt-4"},ne={class:"flex overflow-x-auto"},ie={class:"flex flex-nowrap ml-10 text-xs w-[80%] lg:text-sm"},de={class:"flex-none p-2 w-48"},ce=["onClick"],ue={class:"absolute top-[20vh] bottom-0 left-0 w-9/12 ml-[-50px] lg:w-4/6 lg:top-35 px-2"},pe={class:"relative w-full h-full"},fe={class:"left-0 top-5 overflow-y-auto h-[70vh] w-full ml-10 justify-center gap-x-5 gap-y-4 p-2 lg:gap-x-20 lg:ml-20"},me={class:"flex flex-wrap"},ve={class:"font-bold text-base text-nowrap overflow-hidden"},xe=["onClick"],ge={class:"text-xs text-gray-400 font-thin"},we={class:"text-xs text-gray-600 font-bold"},he={class:"text-end text-sm text-gray-600 font-bold"},be={class:"absolute top-0 right-0 h-9 w-9 bg-blue-400 rounded-full flex items-center justify-center"},ye={class:"text-sm text-white"},_e={class:"absolute top-0 bottom-0 right-0 w-2/6 lg:w-2/6"},Ce={class:"relative bg-white border-s border-gray-400 shadow-md shadow-gray-600 w-full h-full lg:w-full lg:h-full max-w-sm lg:max-w-full"},ke={class:"absolute left-0 right-0 top-0 h-10 bg-white text-black flex justify-center items-center text-xl font-bold p-3"},Se={class:"ml-auto flex items-center"},je=["disabled"],Ie={class:"absolute top-7 bottom-12 left-0 right-0 my-2 px-2 overflow-y-auto"},Ae={class:"h-5/6 px-1 py-3"},Te={class:"h-full w-full overflow-y-auto bg-white p-3 top-0 right-0 left-0 m-0"},qe={class:"grid grid-cols-4 text-md font-bold lg:grid-cols-4"},Pe={class:"p-2 flex justify-center"},Oe={class:"inline-flex items-center"},Ee={class:"p-2 flex justify-center"},Me={class:"inline-flex items-center"},De=["value"],Fe={class:"p-2 overflow-hidden"},Re={class:"whitespace-no-wrap"},Ue={class:"p-2 flex justify-center"},Le={class:"font-bold text-xs"},Ve={class:"p-2 flex justify-center"},$e={class:"font-bold text-xs mx-2"},Be={class:"absolute left-0 right-0 bottom-0 h-14 text-white bg-navy flex justify-between items-center border-t border-gray-900 shadow-sm shadow-gray-900"},Ne={class:"flex flex-col justify-start ps-1 tracking-wider"},He={class:"font-extrabold text-lg ml-2"},Ke={class:"skeleton m-5 w-1/3 h-10 bg-blue-900 flex justify-center items-center cursor-pointer font-bold text-white tracking-wider text-xs md:text-sm lg:text-base"},Qe={__name:"Index-3",props:{category:{type:Array,required:!0},items:{type:Array,required:!0},ar:{type:Array,required:!0},customers:{type:Array,required:!0},windowId:{type:String,required:!0},windowDesc:{type:String,required:!0}},setup(v){n("Purchase");const d=n(""),x=n(""),w=n("CASH"),h=n("000000"),C=n(""),c=n([]),k=n(0),r=n([]),u=n(!1);let S;const j=v,P=A(()=>{let l=j.items;if(d.value&&(l=l.filter(t=>t.itemgroup===d.value)),x.value){const t=x.value.toLowerCase();l=l.filter(s=>s.itemname.toLowerCase().includes(t)||s.barcode.toLowerCase().includes(t))}return l.map(t=>({...t,category:t.itemgroup||d.value||""}))}),O=l=>{d.value=l===d.value?null:l},E=async l=>{try{const s=await(await fetch(`/windows/menu/addtocart/${l}/${j.windowId}/${w.value}/${h.value}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();s.success&&(C.value=s.message,b())}catch(t){console.error("Error adding item to cart:",t),C.value="Failed to add item to cart. Please try again."}},b=async()=>{try{const t=await(await fetch("/api/cart")).json();c.value=t.items.map(s=>({...s,total_price:parseFloat(s.total_price),total_qty:parseFloat(s.total_qty)})),y()}catch(l){console.error("Error fetching cart data:",l)}},y=()=>{k.value=c.value.reduce((l,t)=>l+t.total_price,0)},M=async()=>{try{await fetch("/api/cart/clear",{method:"POST"}),c.value=[],r.value=[],u.value=!1,y()}catch(l){console.error("Error clearing cart:",l)}},D=async()=>{if(r.value.length!==0)try{(await fetch("/api/cart/delete-multiple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:r.value})})).ok?(c.value=c.value.filter(t=>!r.value.includes(t.itemname)),r.value=[],u.value=!1,y()):console.error("Failed to delete items")}catch(l){console.error("Error deleting selected items:",l)}},F=()=>{u.value?r.value=c.value.map(l=>l.itemname):r.value=[]},I=l=>typeof l=="number"?l.toFixed(2):"0.00",R=A(()=>I(k.value));return U(()=>{b(),S=setInterval(b,5e3)}),L(()=>{clearInterval(S)}),(l,t)=>(o(),V(G,{"active-tab":"HOME"},{main:$(()=>[e("div",W,[e("div",X,[e("div",Y,[e("div",ee,[e("div",te,[p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>w.value=s),id:"payment-options",class:"block w-full p-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-500"},[t[5]||(t[5]=e("option",{value:"",disabled:""},"Payment Method",-1)),t[6]||(t[6]=e("option",{value:"CASH"},"CASH",-1)),(o(!0),i(m,null,f(v.ar,s=>(o(),i("option",{key:s.ID,value:s.ar},a(s.ar),9,se))),128))],512),[[T,w.value]])]),e("div",le,[p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>h.value=s),id:"customer-options",class:"block w-full p-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-500"},[t[7]||(t[7]=e("option",{value:"",disabled:""},"CUSTOMER",-1)),t[8]||(t[8]=e("option",{value:"000000"},"WALK-IN",-1)),(o(!0),i(m,null,f(v.customers,s=>(o(),i("option",{key:s.ID,value:s.accountnum},a(s.name),9,oe))),128))],512),[[T,h.value]])])]),e("label",ae,[p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.value=s),type:"text",class:"grow text-sm",placeholder:"Barcode / Item"},null,512),[[B,x.value]]),t[9]||(t[9]=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4 opacity-70"},[e("path",{"fill-rule":"evenodd",d:"M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z","clip-rule":"evenodd"})],-1))])]),e("div",re,[e("div",ne,[e("div",ie,[(o(!0),i(m,null,f(v.category,s=>(o(),i("div",{key:s.name},[e("div",de,[e("div",{onClick:_=>O(s.name),class:N([{"bg-blue-500 text-white":d.value===s.name,"bg-gray-200":d.value!==s.name},"flex items-center justify-center rounded-lg p-2 font-bold italic cursor-pointer transition-colors duration-300 h-full"])},a(s.name),11,ce)])]))),128))])]),g(H,{class:"w-6 h-6 absolute left-0 top-1/2 -translate-y-1/2 transform"}),g(K,{class:"w-6 h-6 absolute right-0 top-1/2 transform -translate-y-1/2"})])]),e("div",ue,[e("div",pe,[e("div",fe,[e("div",me,[(o(!0),i(m,null,f(P.value,s=>(o(),i("div",{key:s.itemid,class:"relative flex flex-col justify-center w-[20%] min-h-20 bg-white shadow-md shadow-gray-200 py-4 px-2 rounded-lg cursor-pointer lg:w-2/12 m-2 hover:shadow-lg transition-shadow duration-300"},[e("span",ve,[e("figure",{onClick:_=>E(s.itemid)},t[10]||(t[10]=[e("img",{src:Q,alt:"Product"},null,-1)]),8,xe)]),e("span",ge,a(s.barcode),1),e("span",we,a(s.itemname),1),e("span",he,"Php "+a(s.price)+".00",1),e("span",be,[e("div",ye,a(s.quantity),1)])]))),128))])])])]),e("div",_e,[e("div",Ce,[e("div",ke,[t[11]||(t[11]=e("p",{class:"tracking-widest"},"ORDER | CART",-1)),e("div",Se,[e("button",{onClick:D,class:"mr-2 px-2 py-1 bg-red-500 text-white rounded text-xs",disabled:r.value.length===0}," Delete Selected ",8,je),e("a",{class:"text-xs cursor-pointer",onClick:M},[g(Z,{class:"w-7 h-7"})])])]),e("div",Ie,[e("section",Ae,[e("div",Te,[e("ul",qe,[e("li",Pe,[e("label",Oe,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>u.value=s),onChange:F,class:"form-checkbox h-4 w-4 text-blue-600 rounded-full"},null,544),[[q,u.value]]),t[12]||(t[12]=e("span",{class:"ml-2"},"All",-1))])]),t[13]||(t[13]=e("li",{class:"p-2 flex justify-center"},[e("a",null,"Item")],-1)),t[14]||(t[14]=e("li",{class:"p-2 flex justify-center"},[e("a",null,"Price")],-1)),t[15]||(t[15]=e("li",{class:"p-2 flex justify-center"},[e("a",null,"Qty")],-1)),t[16]||(t[16]=e("li",{class:"w-full col-span-6"},[e("hr")],-1))]),(o(!0),i(m,null,f(c.value,s=>(o(),i("ul",{key:s.itemname,class:"grid grid-cols-4 text-sm lg:grid-cols-4"},[e("li",Ee,[e("label",Me,[p(e("input",{type:"checkbox",value:s.itemname,"onUpdate:modelValue":t[4]||(t[4]=_=>r.value=_),class:"form-checkbox h-4 w-4 text-blue-600 rounded-full"},null,8,De),[[q,r.value]])])]),e("li",Fe,[e("a",Re,a(s.itemname),1)]),e("li",Ue,[e("a",null,[e("span",Le,a(I(s.total_price)),1)])]),e("li",Ve,[e("a",null,[e("span",$e,a(s.total_qty)+" PCS",1)])])]))),128)),t[17]||(t[17]=e("hr",{class:"h-px-10 bg-gray-100"},null,-1))])]),t[18]||(t[18]=e("section",{class:"p-2"},[e("div",{class:"flex text-sm font-bold justify-between items-center px-1"},[e("p",null,"GROSS"),e("p",null,"121.22")]),e("div",{class:"flex text-sm font-bold justify-between items-center px-1"},[e("p",null,"DISCOUNT"),e("p",null,"121.22")]),e("p",{class:"border-b border-b-gray-300 pt-3"})],-1))]),e("div",Be,[e("div",Ne,[t[19]||(t[19]=e("p",{class:"font-thin text-xs text-white ml-2"},"TOTAL",-1)),e("p",He,"PHP "+a(R.value),1)]),e("div",Ke,[g(J,{class:"w-10 p-2 lg:p-1"})])])])])])]),_:1}))}},rt=z(Qe,[["__scopeId","data-v-7d8bbfab"]]);export{rt as default};
