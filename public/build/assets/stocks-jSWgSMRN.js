import{T as M,d as u,q as _,k as $,l as q,o as h,c as k,w as i,a as l,i as B,b as t,u as o,j as W,v as P,e as E,F as oe,h as se,t as Y,f as z,n as R,g as x,G,C as le}from"./app-BoaMMdkU.js";import{M as j}from"./Modal-5-iMnX7J.js";import{_ as A}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-DFF7VX6Y.js";import{_ as L,a as T,b as N}from"./InputError-DS750Wq9.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as re}from"./TableContainer-B85p6F6Z.js";import{_ as ne}from"./AdminPanel-CRYPwC5J.js";import{S as ie}from"./Save-B_j1RjGA.js";import{B as ue}from"./Back-Cz3pmKZo.js";import{A as de}from"./Add-DFqyGLdn.js";import{C as ce}from"./Cart-DpxzoaIf.js";import{P as H,D as me}from"./dataTables-CI4NjUw-.js";import"./RetailGroup-BjeigQ0x.js";import"./Logout-BJuIbz2k.js";/* empty css                                                             */import"./RetailItems-BB1M731N.js";import"./Attendance-CU9DKH9f.js";const pe={class:"grid grid-cols-3 gap-4 h-full"},ge={class:"col-span-3"},fe={class:"col-span-3"},ve={key:0,class:"absolute w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto z-10"},ye=["onMousedown"],be={class:"col-span-3"},we={__name:"Create",props:{showModal:Boolean,JOURNALID:String,items:{type:Array,required:!0}},emits:["toggleActive"],setup(d,{emit:m}){const O=m,c=d,e=M({JOURNALID:"",itemname:"",qty:"",unitid:""}),f=u(""),p=u(!1),I=u(null),a=_(()=>c.items.filter(D=>D.itemname.toLowerCase().includes(f.value.toLowerCase())));function r(D){I.value=D,f.value=D.itemname,e.itemname=D.itemid,p.value=!1}function b(){setTimeout(()=>{p.value=!1},100)}const C=()=>{e.post("/ItemOrders",{preserveScroll:!0,onSuccess:()=>{e.reset(),location.reload()}})},S=()=>{O("toggleActive")};return $(()=>{e.JOURNALID=c.JOURNALID,q(()=>c.JOURNALID,D=>{e.JOURNALID=D})}),(D,v)=>(h(),k(j,{title:"ORDER ENTRIES",onToggleActive:S,"show-modal":d.showModal},{content:i(()=>[l("form",{onSubmit:B(C,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[l("div",pe,[l("div",ge,[t(L,{for:"JOURNALID",value:"JOURNALID"}),t(T,{id:"JOURNALID",modelValue:o(e).JOURNALID,"onUpdate:modelValue":v[0]||(v[0]=y=>o(e).JOURNALID=y),type:"text",class:"mt-1 block w-full input","is-error":!!o(e).errors.JOURNALID,autofocus:"",disabled:""},null,8,["modelValue","is-error"]),t(N,{message:o(e).errors.JOURNALID,class:"mt-2"},null,8,["message"])]),l("div",fe,[t(L,{for:"itemname",value:"ITEMNAME"}),W(l("input",{type:"text","onUpdate:modelValue":v[1]||(v[1]=y=>f.value=y),onFocus:v[2]||(v[2]=y=>p.value=!0),onBlur:b,placeholder:"Search items...",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[P,f.value]]),p.value?(h(),E("div",ve,[(h(!0),E(oe,null,se(a.value,y=>(h(),E("div",{key:y.itemid,onMousedown:F=>r(y),class:"px-4 py-2 cursor-pointer hover:bg-gray-100"},Y(y.itemname),41,ye))),128))])):z("",!0),t(N,{message:o(e).errors.itemname,class:"mt-2"},null,8,["message"])]),l("div",be,[t(L,{for:"qty",value:"QTY"}),t(T,{id:"qty",modelValue:o(e).qty,"onUpdate:modelValue":v[3]||(v[3]=y=>o(e).qty=y),type:"number",class:"mt-1 block w-full",required:"",autocomplete:"qty"},null,8,["modelValue"]),t(N,{message:o(e).errors.qty,class:"mt-2"},null,8,["message"])])])],32)]),buttons:i(()=>[t(A,{type:"submit",onClick:C,disabled:o(e).processing,class:R({"opacity-25":o(e).processing})},{default:i(()=>v[4]||(v[4]=[x(" SUBMIT ")])),_:1},8,["disabled","class"])]),_:1},8,["show-modal"]))}},De=ae(we,[["__scopeId","data-v-9246721d"]]),Ie={class:"grid grid-cols-3 gap-4 h-full"},Ae={class:"col-span-3"},he={__name:"GetBWP",props:{showModal:Boolean,inventjournaltransrepos:{type:Array,required:!1},JOURNALID:String,items:{type:Array,required:!0}},emits:["toggleActive"],setup(d,{emit:m}){const O=m,c=d,e=M({JOURNALID:"",itemname:"",qty:"",unitid:""}),f=u("");u(!1),u(null),_(()=>c.items.filter(a=>a.itemname.toLowerCase().includes(f.value.toLowerCase())));const p=()=>{console.log("Submitting form..."),e.patch("/Dispatch/getbwproducts",{preserveScroll:!0,onSuccess:()=>{console.log("Form submission successful."),I()},onError:a=>{console.error("Form submission error:",a)}})},I=()=>{O("toggleActive")};return $(()=>{e.JOURNALID=c.JOURNALID,q(()=>c.JOURNALID,a=>{e.JOURNALID=a})}),(a,r)=>(h(),k(j,{title:"GET BW PRODUCTS",onToggleActive:I,"show-modal":d.showModal},{content:i(()=>[l("form",{onSubmit:B(p,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[l("div",Ie,[l("div",Ae,[t(L,{for:"INFO",value:"Generate ID NO: "}),t(T,{id:"JOURNALID",modelValue:o(e).JOURNALID,"onUpdate:modelValue":r[0]||(r[0]=b=>o(e).JOURNALID=b),type:"text",class:"mt-1 block w-full input","is-error":!!o(e).errors.JOURNALID,autofocus:"",disabled:""},null,8,["modelValue","is-error"]),t(N,{message:o(e).errors.JOURNALID,class:"mt-2"},null,8,["message"])])])],32)]),buttons:i(()=>[t(A,{type:"submit",onClick:p,disabled:o(e).processing,class:R({"opacity-25":o(e).processing})},{default:i(()=>r[1]||(r[1]=[x(" GET ITEMS ")])),_:1},8,["disabled","class"])]),_:1},8,["show-modal"]))}},Oe={class:"grid grid-cols-3 gap-4 h-full"},Ne={class:"col-span-3"},Ue={class:"col-span-3"},Le={class:"relative"},Re=["placeholder"],xe={__name:"CopyFrom",props:{showModal:Boolean,inventjournaltransrepos:{type:Array,required:!1},JOURNALID:String,items:{type:Array,required:!0}},emits:["toggleActive"],setup(d,{emit:m}){const O=m,c=d,e=M({JOURNALID:"",itemname:"",qty:"",unitid:"",EndDate:""}),f=u("");u(!1),u(null),_(()=>c.items.filter(a=>a.itemname.toLowerCase().includes(f.value.toLowerCase())));const p=()=>{console.log("Submitting form..."),e.patch("/ItemOrders/getbwproducts",{preserveScroll:!0,onSuccess:()=>{console.log("Form submission successful."),I()},onError:a=>{console.error("Form submission error:",a)}})},I=()=>{O("toggleActive")};return $(()=>{e.JOURNALID=c.JOURNALID,q(()=>c.JOURNALID,a=>{e.JOURNALID=a})}),(a,r)=>(h(),k(j,{title:"GET BW PRODUCTS",onToggleActive:I,"show-modal":d.showModal},{content:i(()=>[l("form",{onSubmit:B(p,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[l("div",Oe,[l("div",Ne,[t(L,{for:"INFO",value:"Generate ID NO:"}),t(T,{id:"JOURNALID",modelValue:o(e).JOURNALID,"onUpdate:modelValue":r[0]||(r[0]=b=>o(e).JOURNALID=b),type:"text",class:"mt-1 block w-full input","is-error":!!o(e).errors.JOURNALID,autofocus:"",disabled:""},null,8,["modelValue","is-error"]),t(N,{message:o(e).errors.JOURNALID,class:"mt-2"},null,8,["message"])]),l("div",Ue,[l("div",Le,[r[3]||(r[3]=l("div",{class:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"},[l("svg",{class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[l("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])],-1)),W(l("input",{id:"EndDate",type:"date","onUpdate:modelValue":r[1]||(r[1]=b=>o(e).EndDate=b),onInput:r[2]||(r[2]=(...b)=>a.formattedDate2&&a.formattedDate2(...b)),placeholder:a.formattedDate2,class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,40,Re),[[P,o(e).EndDate]]),t(N,{message:o(e).errors.EndDate,class:"mt-2"},null,8,["message"])])])])],32)]),buttons:i(()=>[t(A,{type:"submit",onClick:p,disabled:o(e).processing,class:R({"opacity-25":o(e).processing})},{default:i(()=>r[4]||(r[4]=[x(" GET ITEMS ")])),_:1},8,["disabled","class"])]),_:1},8,["show-modal"]))}},Ce={class:"flex justify-start items-center"},Ye={__name:"stocks",props:{inventjournaltrans:{type:Array,required:!0},journalid:{type:[String,Number],required:!0},items:{type:Array,required:!0}},setup(d){H.use(me);const m=u("");u("");const O=u(""),c=u(!1),e=u(!1),f=u(!1),p=d,I=[{data:"ITEMID",title:"ITEMID"},{data:"itemname",title:"ITEMNAME"},{data:"itemgroup",title:"CATEGORY"},{data:"COUNTED",title:"COUNTED",render:function(n,s,w){return s==="display"?`<input type="number" class="counted-input form-input block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" value="${Number(n).toFixed(0)}" min="0" step="1">`:n}}],a={paging:!1,scrollX:!0,scrollY:"70vh",scrollCollapse:!0,drawCallback:function(n){this.api().rows().every(function(){const w=this.data(),J=this.node().querySelector(".counted-input");J&&J.addEventListener("change",te=>X(te,w))})}},r=(n,s)=>{m.value=n,O.value=s,f.value=!0,console.log(m.value)},b=n=>{m.value=n,e.value=!0,console.log(m.value)},C=()=>{f.value=!1},S=()=>{e.value=!1},D=()=>{c.value=!1};M({StartDate:"",EndDate:""});const v=()=>{window.location.href="/managefg"},y=n=>{window.location.href=`/ViewOrders/${n}`},F=n=>{console.log("Selected Item:",n)},Q=u([]),U=G({}),g=G({text:"",type:""}),X=(n,s)=>{const w=n.target.value;U[s.ITEMID]=w},K=async()=>{try{if(g.text="Updating counted values...",g.type="info",(await le.post("/api/dispatch/update-all-counted-values",{journalId:p.journalid,updatedValues:U})).data.success){console.log("All values updated successfully");for(const[s,w]of Object.entries(U)){const V=Q.value.find(J=>J.ITEMID===s);V&&(V.COUNTED=w)}Object.keys(U).forEach(s=>delete U[s]),g.text="All counted values updated successfully",g.type="success",location.reload()}else throw new Error("Update failed")}catch(n){console.error("You don't have any changes!",n),g.text="You don't have any changes!",g.type="error"}Z()},Z=()=>{setTimeout(()=>{g.text="",g.type=""},5e3)},ee=n=>{window.location.href=`/warehouse/orders/${n}`};return(n,s)=>(h(),k(ne,{"active-tab":"ORDER"},{modals:i(()=>[t(De,{"show-modal":f.value,JOURNALID:m.value,items:p.items,onToggleActive:C,onSelectItem:F},null,8,["show-modal","JOURNALID","items"]),t(he,{"show-modal":e.value,JOURNALID:m.value,onToggleActive:S},null,8,["show-modal","JOURNALID"]),t(xe,{"show-modal":c.value,JOURNALID:m.value,onToggleActive:D},null,8,["show-modal","JOURNALID"])]),main:i(()=>[t(re,null,{default:i(()=>[g.text?(h(),E("div",{key:0,class:R(["p-4 mb-4 rounded-md",g.type==="success"?"bg-green-100 text-green-700":g.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},Y(g.text),3)):z("",!0),l("div",{class:R(["absolute adjust",{"mt-20":g.text}])},[l("div",Ce,[t(A,{type:"button",onClick:v,class:"m-1 ml-2 bg-navy p-10"},{default:i(()=>[t(ue,{class:"h-5"})]),_:1}),t(A,{type:"button",onClick:s[0]||(s[0]=w=>r(d.journalid)),class:"m-6 bg-navy"},{default:i(()=>[t(de,{class:"h-5"})]),_:1}),t(A,{type:"button",onClick:s[1]||(s[1]=w=>b(d.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:i(()=>s[4]||(s[4]=[x(" GENERATE ")])),_:1}),t(A,{type:"button",onClick:K,class:"m-1 ml-2 bg-navy p-10"},{default:i(()=>[t(ie,{class:"h-5"})]),_:1}),t(A,{type:"button",onClick:s[2]||(s[2]=w=>y(d.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:i(()=>[t(ce,{class:"h-5"})]),_:1}),t(A,{type:"button",onClick:s[3]||(s[3]=w=>ee(d.journalid)),class:"m-1 bg-red-900"},{default:i(()=>s[5]||(s[5]=[x(" OLDCOM (TEMP) ")])),_:1})])],2),t(o(H),{data:d.inventjournaltrans,columns:I,class:"w-full relative display",options:a},{action:i(w=>s[6]||(s[6]=[l("label",{class:"inline-flex items-center"},[l("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600 rounded-full"}),l("span",{class:"ml-2 text-gray-700"})],-1)])),_:1},8,["data"])]),_:1})]),_:1}))}};export{Ye as default};
