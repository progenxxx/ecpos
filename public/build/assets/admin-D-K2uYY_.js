import{d as n,l as U,A as ve,k as it,o as i,e as d,a as e,f as C,n as V,m as Re,F,h as Q,t as m,i as be,j as q,v as me,D as w,s as Ne,G as St,b as Be,w as At,g as T,c as Tt,C as Dt,x as $e,u as rt}from"./app-CfytZ6uy.js";import{C as S,r as Mt}from"./chart-8SaNzrGi.js";import{_ as Lt}from"./AdminPanel-CL6jLfvg.js";import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as nt,I as Pt,r as zt,R as Rt,P as Nt}from"./CubeIcon-DMQCRiyb.js";import{_ as Bt}from"./MultiSelectDropdown-De5Gxnbp.js";/* empty css                                                                        */import"./RetailGroup-2HMR2ftQ.js";import"./Logout-z3St95b0.js";/* empty css                                                             */import"./Modal-BPjbBi2X.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-B1wW2mpq.js";import"./RetailItems-DVr2J4Jb.js";/* empty css                                                                */import"./Attendance-DXy5Tht_.js";const $t={class:"fixed bottom-6 right-6 z-50"},jt={key:0,class:"relative"},Vt={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold"},Et={key:1,class:"bg-white rounded-lg shadow-2xl w-96 h-[500px] flex flex-col border border-gray-200 overflow-hidden"},Ft={key:0,class:"text-center text-gray-500 text-sm"},Ot={class:"text-left"},It={class:"space-y-1"},Wt=["onClick"],Ht={class:"text-sm whitespace-pre-wrap"},Ut={class:"text-xs opacity-70 mt-1 block"},qt={key:1,class:"flex justify-start"},Qt={class:"p-4 bg-white border-t"},Zt=["disabled"],Gt=["disabled"],Jt={key:0,class:"mt-2 flex space-x-1 overflow-x-auto"},Kt=["onClick"],Xt={__name:"FloatingChatBot",setup(Y){const L=n(!1),k=n([]),A=n(""),N=n(!1),B=n(!1),Z=n([]),$=n(null),ee=["Today's sales summary","Top performing items","Sales improvement tips","Store performance"],te=async()=>{L.value=!0,B.value=!1,k.value.length===0&&(await ae(),await oe()),await ve(),E()},se=()=>{L.value=!1},ae=async()=>{try{const f=await w.get(route("chatbot.welcome"));f.data.success&&k.value.push({type:"bot",content:f.data.message,timestamp:new Date})}catch(f){console.error("Failed to load welcome message:",f)}},oe=async()=>{try{const f=await w.get(route("chatbot.sample.questions"));f.data.success&&(Z.value=f.data.questions)}catch(f){console.error("Failed to load sample questions:",f)}},G=async()=>{if(!A.value.trim())return;const f=A.value.trim();A.value="",k.value.push({type:"user",content:f,timestamp:new Date}),await ve(),E(),N.value=!0;try{const p=await w.post(route("chatbot.send.message"),{message:f});await new Promise(y=>setTimeout(y,1e3)),p.data.success&&p.data.response?k.value.push({type:"bot",content:p.data.response,timestamp:new Date}):k.value.push({type:"bot",content:p.data.message||"Sorry, I encountered an issue. Please try again.",timestamp:new Date})}catch(p){console.error("Failed to send message:",p),k.value.push({type:"bot",content:"Sorry, I'm having trouble connecting. Please check your internet connection and try again.",timestamp:new Date})}finally{N.value=!1,await ve(),E()}},J=f=>{A.value=f,G()},E=()=>{$.value&&($.value.scrollTop=$.value.scrollHeight)},le=f=>new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return U(k,()=>{ve(()=>{E(),!L.value&&k.value.length>0&&(B.value=!0)})},{deep:!0}),it(()=>{setTimeout(()=>{!L.value&&k.value.length===0&&(B.value=!0)},5e3)}),(f,p)=>(i(),d("div",$t,[L.value?C("",!0):(i(),d("div",jt,[e("button",{onClick:te,class:V(["bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 group",{"animate-pulse":B.value}])},[p[1]||(p[1]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.955 8.955 0 01-2.15-.26l-4.244 1.082a1 1 0 01-1.288-1.288l1.082-4.244A8.955 8.955 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})],-1)),B.value?(i(),d("div",Vt," ! ")):C("",!0)],2),p[2]||(p[2]=e("div",{class:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap"}," AI Sales Assistant ",-1))])),L.value?(i(),d("div",Et,[e("div",{class:"bg-blue-600 text-white px-4 py-3 flex items-center justify-between"},[p[4]||(p[4]=Re('<div class="flex items-center space-x-2" data-v-e65fb064><div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center" data-v-e65fb064><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e65fb064><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-e65fb064></path></svg></div><div data-v-e65fb064><h3 class="font-semibold text-sm" data-v-e65fb064>AI Sales Assistant</h3><p class="text-xs text-blue-100" data-v-e65fb064>Online</p></div></div>',1)),e("button",{onClick:se,class:"text-blue-100 hover:text-white transition-colors duration-200"},p[3]||(p[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",{ref_key:"messagesContainer",ref:$,class:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50"},[k.value.length===0?(i(),d("div",Ft,[p[6]||(p[6]=Re('<div class="mb-4" data-v-e65fb064><div class="w-16 h-16 bg-blue-100 rounded-full mx-auto flex items-center justify-center mb-2" data-v-e65fb064><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e65fb064><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-e65fb064></path></svg></div><p class="font-medium text-gray-700" data-v-e65fb064>Welcome to your AI Sales Assistant!</p><p class="text-xs text-gray-500 mt-1" data-v-e65fb064>Ask me about your sales performance, strategies, and insights.</p></div>',1)),e("div",Ot,[p[5]||(p[5]=e("p",{class:"text-xs font-medium text-gray-600 mb-2"},"Try asking:",-1)),e("div",It,[(i(!0),d(F,null,Q(Z.value.slice(0,3),y=>(i(),d("button",{key:y,onClick:O=>J(y),class:"block w-full text-left px-3 py-2 bg-white rounded border text-xs hover:bg-blue-50 hover:border-blue-300 transition-colors duration-200"},' "'+m(y)+'" ',9,Wt))),128))])])])):C("",!0),(i(!0),d(F,null,Q(k.value,(y,O)=>(i(),d("div",{key:O,class:V(y.type==="user"?"flex justify-end":"flex justify-start")},[e("div",{class:V([y.type==="user"?"bg-blue-600 text-white rounded-l-lg rounded-tr-lg":"bg-white text-gray-800 rounded-r-lg rounded-tl-lg border","max-w-[80%] px-3 py-2 shadow-sm"])},[e("p",Ht,m(y.content),1),e("span",Ut,m(le(y.timestamp)),1)],2)],2))),128)),N.value?(i(),d("div",qt,p[7]||(p[7]=[Re('<div class="bg-white text-gray-800 rounded-r-lg rounded-tl-lg border px-3 py-2 shadow-sm" data-v-e65fb064><div class="flex space-x-1" data-v-e65fb064><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" data-v-e65fb064></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-e65fb064></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-e65fb064></div></div></div>',1)]))):C("",!0)],512),e("div",Qt,[e("form",{onSubmit:be(G,["prevent"]),class:"flex space-x-2"},[q(e("input",{"onUpdate:modelValue":p[0]||(p[0]=y=>A.value=y),disabled:N.value,type:"text",placeholder:"Ask about sales, strategies, insights...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",maxlength:"1000"},null,8,Zt),[[me,A.value]]),e("button",{type:"submit",disabled:!A.value.trim()||N.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-3 py-2 rounded-lg transition-colors duration-200"},p[8]||(p[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)]),8,Gt)],32),k.value.length>0?(i(),d("div",Jt,[(i(),d(F,null,Q(ee,y=>e("button",{key:y,onClick:O=>J(y),class:"flex-shrink-0 text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200"},m(y),9,Kt)),64))])):C("",!0)])])):C("",!0)]))}},Yt=dt(Xt,[["__scopeId","data-v-e65fb064"]]),es={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6 space-y-6 relative overflow-hidden"},ts={class:"relative z-10 bg-white/80 rounded-3xl shadow-2xl border border-blue-100/50 p-6 transform transition-all duration-500 hover:scale-[1.02]"},ss={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},as={class:"flex flex-col w-full md:w-auto"},os={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between w-full gap-4"},ls={class:"text-2xl sm:text-3xl font-bold text-gray-800 mb-1"},rs={class:"text-blue-600"},ns={class:"flex flex-wrap items-center gap-2 sm:gap-3"},is={class:"flex flex-col"},ds={class:"flex flex-col"},cs={key:0,class:"text-red-500 text-xs mt-2 flex items-center gap-1"},us={class:"w-full lg:w-auto"},gs={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"},ps={key:0,class:"absolute inset-0 bg-white/90 backdrop-blur-sm z-20 flex items-center justify-center rounded-xl"},vs={class:"flex items-start justify-between mb-3"},bs={class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},ms={class:"text-xl md:text-2xl font-bold text-gray-800 mb-1"},fs={class:"text-xs text-gray-400"},ys={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6"},hs={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 hover:shadow-md transition-shadow duration-200 relative"},xs={key:0,class:"absolute inset-0 bg-white/90 backdrop-blur-sm z-30 flex items-center justify-center rounded-xl"},ws={class:"h-[300px] md:h-[400px]"},ks={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 hover:shadow-md transition-shadow duration-200"},_s={class:"max-h-[300px] md:max-h-[400px] overflow-y-auto space-y-3"},Cs={class:"font-semibold text-gray-800 text-sm mb-1"},Ss={class:"text-gray-600 text-xs md:text-sm"},As={key:1,class:"text-gray-400 text-center py-8 text-sm"},Ts={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 hover:shadow-md transition-shadow duration-200"},Ds={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-3"},Ms={class:"flex items-center space-x-3"},Ls={class:"h-[500px] relative"},Ps={key:0,class:"absolute inset-0 bg-white/90 backdrop-blur-sm z-30 flex items-center justify-center rounded-xl"},zs={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Rs={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},Ns={class:"h-[400px] relative"},Bs={key:0,class:"absolute inset-0 bg-white/90 backdrop-blur-sm z-30 flex items-center justify-center rounded-xl"},$s={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},js={class:"h-[400px] relative"},Vs={key:0,class:"absolute inset-0 bg-white/90 backdrop-blur-sm z-30 flex items-center justify-center rounded-xl"},Es={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},Fs={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 relative z-10"},Os={class:"flex items-center space-x-3"},Is={class:"w-80"},Ws={class:"block truncate text-gray-700"},Hs={key:0,class:"text-gray-500"},Us={key:1},qs={key:2},Qs={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},Zs={key:0,class:"absolute z-[9999] mt-1 w-full bg-white shadow-2xl border border-gray-300 rounded-lg overflow-hidden",style:{"background-color":"white !important"}},Gs={class:"p-3 border-b border-gray-200 bg-white",style:{"background-color":"white !important"}},Js={class:"max-h-80 overflow-y-auto bg-white",style:{"background-color":"white !important"}},Ks={class:"border-b border-gray-100 bg-white",style:{"background-color":"white !important"}},Xs=["checked","indeterminate"],Ys={class:"ml-3 font-medium text-gray-900"},ea=["onClick"],ta=["checked"],sa={class:"ml-3 flex-1"},aa={class:"text-sm font-medium text-gray-900"},oa={class:"text-xs text-gray-500"},la={key:0,class:"px-4 py-8 text-center text-gray-500"},ra={key:0,class:"text-xs text-gray-500 mt-1"},na={key:1,class:"text-xs text-gray-500 mt-1"},ia={key:0,class:"text-blue-600"},da={class:"h-[400px] relative z-0"},ca={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ua={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},ga={class:"h-[400px] relative z-10"},pa={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},va={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 relative z-10"},ba={class:"flex items-center space-x-3"},ma={class:"h-[400px] relative z-10"},fa={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},ya={class:"h-[500px] relative z-10"},ha={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},xa={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},wa={class:"h-[400px] relative z-10"},ka={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},_a={class:"flex justify-between items-start mb-6 relative z-10"},Ca={class:"w-80"},Sa={class:"block truncate text-gray-700"},Aa={key:0,class:"text-gray-500"},Ta={key:1},Da={key:2},Ma={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},La={key:0,class:"absolute z-20 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"},Pa={class:"border-b border-gray-200"},za=["checked","indeterminate"],Ra=["onClick"],Na=["checked"],Ba={class:"ml-2 text-gray-900"},$a={key:0,class:"text-xs text-gray-500 mt-1"},ja={key:1,class:"text-xs text-gray-500 mt-1"},Va={key:0,class:"text-orange-600"},Ea={class:"h-[400px] relative z-10"},Fa={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},Oa={class:"h-[400px] relative z-10"},Ia={__name:"admin",props:{username:{type:String,default:"User"},announcements:{type:Array,required:!0},metrics:{type:Object,required:!0,default:()=>({totalGross:0,totalNetsales:0,totalDiscount:0,totalCost:0,totalVat:0,totalVatableSales:0,paymentBreakdown:{cash:0,gcash:0,paymaya:0,card:0,loyaltyCard:0,foodPanda:0,grabFood:0}})}},setup(Y){S.register(...Mt),w.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content");const L=Y,k=n(L.metrics),A=n(""),N=n(null);let B=null;const Z=n(null);let $=null;n(null),n(null);const ee=n(null);let te=null;const se=n(null);let ae=null;const oe=n(null);let G=null;const J=n(null);let E=null;const le=n(null);let f=null;const p=n(null);let y=null;const O=n(null);let fe=null;const je=n([]),_=n([]),re=n([]),b=n([]),j=n([]),x=n([]),ne=n(!1),ye=n(null),ie=n(!1),he=n(null),K=n(""),ct=async()=>{try{const a=await w.get(route("get.stores"));je.value=a.data,_.value=a.data}catch(a){console.error("Error fetching stores:",a)}},ut=async(a="")=>{try{console.log("Fetching products with search term:",a);const t=await w.get(route("get.products"),{params:{search:a}});console.log("Products loaded:",t.data.length),re.value=t.data}catch(t){console.error("Error fetching products:",t),t.response&&console.error("Products error response:",t.response.data)}},gt=async(a="")=>{try{console.log("Fetching categories...");const t=await w.get(route("get.categories"),{params:{search:a}});console.log("Categories response:",t.data),j.value=t.data}catch(t){console.error("Error fetching categories:",t),t.response&&console.error("Categories error response:",t.response.data)}},pt=a=>{const t=x.value.indexOf(a);t===-1?x.value.push(a):x.value.splice(t,1)},vt=()=>{x.value.length===j.value.length?x.value=[]:x.value=j.value.map(a=>a.value)},bt=a=>{const t=j.value.find(s=>s.value===a);return t?t.label:a},Ve=a=>{ye.value&&!ye.value.contains(a.target)&&(ne.value=!1)},mt=a=>{console.log("Toggling product:",a),console.log("Current selected products before toggle:",b.value);const t=b.value.indexOf(a);t===-1?(b.value.push(a),console.log("Added product:",a)):(b.value.splice(t,1),console.log("Removed product:",a)),console.log("Selected products after toggle:",b.value)},ft=()=>{b.value.length===P.value.length&&P.value.length>0?b.value=[]:b.value=P.value.map(a=>a.itemid)},yt=a=>{const t=re.value.find(s=>s.itemid===a);return t?t.itemname:a},P=Ne(()=>K.value?re.value.filter(a=>a.itemname.toLowerCase().includes(K.value.toLowerCase())||a.itemid.toLowerCase().includes(K.value.toLowerCase())):re.value),Ee=ht(()=>{},300);function ht(a,t){let s;return function(...r){clearTimeout(s),s=setTimeout(()=>a.apply(this,r),t)}}const Fe=a=>{he.value&&!he.value.contains(a.target)&&(ie.value=!1,K.value="")};n(null),n(!1);const xe=n(null),we=n(null);let ke=null,ue=null;const ge=n(!1);n(!1);const _e=n(!1),Ce=n(!1),Se=n(!1);n(!1),n(!1),n(!1),n(!1),n(!1),n(!1),n(!1);const g=n((()=>{const a=new Date,t=new Date;return t.setDate(a.getDate()-30),{start_date:t.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0]}})()),de=n("all"),I=n("gross"),W=n("grossamount"),H=Ne(()=>{const a=new Date(g.value.start_date),t=new Date(g.value.end_date),s=new Date;return a<=t&&a<=s&&t<=s}),z=a=>{const t=Number(a);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(isNaN(t)?0:t)},xt=Ne(()=>{const a=k.value||{};return[{title:"TOTAL GROSS",value:z(a.totalGross),icon:nt,color:"text-blue-600",bgColor:"bg-blue-100",description:"Total revenue before deductions"},{title:"TOTAL NETSALES",value:z(a.totalNetsales),icon:Pt,color:"text-green-600",bgColor:"bg-green-100",description:"Revenue after all deductions"},{title:"TOTAL DISCOUNT",value:z(a.totalDiscount),icon:nt,color:"text-amber-600",bgColor:"bg-amber-100",description:"Sum of all applied discounts"},{title:"TOTAL COST",value:z(a.totalCost),icon:zt,color:"text-purple-600",bgColor:"bg-purple-100",description:"Aggregate cost of goods sold"},{title:"TOTAL VAT",value:z(a.totalVat),icon:Rt,color:"text-pink-600",bgColor:"bg-pink-100",description:"Value Added Tax collected"},{title:"VATABLE SALES",value:z(a.totalVatableSales),icon:Nt,color:"text-indigo-600",bgColor:"bg-indigo-100",description:"Sales subject to VAT"}]}),Ae=()=>{var l;if(!xe.value)return;const a=xe.value.getContext("2d");ke&&ke.destroy();const t=((l=k.value)==null?void 0:l.paymentBreakdown)||{},s=Object.keys(t).map(o=>{const v=t[o],c=o.replace(/([A-Z])/g," $1").trim(),u=z(v);return`${c} (${u})`}),r=Object.values(t).map(o=>Number(o)||0);ke=new S(a,{type:"pie",data:{labels:s,datasets:[{data:r,backgroundColor:["#3B82F6","#10B981","#F43F5E","#6366F1","#8B5CF6","#EC4899","#F97316"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:function(o){const v=o.dataset.data.reduce((M,D)=>M+D,0),c=o.parsed,u=(c/v*100).toFixed(2);return`${o.label}: ${c.toFixed(2)} (${u}%)`}}}}}})},Te=async()=>{var a,t,s;try{Se.value=!0;const r={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(u=>u.NAME||(typeof u=="object"?u.NAME:u)),product_type:de.value};console.log("Top/Bottom Products Payload:",r);const l=await w.post(route("get.top.bottom.products"),r);if(console.log("Top/Bottom Products Response:",l.data),console.log("Response Status:",l.status),l.status!==200)throw new Error(`API returned status: ${l.status}`);const o=Array.isArray((a=l==null?void 0:l.data)==null?void 0:a.topProducts)?l.data.topProducts:[],v=Array.isArray((t=l==null?void 0:l.data)==null?void 0:t.bottomProducts)?l.data.bottomProducts:[],c=((s=l==null?void 0:l.data)==null?void 0:s.summary)||{};console.log("Processed Data:",{topProductsCount:o.length,bottomProductsCount:v.length,summaryData:c}),Oe(o,v,c)}catch(r){console.error("Error fetching top/bottom products:",r),Oe([],[],{})}finally{Se.value=!1}},Oe=(a,t,s={})=>{if(!we.value)return;const r=we.value.getContext("2d");if(ue&&ue.destroy(),(!a||a.length===0)&&(!t||t.length===0)){ue=new S(r,{type:"bar",data:{labels:["No Data Available"],datasets:[{label:"No products data available",data:[0],backgroundColor:"rgba(128, 128, 128, 0.3)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Popular Products & Products Under Monitoring (No Data)",font:{size:14,weight:"bold"}}}}});return}console.log("Top Products Data:",a),console.log("Bottom Products Data:",t);const l=(a||[]).slice(0,10),o=(t||[]).slice(0,10),v=l.map(h=>h.itemname||"Unknown"),c=o.map(h=>h.itemname||"Unknown"),u=l.map(h=>Number(h.total_sales||0)),M=o.map(h=>Number(h.total_sales||0)),D=[...v.map(h=>`üî• ${h}`),...c.map(h=>`‚ö†Ô∏è ${h}`)],R=[...u,...M],Le=[...Array(l.length).fill("rgba(34, 197, 94, 0.6)"),...Array(o.length).fill("rgba(239, 68, 68, 0.6)")],Pe=[...Array(l.length).fill("rgba(34, 197, 94, 1)"),...Array(o.length).fill("rgba(239, 68, 68, 1)")];ue=new S(r,{type:"bar",data:{labels:D,datasets:[{label:"Sales Amount (‚Ç±)",data:R,backgroundColor:Le,borderColor:Pe,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Popular Products & Products Under Monitoring ${(()=>{switch(de.value){case"regular":return"(Regular Products Only)";case"non_product":return"(Non Products Only)";default:return"(All Products)"}})()}`,font:{size:14,weight:"bold"}},legend:{display:!1},tooltip:{callbacks:{title:function(h){return h[0].label.replace(/üî•|‚ö†Ô∏è/g,"").trim()},label:function(h){const wt=h.parsed.y,ze=h.dataIndex;let X=`Sales: ‚Ç±${wt.toLocaleString()}`;const lt=ze<l.length,ce=lt?l[ze]:o[ze-l.length];if(ce){const kt=ce.product_category||"unknown",_t=ce.retail_department||"Unknown",Ct=ce.store_count||0;X+=`
Quantity: ${(ce.total_quantity||0).toLocaleString()}`,X+=`
Category: ${kt==="non_product"?"Non Product":"Regular Product"}`,X+=`
Department: ${_t}`,X+=`
Stores: ${Ct}`,X+=`
Type: ${lt?"Top Performer":"Under Monitoring"}`}return X}}}},scales:{x:{ticks:{maxRotation:45,minRotation:45,font:{size:10}}},y:{beginAtZero:!0,title:{display:!0,text:"Sales Amount (‚Ç±)"},ticks:{callback:function(h){return"‚Ç±"+h.toLocaleString()}}}}}})},Ie=async()=>{try{ge.value=!0,console.log("Selected Stores:",_.value);const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)};console.log("Payload for metrics:",a);const t=await w.post(route("get.metrics"),a);console.log("Metrics response:",t.data),k.value=t.data||L.metrics,Ae()}catch(a){console.error("Error fetching metrics:",a),k.value=L.metrics,Ae()}finally{ge.value=!1}},We=async()=>{try{_e.value=!0;const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)},t=await w.post(route("get.monthly.sales"),a);He(t.data||[])}catch(a){console.error("Error fetching monthly sales:",a),He([])}finally{_e.value=!1}},He=a=>{if(!N.value)return;const t=N.value.getContext("2d");B&&B.destroy();const s=Array.isArray(a)?a:[],r=s.length>0?s.map(o=>o.label):["No Data"],l=s.length>0?s.map(o=>o.total_sales):[0];B=new S(t,{type:"line",data:{labels:r,datasets:[{label:"Monthly Sales",data:l,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.1,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(o){return z(o.parsed.y)}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Sales Amount"},ticks:{callback:function(o){return z(o)}}}}}})},Ue=async()=>{var a,t;try{Ce.value=!0;const s={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(v=>typeof v=="object"?v.NAME:v)},r=await w.post(route("get.top.wastes"),s);console.log("Waste Analysis Response:",r.data);const l=Array.isArray((a=r==null?void 0:r.data)==null?void 0:a.topWastesOverall)?r.data.topWastesOverall:[],o=Array.isArray((t=r==null?void 0:r.data)==null?void 0:t.wasteSummaryByType)?r.data.wasteSummaryByType:[];qe(l,o)}catch(s){console.error("Error fetching top wastes:",s),qe([],[])}finally{Ce.value=!1}},qe=(a,t=[])=>{if(!Z.value)return;const s=Z.value.getContext("2d");if($&&$.destroy(),!a||a.length===0){$=new S(s,{type:"bar",data:{labels:["No Data"],datasets:[{label:"No waste data available",data:[0],backgroundColor:"rgba(128, 128, 128, 0.3)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}});return}const r=a.slice(0,10).map(c=>{const u=c.itemname||c.ITEMID;return u.length>20?u.substring(0,20)+"...":u}),l=a.slice(0,10).map(c=>Math.abs(Number(c.total_waste_quantity||0))),o=a.slice(0,10).map(c=>Math.abs(Number(c.total_waste_cost||0))),v=a.slice(0,10).map(c=>c.waste_types||"Various");$=new S(s,{type:"bar",data:{labels:r,datasets:[{label:"Waste Quantity",data:l,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,yAxisID:"y"},{label:"Waste Cost (‚Ç±)",data:o,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,type:"line",yAxisID:"y1",fill:!1,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:"Top Waste Items (Stock Counting Analysis)",font:{size:14,weight:"bold"}},legend:{position:"top"},tooltip:{callbacks:{title:function(c){var D,R;const u=c[0].dataIndex;return((D=a[u])==null?void 0:D.itemname)||((R=a[u])==null?void 0:R.ITEMID)||"Unknown"},label:function(c){const u=c.parsed.y,M=c.dataset.label,D=c.dataIndex;v[D];let R=`${M}: `;return c.dataset.label==="Waste Cost (‚Ç±)"?R+=z(u):R+=u.toFixed(2)+" units",R},afterLabel:function(c){const u=c.dataIndex;return`Waste Types: ${v[u]}`}}}},scales:{x:{title:{display:!0,text:"Items"},ticks:{maxRotation:45,minRotation:45}},y:{type:"linear",display:!0,position:"left",beginAtZero:!0,title:{display:!0,text:"Waste Quantity (units)"},grid:{drawOnChartArea:!1}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,title:{display:!0,text:"Waste Cost (‚Ç±)"},grid:{drawOnChartArea:!0},ticks:{callback:function(c){return"‚Ç±"+c.toLocaleString()}}}}}})},pe=async()=>{var a,t;try{const s={start_date:g.value.start_date,end_date:g.value.end_date,filter_by:I.value,stores:_.value.map(l=>l.NAME||l),products:b.value};console.log("Fetching transaction sales with payload:",s),console.log("Selected products:",b.value),console.log("Selected stores:",_.value);const r=await w.post(route("get.transaction.sales"),s);console.log("Transaction sales response:",r.data),console.log("Transaction sales data count:",((t=(a=r.data)==null?void 0:a.data)==null?void 0:t.length)||0),Qe(r.data||{data:[],summary:{}})}catch(s){console.error("Error fetching transaction sales:",s),s.response&&console.error("Transaction sales error response:",s.response.data),Qe({data:[],summary:{}})}},Qe=a=>{if(!ee.value)return;const t=ee.value.getContext("2d");te&&te.destroy();const s=a.data||[];console.log("Initializing chart with data:",s);const r=s.map(o=>o.label),l=s.map(o=>o.total_value);console.log("Chart labels:",r),console.log("Chart values:",l),s.length===0&&console.log("No data to display in chart"),te=new S(t,{type:"line",data:{labels:r.length>0?r:["No Data"],datasets:[{label:I.value==="qty"?"Total Quantity":"Total Sales (‚Ç±)",data:l.length>0?l:[0],borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Transaction ${I.value==="qty"?"Quantity":"Sales"} Trend${b.value.length>0?` (${b.value.length} products selected)`:""}`,font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(o){return I.value==="qty"?o.toLocaleString()+" items":"‚Ç±"+o.toLocaleString()}}}}}})},Ze=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)},t=await w.post(route("get.sales.by.hour"),a);Ge(t.data||{data:[],summary:{}})}catch(a){console.error("Error fetching sales by hour:",a),Ge({data:[],summary:{}})}},Ge=a=>{if(!se.value)return;const t=se.value.getContext("2d");ae&&ae.destroy();const s=a.data||[],r=s.map(o=>o.label),l=s.map(o=>o.total_sales);ae=new S(t,{type:"bar",data:{labels:r,datasets:[{label:"Sales (‚Ç±)",data:l,backgroundColor:"rgba(16, 185, 129, 0.6)",borderColor:"rgba(16, 185, 129, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Hour",font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(o){return"‚Ç±"+o.toLocaleString()}}}}}})},De=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s),filter_by:W.value},t=await w.post(route("get.top.stores"),a);Je(t.data||{data:[],summary:{}})}catch(a){console.error("Error fetching top stores:",a),Je({data:[],summary:{}})}},Je=a=>{if(!oe.value)return;const t=oe.value.getContext("2d");G&&G.destroy();const s=a.data||[],r=s.map(o=>o.store),l=s.map(o=>o.total_value);G=new S(t,{type:"bar",data:{labels:r,datasets:[{label:Ke(W.value),data:l,backgroundColor:"rgba(139, 92, 246, 0.6)",borderColor:"rgba(139, 92, 246, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Top Stores by ${Ke(W.value)}`,font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{x:{ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,ticks:{callback:function(o){return W.value==="qty"?o.toLocaleString()+" items":"‚Ç±"+o.toLocaleString()}}}}}})},Ke=a=>({grossamount:"Gross Amount",discamount:"Discount Amount",netamount:"Net Amount",qty:"Quantity"})[a]||"Gross Amount",Xe=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)},t=await w.post(route("get.advanced.analysis"),a);Ye(t.data||{salesTrend:[],storeComparison:[],categoryPerformance:[]})}catch(a){console.error("Error fetching advanced analysis:",a),Ye({salesTrend:[],storeComparison:[],categoryPerformance:[]})}},Ye=a=>{if(!J.value)return;const t=J.value.getContext("2d");E&&E.destroy();const s=a.salesTrend||[],r=s.map(c=>c.label),l=s.map(c=>c.gross_sales),o=s.map(c=>c.net_sales),v=s.map(c=>c.discount_amount);E=new S(t,{type:"line",data:{labels:r,datasets:[{label:"Gross Sales",data:l,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4},{label:"Net Sales",data:o,borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4},{label:"Discounts",data:v,borderColor:"rgba(239, 68, 68, 1)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Advanced Sales Analysis",font:{size:14,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(c){return"‚Ç±"+c.toLocaleString()}}}}}})},et=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)},t=await w.post(route("get.received.delivery.vs.sales"),a);tt(t.data||{data:[],summary:{}})}catch(a){console.error("Error fetching received delivery vs sales:",a),tt({data:[],summary:{}})}},tt=a=>{if(!le.value)return;const t=le.value.getContext("2d");f&&f.destroy();const s=a.data||[],r=s.map(v=>v.label),l=s.map(v=>v.received_delivery),o=s.map(v=>v.total_sales);f=new S(t,{type:"line",data:{labels:r,datasets:[{label:"Received Delivery",data:l,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!1},{label:"Total Sales",data:o,borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Received Delivery vs Sales",font:{size:14,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(v){return v.toLocaleString()+" units"}}}}}})},Me=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s),categories:x.value};console.log("Fetching sales by category with payload:",a);const t=await w.post(route("get.sales.by.category"),a);console.log("Sales by category response:",t.data),st(t.data||{data:[],summary:{}})}catch(a){console.error("Error fetching sales by category:",a),a.response&&console.error("Error response:",a.response.data),st({data:[],summary:{}})}},st=a=>{if(!p.value)return;const t=p.value.getContext("2d");y&&y.destroy();const s=a.data||[];if(!s||s.length===0){y=new S(t,{type:"doughnut",data:{labels:["No Data Available"],datasets:[{data:[1],backgroundColor:["rgba(128, 128, 128, 0.3)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Category (No Data)",font:{size:14,weight:"bold"}},legend:{display:!1}}}});return}const r=s.slice(0,10),l=s.slice(10);let o=r.map(u=>u.category),v=r.map(u=>u.total_sales);if(l.length>0){const u=l.reduce((M,D)=>M+D.total_sales,0);o.push(`Others (${l.length} categories)`),v.push(u)}const c=["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(34, 197, 94, 0.8)","rgba(168, 85, 247, 0.8)","rgba(251, 146, 60, 0.8)","rgba(14, 165, 233, 0.8)","rgba(156, 163, 175, 0.8)"];y=new S(t,{type:"doughnut",data:{labels:o,datasets:[{data:v,backgroundColor:c.slice(0,o.length),borderColor:c.slice(0,o.length).map(u=>u.replace("0.8","1")),borderWidth:2,hoverOffset:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Category",font:{size:14,weight:"bold"}},legend:{position:"right",labels:{padding:15,usePointStyle:!0,font:{size:11}}},tooltip:{callbacks:{label:function(u){const M=u.dataset.data.reduce((Le,Pe)=>Le+Pe,0),D=u.parsed,R=(D/M*100).toFixed(1);return`${u.label}: ‚Ç±${D.toLocaleString()} (${R}%)`}}}}}})},at=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)},t=await w.post(route("get.top.variance.stores"),a);ot(t.data||{data:[],summary:{}})}catch(a){console.error("Error fetching top variance stores:",a),ot({data:[],summary:{}})}},ot=a=>{if(!O.value)return;const t=O.value.getContext("2d");fe&&fe.destroy();const s=a.data||[],r=s.map(o=>o.store),l=s.map(o=>o.total_variance);fe=new S(t,{type:"bar",data:{labels:r,datasets:[{label:"Total Variance",data:l,backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Top 10 Stores Under Monitoring (Highest Variances)",font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{x:{ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,ticks:{callback:function(o){return o.toLocaleString()+" units"}}}}}})};return U([()=>g.value.start_date,()=>g.value.end_date,()=>JSON.stringify(_.value)],()=>{H.value?(A.value="",Ie(),Te(),We(),Ue(),pe(),Ze(),De(),Xe(),et(),Me(),at()):A.value="Invalid date range. Please check your selections."}),U(()=>de.value,()=>{H.value&&Te()}),U(()=>I.value,()=>{H.value&&pe()}),U(()=>W.value,()=>{H.value&&De()}),U(()=>JSON.stringify(b.value),()=>{console.log("Products watcher triggered, new products:",b.value),console.log("Is valid date range:",H.value),H.value&&(console.log("Calling fetchTransactionSales from watcher"),pe())}),U(()=>JSON.stringify(x.value),()=>{H.value&&Me()}),it(()=>{Ae(),ct(),ut(),gt(),Ie(),Te(),We(),Ue(),pe(),Ze(),De(),Xe(),et(),Me(),at(),document.addEventListener("click",Ve),document.addEventListener("click",Fe)}),St(()=>{document.removeEventListener("click",Ve),document.removeEventListener("click",Fe)}),(a,t)=>(i(),d(F,null,[Be(Lt,{"active-tab":"DASHBOARD"},{main:At(()=>[e("div",es,[t[55]||(t[55]=e("div",{class:"absolute inset-0 opacity-10 bg-pattern z-0"},null,-1)),e("div",ts,[e("div",ss,[e("div",as,[e("div",os,[e("div",null,[e("h1",ls,[t[11]||(t[11]=T(" Welcome back, ")),e("span",rs,m(Y.username)+"!",1)]),t[12]||(t[12]=e("p",{class:"text-sm text-gray-500"},"Track your sales, analyze performance, and manage your business",-1))]),e("div",ns,[e("div",is,[t[13]||(t[13]=e("label",{class:"text-xs font-medium text-gray-500 mb-1"},"Start Date",-1)),q(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=s=>g.value.start_date=s),class:V(["border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-red-500":A.value}])},null,2),[[me,g.value.start_date]])]),e("div",ds,[t[14]||(t[14]=e("label",{class:"text-xs font-medium text-gray-500 mb-1"},"End Date",-1)),q(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>g.value.end_date=s),class:V(["border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-red-500":A.value}])},null,2),[[me,g.value.end_date]])])])]),A.value?(i(),d("div",cs,[t[15]||(t[15]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("span",null,m(A.value),1)])):C("",!0)]),e("div",us,[t[16]||(t[16]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Filter by Stores",-1)),Be(Bt,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),options:je.value,multiple:!0,class:"w-full lg:w-64"},null,8,["modelValue","options"])])])]),e("div",gs,[(i(!0),d(F,null,Q(xt.value,(s,r)=>(i(),d("div",{key:s.title,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 hover:shadow-md transition-shadow duration-200 relative"},[ge.value?(i(),d("div",ps,t[17]||(t[17]=[e("div",{class:"flex flex-col items-center gap-2"},[e("div",{class:"w-8 h-8 border-3 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),e("span",{class:"text-xs text-gray-500"},"Loading...")],-1)]))):C("",!0),e("div",vs,[e("div",{class:V([s.bgColor,"p-2.5 rounded-lg"])},[(i(),Tt(Dt(s.icon),{class:V([s.color,"w-5 h-5 md:w-6 md:h-6"])},null,8,["class"]))],2)]),e("div",null,[e("p",bs,m(s.title),1),e("p",ms,m(s.value),1),e("p",fs,m(s.description),1)])]))),128))]),e("div",ys,[e("div",hs,[ge.value?(i(),d("div",xs,t[18]||(t[18]=[e("div",{class:"flex flex-col items-center gap-2"},[e("div",{class:"w-10 h-10 border-3 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),e("span",{class:"text-sm text-gray-600"},"Loading chart...")],-1)]))):C("",!0),t[19]||(t[19]=e("h3",{class:"text-base md:text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a.5.5 0 11-1 0 .5.5 0 011 0zm4 5a.5.5 0 11-1 0 .5.5 0 011 0z"})]),T(" Payment Methods ")],-1)),e("div",ws,[e("canvas",{ref_key:"chartRef",ref:xe,class:"w-full h-full"},null,512)])]),e("div",ks,[t[20]||(t[20]=e("h3",{class:"text-base md:text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})]),T(" Announcements ")],-1)),e("div",_s,[Y.announcements.length?(i(!0),d(F,{key:0},Q(Y.announcements,(s,r)=>(i(),d("div",{key:r,class:"p-3 md:p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all duration-200"},[e("h4",Cs,m(s.title),1),e("p",Ss,m(s.description),1)]))),128)):(i(),d("p",As," No announcements available "))])])]),e("div",Ts,[e("div",Ds,[t[23]||(t[23]=e("h3",{class:"text-base md:text-lg font-semibold text-gray-800 flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),T(" Popular Products & Products Under Monitoring ")],-1)),e("div",Ms,[t[22]||(t[22]=e("label",{for:"productTypeFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),q(e("select",{id:"productTypeFilter","onUpdate:modelValue":t[3]||(t[3]=s=>de.value=s),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors duration-200"},t[21]||(t[21]=[e("option",{value:"all"},"All Products",-1),e("option",{value:"regular"},"Regular Products Only",-1),e("option",{value:"non_product"},"Non Products Only",-1)]),512),[[$e,de.value]])])]),e("div",Ls,[Se.value?(i(),d("div",Ps,t[24]||(t[24]=[e("div",{class:"flex flex-col items-center gap-2"},[e("div",{class:"w-10 h-10 border-3 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),e("span",{class:"text-sm text-gray-600"},"Loading products...")],-1)]))):C("",!0),e("canvas",{ref_key:"topBottomProductsRef",ref:we,class:"w-full h-full"},null,512)])]),e("div",zs,[e("div",Rs,[t[26]||(t[26]=e("div",{class:"absolute inset-0 opacity-10 bg-teal-100"},null,-1)),t[27]||(t[27]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"}," Monthly Sales Trend ",-1)),e("div",Ns,[_e.value?(i(),d("div",Bs,t[25]||(t[25]=[e("div",{class:"flex flex-col items-center gap-2"},[e("div",{class:"w-10 h-10 border-3 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),e("span",{class:"text-sm text-gray-600"},"Loading sales...")],-1)]))):C("",!0),e("canvas",{ref_key:"monthlySalesRef",ref:N,class:"w-full h-full"},null,512)])]),e("div",$s,[t[29]||(t[29]=e("div",{class:"absolute inset-0 opacity-10 bg-red-100"},null,-1)),t[30]||(t[30]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})]),T(" Top Waste Items (Stock Counting Analysis) ")],-1)),e("div",js,[Ce.value?(i(),d("div",Vs,t[28]||(t[28]=[e("div",{class:"flex flex-col items-center gap-2"},[e("div",{class:"w-10 h-10 border-3 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),e("span",{class:"text-sm text-gray-600"},"Loading wastes...")],-1)]))):C("",!0),e("canvas",{ref_key:"topWasteRef",ref:Z,class:"w-full h-full"},null,512)])])]),e("div",Es,[t[37]||(t[37]=e("div",{class:"absolute inset-0 opacity-10 bg-blue-100"},null,-1)),e("div",Fs,[t[36]||(t[36]=e("h3",{class:"text-xl font-bold text-gray-800 flex items-center mb-3 sm:mb-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),T(" Transaction Sales Trend ")],-1)),e("div",Os,[t[35]||(t[35]=e("label",{for:"transactionSalesFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),q(e("select",{id:"transactionSalesFilter","onUpdate:modelValue":t[4]||(t[4]=s=>I.value=s),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"},t[31]||(t[31]=[e("option",{value:"gross"},"Gross Amount",-1),e("option",{value:"qty"},"Quantity",-1)]),512),[[$e,I.value]]),e("div",Is,[t[34]||(t[34]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Products (Optional)",-1)),e("div",{class:"relative",ref_key:"transactionProductDropdownRef",ref:he},[e("button",{onClick:t[5]||(t[5]=s=>ie.value=!ie.value),type:"button",class:"relative w-full bg-white border border-gray-300 rounded-lg shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-colors duration-200"},[e("span",Ws,[b.value.length===0?(i(),d("span",Hs,"Search and select products...")):b.value.length===1?(i(),d("span",Us,m(yt(b.value[0])),1)):(i(),d("span",qs,m(b.value.length)+" products selected",1))]),e("span",Qs,[(i(),d("svg",{class:V(["h-4 w-4 text-gray-400 transition-transform duration-200",{"rotate-180":ie.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},t[32]||(t[32]=[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])]),ie.value?(i(),d("div",Zs,[e("div",Gs,[q(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>K.value=s),onInput:t[7]||(t[7]=(...s)=>rt(Ee)&&rt(Ee)(...s)),onClick:t[8]||(t[8]=be(()=>{},["stop"])),type:"text",placeholder:"Search products by name or ID...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},null,544),[[me,K.value]])]),e("div",Js,[e("div",Ks,[e("div",{class:"px-4 py-3 cursor-pointer hover:bg-blue-100 flex items-center select-none",onClick:be(ft,["stop","prevent"])},[e("input",{type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",checked:b.value.length===P.value.length&&P.value.length>0,indeterminate:b.value.length>0&&b.value.length<P.value.length,tabindex:"-1",readonly:""},null,8,Xs),e("span",Ys," Select All ("+m(P.value.length)+" items) ",1)])]),(i(!0),d(F,null,Q(P.value,s=>(i(),d("div",{key:s.itemid,class:"px-4 py-2 cursor-pointer hover:bg-blue-50 flex items-center border-b border-gray-50 select-none bg-white",style:{"background-color":"white !important"},onClick:be(r=>mt(s.itemid),["stop","prevent"])},[e("input",{type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",checked:b.value.includes(s.itemid),tabindex:"-1",readonly:""},null,8,ta),e("div",sa,[e("div",aa,m(s.itemname),1),e("div",oa,"ID: "+m(s.itemid),1)])],8,ea))),128)),P.value.length===0?(i(),d("div",la,t[33]||(t[33]=[e("div",{class:"text-sm"},"No products found",-1),e("div",{class:"text-xs mt-1"},"Try different search terms",-1)]))):C("",!0)])])):C("",!0)],512),re.value.length===0?(i(),d("div",ra,"Loading products...")):(i(),d("div",na,[T(m(P.value.length)+" products available ",1),b.value.length>0?(i(),d("span",ia," ("+m(b.value.length)+" selected) ",1)):C("",!0)]))])])]),e("div",da,[e("canvas",{ref_key:"transactionSalesRef",ref:ee,class:"w-full h-full"},null,512)])]),e("div",ca,[e("div",ua,[t[38]||(t[38]=e("div",{class:"absolute inset-0 opacity-10 bg-green-100"},null,-1)),t[39]||(t[39]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),T(" Sales by Hour ")],-1)),e("div",ga,[e("canvas",{ref_key:"salesByHourRef",ref:se,class:"w-full h-full"},null,512)])]),e("div",pa,[t[43]||(t[43]=e("div",{class:"absolute inset-0 opacity-10 bg-purple-100"},null,-1)),e("div",va,[t[42]||(t[42]=e("h3",{class:"text-xl font-bold text-gray-800 flex items-center mb-3 sm:mb-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),T(" Top Stores Performance ")],-1)),e("div",ba,[t[41]||(t[41]=e("label",{for:"topStoresFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),q(e("select",{id:"topStoresFilter","onUpdate:modelValue":t[9]||(t[9]=s=>W.value=s),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors duration-200"},t[40]||(t[40]=[e("option",{value:"grossamount"},"Gross Amount",-1),e("option",{value:"discamount"},"Discount Amount",-1),e("option",{value:"netamount"},"Net Amount",-1),e("option",{value:"qty"},"Quantity",-1)]),512),[[$e,W.value]])])]),e("div",ma,[e("canvas",{ref_key:"topStoresRef",ref:oe,class:"w-full h-full"},null,512)])])]),e("div",fa,[t[44]||(t[44]=e("div",{class:"absolute inset-0 opacity-10 bg-indigo-100"},null,-1)),t[45]||(t[45]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),T(" Advanced Data Analysis ")],-1)),e("div",ya,[e("canvas",{ref_key:"advancedAnalysisRef",ref:J,class:"w-full h-full"},null,512)])]),e("div",ha,[e("div",xa,[t[46]||(t[46]=e("div",{class:"absolute inset-0 opacity-10 bg-cyan-100"},null,-1)),t[47]||(t[47]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-cyan-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})]),T(" Received Delivery vs Sales ")],-1)),e("div",wa,[e("canvas",{ref_key:"receivedDeliveryVsSalesRef",ref:le,class:"w-full h-full"},null,512)])]),e("div",ka,[t[52]||(t[52]=e("div",{class:"absolute inset-0 opacity-10 bg-orange-100"},null,-1)),e("div",_a,[t[51]||(t[51]=e("h3",{class:"text-xl font-bold text-gray-800 flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),T(" Sales by Category ")],-1)),e("div",Ca,[t[50]||(t[50]=e("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Filter Categories (Optional)",-1)),e("div",{class:"relative",ref_key:"categoryDropdownRef",ref:ye},[e("button",{onClick:t[10]||(t[10]=s=>ne.value=!ne.value),type:"button",class:"relative w-full bg-white border border-gray-300 rounded-lg shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 sm:text-sm transition-colors duration-200"},[e("span",Sa,[x.value.length===0?(i(),d("span",Aa,"Select categories...")):x.value.length===1?(i(),d("span",Ta,m(bt(x.value[0])),1)):(i(),d("span",Da,m(x.value.length)+" categories selected",1))]),e("span",Ma,[(i(),d("svg",{class:V(["h-4 w-4 text-gray-400 transition-transform duration-200",{"rotate-180":ne.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},t[48]||(t[48]=[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])]),ne.value?(i(),d("div",La,[e("div",Pa,[e("div",{class:"px-3 py-2 cursor-pointer hover:bg-orange-50 flex items-center transition-colors duration-150",onClick:vt},[e("input",{type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded",checked:x.value.length===j.value.length,indeterminate:x.value.length>0&&x.value.length<j.value.length,readonly:""},null,8,za),t[49]||(t[49]=e("span",{class:"ml-2 font-medium text-gray-900"},"Select All",-1))])]),(i(!0),d(F,null,Q(j.value,s=>(i(),d("div",{key:s.value,class:"px-3 py-2 cursor-pointer hover:bg-orange-50 flex items-center transition-colors duration-150",onClick:r=>pt(s.value)},[e("input",{type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded",checked:x.value.includes(s.value),readonly:""},null,8,Na),e("span",Ba,m(s.label),1)],8,Ra))),128))])):C("",!0)],512),j.value.length===0?(i(),d("div",$a,"Loading categories...")):(i(),d("div",ja,[T(m(j.value.length)+" categories available ",1),x.value.length>0?(i(),d("span",Va," ("+m(x.value.length)+" selected) ",1)):C("",!0)]))])]),e("div",Ea,[e("canvas",{ref_key:"salesByCategoryRef",ref:p,class:"w-full h-full"},null,512)])])]),e("div",Fa,[t[53]||(t[53]=e("div",{class:"absolute inset-0 opacity-10 bg-red-100"},null,-1)),t[54]||(t[54]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})]),T(" Top 10 Stores Under Monitoring (Highest Variances) ")],-1)),e("div",Oa,[e("canvas",{ref_key:"topVarianceStoresRef",ref:O,class:"w-full h-full"},null,512)])])])]),_:1}),Be(Yt)],64))}},lo=dt(Ia,[["__scopeId","data-v-5bc1e573"]]);export{lo as default};
