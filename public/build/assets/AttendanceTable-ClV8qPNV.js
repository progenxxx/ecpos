import{d as p,e as r,a as t,F as _,h as k,f as g,i as I,o as i,t as n,n as v,j as O,y as j}from"./app-yW5Rpkbn.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"w-full"},L={class:"hidden lg:block overflow-x-auto"},$={class:"min-w-full bg-white"},B={class:"divide-y divide-gray-200"},z={class:"px-3 py-2 text-sm"},T={class:"px-3 py-2 text-sm"},N={class:"px-3 py-2 text-sm"},S={class:"px-3 py-2 text-sm"},M={class:"px-3 py-2"},A={key:0,class:"relative"},q=["src","onClick","onError","onLoad"],D={key:1,class:"text-gray-400 text-xs"},F={class:"px-3 py-2 text-sm"},V={class:"px-3 py-2"},R={key:0,class:"relative"},G=["src","onClick","onError","onLoad"],H={key:1,class:"text-gray-400 text-xs"},J={class:"px-3 py-2 text-sm"},K={class:"px-3 py-2"},Q={key:0,class:"relative"},U=["src","onClick","onError","onLoad"],W={key:1,class:"text-gray-400 text-xs"},X={class:"px-3 py-2 text-sm"},Y={class:"px-3 py-2"},Z={key:0,class:"relative"},tt=["src","onClick","onError","onLoad"],et={key:1,class:"text-gray-400 text-xs"},st={class:"lg:hidden space-y-4"},ot=["onClick"],rt={class:"flex items-center justify-between"},it={class:"flex-1 min-w-0"},lt={class:"flex items-center gap-2 mb-1"},nt={class:"text-sm font-medium text-gray-900 truncate"},dt={class:"text-xs text-gray-500 space-y-1"},at={class:"flex items-center gap-4"},ct={class:"flex items-center gap-4"},ut={key:0},xt={class:"ml-2 flex-shrink-0"},gt={class:"p-4 bg-gray-50"},mt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4"},ht={class:"bg-white rounded-lg p-3 border"},yt={class:"flex items-center justify-between mb-2"},pt={class:"text-sm text-gray-600"},ft={key:0,class:"flex justify-center"},bt=["src","onClick","onError","onLoad"],_t={key:1,class:"flex justify-center"},kt={class:"bg-white rounded-lg p-3 border"},vt={class:"flex items-center justify-between mb-2"},wt={class:"text-sm text-gray-600"},Pt={key:0,class:"flex justify-center"},It=["src","onClick","onError","onLoad"],Ot={key:1,class:"flex justify-center"},jt={key:0,class:"border-t pt-4"},Ct={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Et={key:0,class:"bg-white rounded-lg p-3 border"},Lt={class:"flex items-center justify-between mb-2"},$t={class:"text-sm text-gray-600"},Bt={key:0,class:"flex justify-center"},zt=["src","onClick","onError","onLoad"],Tt={key:1,class:"flex justify-center"},Nt={key:1,class:"bg-white rounded-lg p-3 border"},St={class:"flex items-center justify-between mb-2"},Mt={class:"text-sm text-gray-600"},At={key:0,class:"flex justify-center"},qt=["src","onClick","onError","onLoad"],Dt={key:1,class:"flex justify-center"},Ft={key:0,class:"text-center py-12 text-gray-500"},Vt={class:"p-4"},Rt=["src"],Gt={__name:"AttendanceTable",props:{attendances:{type:Array,required:!0}},emits:["edit","delete"],setup(y,{emit:Ht}){const m=p(null),f=p(new Set),h=p(null),a=l=>{m.value=l},b=()=>{m.value=null},w=l=>{h.value=h.value===l?null:l},c=(l,o,e)=>{console.error(`${o} image failed to load for attendance ${e.id}:`,l.target.src),f.value.add(`${e.id}-${o}`),l.target.style.display="none";const s=l.target.parentElement;if(s&&!s.querySelector(".fallback-text")){const x=document.createElement("span");x.className="fallback-text text-red-400 text-xs",x.textContent="Image not found",s.appendChild(x)}},u=(l,o,e)=>{console.log(`${o} image loaded successfully for attendance ${e.id}:`,l.target.src),f.value.delete(`${e.id}-${o}`);const s=l.target.parentElement,x=s==null?void 0:s.querySelector(".fallback-text");x&&x.remove()},d=l=>l?l.length>5?l.substring(0,5):l:"-",P=l=>l==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800";return(l,o)=>(i(),r("div",E,[t("div",L,[t("table",$,[o[2]||(o[2]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Staff"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Store"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Time In"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Photo"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Break In"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Photo"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Break Out"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Photo"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Time Out"),t("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Photo")])],-1)),t("tbody",B,[(i(!0),r(_,null,k(y.attendances,e=>(i(),r("tr",{key:e.id,class:"hover:bg-gray-50"},[t("td",z,n(e.staffId),1),t("td",T,n(e.storeId),1),t("td",N,n(e.date),1),t("td",S,n(d(e.timeIn)),1),t("td",M,[e.timeInPhoto?(i(),r("div",A,[t("img",{src:e.timeInPhoto,class:"h-12 w-12 object-cover rounded cursor-pointer border border-gray-200",onClick:s=>a(e.timeInPhoto),onError:s=>c(s,"timeInPhoto",e),onLoad:s=>u(s,"timeInPhoto",e),alt:"Time In",loading:"lazy"},null,40,q)])):(i(),r("span",D,"-"))]),t("td",F,n(d(e.breakIn)),1),t("td",V,[e.breakInPhoto?(i(),r("div",R,[t("img",{src:e.breakInPhoto,class:"h-12 w-12 object-cover rounded cursor-pointer border border-gray-200",onClick:s=>a(e.breakInPhoto),onError:s=>c(s,"breakInPhoto",e),onLoad:s=>u(s,"breakInPhoto",e),alt:"Break In",loading:"lazy"},null,40,G)])):(i(),r("span",H,"-"))]),t("td",J,n(d(e.breakOut)),1),t("td",K,[e.breakOutPhoto?(i(),r("div",Q,[t("img",{src:e.breakOutPhoto,class:"h-12 w-12 object-cover rounded cursor-pointer border border-gray-200",onClick:s=>a(e.breakOutPhoto),onError:s=>c(s,"breakOutPhoto",e),onLoad:s=>u(s,"breakOutPhoto",e),alt:"Break Out",loading:"lazy"},null,40,U)])):(i(),r("span",W,"-"))]),t("td",X,n(d(e.timeOut)),1),t("td",Y,[e.timeOutPhoto?(i(),r("div",Z,[t("img",{src:e.timeOutPhoto,class:"h-12 w-12 object-cover rounded cursor-pointer border border-gray-200",onClick:s=>a(e.timeOutPhoto),onError:s=>c(s,"timeOutPhoto",e),onLoad:s=>u(s,"timeOutPhoto",e),alt:"Time Out",loading:"lazy"},null,40,tt)])):(i(),r("span",et,"-"))])]))),128))])])]),t("div",st,[(i(!0),r(_,null,k(y.attendances,e=>(i(),r("div",{key:e.id,class:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden"},[t("div",{class:"p-4 border-b border-gray-200 cursor-pointer",onClick:s=>w(e.id)},[t("div",rt,[t("div",it,[t("div",lt,[t("h3",nt,n(e.staffId),1),t("span",{class:v(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",P(e.status)])},n(e.status),3)]),t("div",dt,[t("div",at,[t("span",null,"🏪 "+n(e.storeId),1),t("span",null,"📅 "+n(e.date),1)]),t("div",ct,[t("span",null,"🕐 In: "+n(d(e.timeIn)),1),e.timeOut?(i(),r("span",ut,"🕕 Out: "+n(d(e.timeOut)),1)):g("",!0)])])]),t("div",xt,[(i(),r("svg",{class:v(["h-5 w-5 text-gray-400 transition-transform duration-200",{"rotate-180":h.value===e.id}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o[3]||(o[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))])])],8,ot),O(t("div",gt,[t("div",mt,[t("div",ht,[t("div",yt,[o[4]||(o[4]=t("h4",{class:"text-sm font-medium text-gray-900"},"Time In",-1)),t("span",pt,n(d(e.timeIn)),1)]),e.timeInPhoto?(i(),r("div",ft,[t("img",{src:e.timeInPhoto,class:"h-20 w-20 object-cover rounded-lg cursor-pointer border-2 border-gray-200 hover:border-blue-300 transition-colors",onClick:s=>a(e.timeInPhoto),onError:s=>c(s,"timeInPhoto",e),onLoad:s=>u(s,"timeInPhoto",e),alt:"Time In Photo",loading:"lazy"},null,40,bt)])):(i(),r("div",_t,o[5]||(o[5]=[t("div",{class:"h-20 w-20 bg-gray-100 rounded-lg flex items-center justify-center"},[t("span",{class:"text-gray-400 text-xs"},"No Photo")],-1)])))]),t("div",kt,[t("div",vt,[o[6]||(o[6]=t("h4",{class:"text-sm font-medium text-gray-900"},"Time Out",-1)),t("span",wt,n(d(e.timeOut)),1)]),e.timeOutPhoto?(i(),r("div",Pt,[t("img",{src:e.timeOutPhoto,class:"h-20 w-20 object-cover rounded-lg cursor-pointer border-2 border-gray-200 hover:border-blue-300 transition-colors",onClick:s=>a(e.timeOutPhoto),onError:s=>c(s,"timeOutPhoto",e),onLoad:s=>u(s,"timeOutPhoto",e),alt:"Time Out Photo",loading:"lazy"},null,40,It)])):(i(),r("div",Ot,o[7]||(o[7]=[t("div",{class:"h-20 w-20 bg-gray-100 rounded-lg flex items-center justify-center"},[t("span",{class:"text-gray-400 text-xs"},"No Photo")],-1)])))])]),e.breakIn||e.breakOut?(i(),r("div",jt,[o[12]||(o[12]=t("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Break Times",-1)),t("div",Ct,[e.breakIn?(i(),r("div",Et,[t("div",Lt,[o[8]||(o[8]=t("h5",{class:"text-sm font-medium text-gray-700"},"Break In",-1)),t("span",$t,n(d(e.breakIn)),1)]),e.breakInPhoto?(i(),r("div",Bt,[t("img",{src:e.breakInPhoto,class:"h-16 w-16 object-cover rounded-lg cursor-pointer border-2 border-gray-200 hover:border-blue-300 transition-colors",onClick:s=>a(e.breakInPhoto),onError:s=>c(s,"breakInPhoto",e),onLoad:s=>u(s,"breakInPhoto",e),alt:"Break In Photo",loading:"lazy"},null,40,zt)])):(i(),r("div",Tt,o[9]||(o[9]=[t("div",{class:"h-16 w-16 bg-gray-100 rounded-lg flex items-center justify-center"},[t("span",{class:"text-gray-400 text-xs"},"No Photo")],-1)])))])):g("",!0),e.breakOut?(i(),r("div",Nt,[t("div",St,[o[10]||(o[10]=t("h5",{class:"text-sm font-medium text-gray-700"},"Break Out",-1)),t("span",Mt,n(d(e.breakOut)),1)]),e.breakOutPhoto?(i(),r("div",At,[t("img",{src:e.breakOutPhoto,class:"h-16 w-16 object-cover rounded-lg cursor-pointer border-2 border-gray-200 hover:border-blue-300 transition-colors",onClick:s=>a(e.breakOutPhoto),onError:s=>c(s,"breakOutPhoto",e),onLoad:s=>u(s,"breakOutPhoto",e),alt:"Break Out Photo",loading:"lazy"},null,40,qt)])):(i(),r("div",Dt,o[11]||(o[11]=[t("div",{class:"h-16 w-16 bg-gray-100 rounded-lg flex items-center justify-center"},[t("span",{class:"text-gray-400 text-xs"},"No Photo")],-1)])))])):g("",!0)])])):g("",!0)],512),[[j,h.value===e.id]])]))),128))]),y.attendances.length===0?(i(),r("div",Ft,o[13]||(o[13]=[t("div",{class:"text-gray-400 text-6xl mb-4"},"📋",-1),t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No attendance records found",-1),t("p",{class:"text-gray-500"},"Records will appear here once staff check in.",-1)]))):g("",!0),m.value?(i(),r("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:b},[t("div",{class:"relative bg-white rounded-lg max-w-full max-h-full overflow-auto",onClick:o[1]||(o[1]=I(()=>{},["stop"]))},[t("button",{onClick:b,class:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-2xl font-bold bg-white rounded-full w-10 h-10 flex items-center justify-center shadow-lg z-10 hover:bg-gray-100 transition-colors"}," × "),t("div",Vt,[t("img",{src:m.value,class:"max-w-full max-h-[calc(100vh-8rem)] h-auto rounded-lg",alt:"Full size image",onError:o[0]||(o[0]=()=>console.error("Modal image failed to load:",m.value))},null,40,Rt)])])])):g("",!0)]))}},Qt=C(Gt,[["__scopeId","data-v-52fdb088"]]);export{Qt as default};
