import{C as g,d,q as j,l as at,k as ot,c as $,w as I,o as b,a as e,t as m,j as Q,v as U,n as x,e as f,f as st,b as H,h as q,D as lt,B as rt,F as G,a0 as nt,g as P}from"./app-DJ_ZTFbI.js";import{C as h,r as it}from"./chart-8SaNzrGi.js";import{_ as dt}from"./AdminPanel-DorjMUAR.js";import{_ as ct}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as Z,I as ut,r as pt,R as bt,P as mt}from"./CubeIcon-Bv1H6M0-.js";import{_ as vt}from"./MultiSelectDropdown-BGEH8HHf.js";import"./RetailGroup-ReiPV-Rs.js";import"./Logout-CqZ_wKbj.js";/* empty css                                                             */import"./Modal-CKYSH-Ul.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-B7C873nC.js";import"./RetailItems-BqM3fhIp.js";const gt={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6 space-y-6 relative overflow-hidden"},ft={class:"relative z-10 bg-white/80 rounded-3xl shadow-2xl border border-blue-100/50 p-6 transform transition-all duration-500 hover:scale-[1.02]"},yt={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},xt={class:"flex flex-col w-full md:w-auto"},ht={class:"flex items-center space-x-4"},wt={class:"text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-3 animate-pulse-slow"},_t={class:"flex space-x-4"},Ct={class:"flex flex-col"},kt={class:"flex flex-col"},At={key:0,class:"text-red-500 text-xs mt-2 flex items-center space-x-2 animate-bounce"},St={class:"w-full md:w-auto"},Mt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},Tt={class:"bg-white/80 rounded-3xl shadow-xl hover:shadow-2xl border border-blue-100/50 p-6 space-y-4 relative overflow-hidden group"},Nt={class:"flex justify-between items-center relative z-10"},zt={className:"relative z-10"},Pt={class:"text-xs uppercase tracking-wider text-gray-500 mb-2"},Dt={class:"text-sm text-gray-400 mt-2"},Vt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Bt={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},Et={class:"h-[400px] relative z-10"},Lt={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},Rt={class:"max-h-[400px] overflow-y-auto custom-scrollbar relative z-10"},Ot={class:"font-semibold text-gray-800 mb-2"},Wt={class:"text-gray-600 text-sm"},Ft={key:1,class:"text-gray-500 text-center py-4 italic"},jt={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},$t={class:"h-[500px] relative z-10"},It={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qt={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},Ut={class:"h-[400px] relative z-10"},Ht={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},qt={class:"h-[400px] relative z-10"},Gt={__name:"admin copy 5",props:{username:{type:String,default:"User"},announcements:{type:Array,required:!0},metrics:{type:Object,required:!0,default:()=>({totalGross:0,totalNetsales:0,totalDiscount:0,totalCost:0,totalVat:0,totalVatableSales:0,paymentBreakdown:{cash:0,gcash:0,paymaya:0,card:0,loyaltyCard:0,foodPanda:0,grabFood:0}})}},setup(w){h.register(...it),g.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content");const D=w,_=d(D.initialMetrics),v=d(""),C=d(null);let k=null;const A=d(null);let S=null;d(null),d(null);const V=d([]),p=d([]),J=async()=>{try{const a=await g.get(route("get.stores"));V.value=a.data,p.value=a.data}catch(a){console.error("Error fetching stores:",a)}};d(null),d(!1);const M=d(null),T=d(null);let N=null,z=null;const n=d({start_date:new Date().toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),K=j(()=>{const a=new Date(n.value.start_date),t=new Date(n.value.end_date),o=new Date;return a<=t&&a<=o&&t<=o}),u=a=>{const t=Number(a);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(isNaN(t)?0:t)},X=j(()=>{const a=_.value||{};return[{title:"TOTAL GROSS",value:u(a.totalGross),icon:Z,color:"text-blue-600",bgColor:"bg-blue-100",description:"Total revenue before deductions"},{title:"TOTAL NETSALES",value:u(a.totalNetsales),icon:ut,color:"text-green-600",bgColor:"bg-green-100",description:"Revenue after all deductions"},{title:"TOTAL DISCOUNT",value:u(a.totalDiscount),icon:Z,color:"text-amber-600",bgColor:"bg-amber-100",description:"Sum of all applied discounts"},{title:"TOTAL COST",value:u(a.totalCost),icon:pt,color:"text-purple-600",bgColor:"bg-purple-100",description:"Aggregate cost of goods sold"},{title:"TOTAL VAT",value:u(a.totalVat),icon:bt,color:"text-pink-600",bgColor:"bg-pink-100",description:"Value Added Tax collected"},{title:"VATABLE SALES",value:u(a.totalVatableSales),icon:mt,color:"text-indigo-600",bgColor:"bg-indigo-100",description:"Sales subject to VAT"}]}),Y=()=>{var l;if(!M.value)return;const a=M.value.getContext("2d");N&&N.destroy();const t=((l=_.value)==null?void 0:l.paymentBreakdown)||{},o=Object.keys(t).map(s=>{const c=t[s],r=s.replace(/([A-Z])/g," $1").trim(),y=u(c);return`${r} (${y})`}),i=Object.values(t).map(s=>Number(s)||0);N=new h(a,{type:"pie",data:{labels:o,datasets:[{data:i,backgroundColor:["#3B82F6","#10B981","#F43F5E","#6366F1","#8B5CF6","#EC4899","#F97316"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:function(s){const c=s.dataset.data.reduce((F,et)=>F+et,0),r=s.parsed,y=(r/c*100).toFixed(2);return`${s.label}: ${r.toFixed(2)} (${y}%)`}}}}}})},B=async()=>{var a,t;try{const i={start_date:n.value.start_date||"2000-01-01",end_date:n.value.end_date,stores:p.value.map(r=>r.NAME||(typeof r=="object"?r.NAME:r))},l=await g.post(route("get.top.bottom.products"),i),s=Array.isArray((a=l==null?void 0:l.data)==null?void 0:a.topProducts)?l.data.topProducts:[],c=Array.isArray((t=l==null?void 0:l.data)==null?void 0:t.bottomProducts)?l.data.bottomProducts:[];E(s,c)}catch(o){console.error("Error fetching top/bottom products:",o),E([],[])}},E=(a,t)=>{if(!T.value)return;const o=T.value.getContext("2d");z&&z.destroy();const i=a.slice(0,10).map(r=>r.itemname),l=t.slice(0,10).map(r=>r.itemname),s=a.slice(0,10).map(r=>r.total_quantity),c=t.slice(0,10).map(r=>r.total_quantity);z=new h(o,{type:"bar",data:{labels:[...i,...l],datasets:[{label:"Top 10 Products (Quantity)",data:s,backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Bottom 10 Products (Quantity)",data:[...Array(10).fill(0),...c],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(r){const y=r.parsed.y;return`${r.dataset.label}: ${y.toFixed(2)}`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Quantity Sold"}}}}})},L=async()=>{try{console.log("Selected Stores:",p.value);const a={start_date:n.value.start_date||"2000-01-01",end_date:n.value.end_date,stores:p.value.map(o=>typeof o=="object"?o.NAME:o)};console.log("Payload for metrics:",a);const t=await g.post(route("get.metrics"),a);console.log("Metrics response:",t.data),_.value=t.data||D.initialMetrics,Y()}catch(a){console.error("Error fetching metrics:",a)}},R=async()=>{try{const a={start_date:n.value.start_date||"2000-01-01",end_date:n.value.end_date,stores:p.value.map(o=>typeof o=="object"?o.NAME:o)},t=await g.post(route("get.monthly.sales"),a);tt(t.data)}catch(a){console.error("Error fetching monthly sales:",a)}},tt=a=>{if(!C.value)return;const t=C.value.getContext("2d");k&&k.destroy();const o=a.map(l=>l.label),i=a.map(l=>l.total_sales);k=new h(t,{type:"line",data:{labels:o,datasets:[{label:"Monthly Sales",data:i,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.1,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(l){return u(l.parsed.y)}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Sales Amount"},ticks:{callback:function(l){return u(l)}}}}}})},O=async()=>{try{const a={start_date:n.value.start_date||"2000-01-01",end_date:n.value.end_date,stores:p.value.map(i=>typeof i=="object"?i.NAME:i)},t=await g.post(route("get.top.wastes"),a),o=Array.isArray(t==null?void 0:t.data)?t.data:[];W(o)}catch(a){console.error("Error fetching top wastes:",a),W([])}},W=a=>{if(!A.value)return;const t=A.value.getContext("2d");S&&S.destroy();const o=a.slice(0,10).map(s=>s.itemname||s.ITEMID),i=a.slice(0,10).map(s=>Math.abs(Number(s.ADJUSTMENT||0))),l=a.slice(0,10).map(s=>Math.abs(Number(s.SALESAMOUNT||0)));S=new h(t,{type:"bar",data:{labels:o,datasets:[{label:"Waste Quantity",data:i,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1},{label:"Waste Cost",data:l,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(s){const c=s.parsed.y;return`${s.dataset.label}: ${s.dataset.label==="Waste Cost"?u(c):c.toFixed(2)}`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Waste Quantity / Cost"},ticks:{callback:function(s,c,r){return this.getLabelForValue(s)}}}}}})};return at([()=>n.value.start_date,()=>n.value.end_date,()=>JSON.stringify(p.value)],()=>{K.value?(v.value="",L(),B(),R(),O()):v.value="Invalid date range. Please check your selections."}),ot(()=>{J(),L(),B(),R(),O()}),(a,t)=>(b(),$(dt,{"active-tab":"DASHBOARD"},{main:I(()=>[e("div",gt,[t[17]||(t[17]=e("div",{class:"absolute inset-0 opacity-10 bg-pattern z-0"},null,-1)),e("div",ft,[e("div",yt,[e("div",xt,[e("div",ht,[e("h1",wt," Welcome back, "+m(w.username)+"! 👋 ",1),e("div",_t,[e("div",Ct,[t[3]||(t[3]=e("label",{class:"text-sm font-medium text-gray-600 mb-1"},"Start Date",-1)),Q(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=o=>n.value.start_date=o),class:x(["border-2 border-blue-200 rounded-xl px-4 py-2 focus:ring-4 focus:ring-blue-300/50 transition-all duration-300",{"border-red-500":v.value}])},null,2),[[U,n.value.start_date]])]),e("div",kt,[t[4]||(t[4]=e("label",{class:"text-sm font-medium text-gray-600 mb-1"},"End Date",-1)),Q(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=o=>n.value.end_date=o),class:x(["border-2 border-blue-200 rounded-xl px-4 py-2 focus:ring-4 focus:ring-blue-300/50 transition-all duration-300",{"border-red-500":v.value}])},null,2),[[U,n.value.end_date]])])])]),v.value?(b(),f("div",At,[t[5]||(t[5]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("span",null,m(v.value),1)])):st("",!0)]),e("div",St,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Stores",-1)),H(vt,{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=o=>p.value=o),options:V.value,multiple:!0,class:"w-full md:w-64"},null,8,["modelValue","options"])])])]),e("div",Mt,[H(nt,{"enter-active-class":"transition-all duration-700 ease-out","enter-from-class":"opacity-0 translate-y-10","enter-to-class":"opacity-100 translate-y-0"},{default:I(()=>[(b(!0),f(G,null,q(X.value,(o,i)=>(b(),f("div",{key:o.title,class:"transform transition-all duration-300 hover:-translate-y-2 hover:scale-105"},[e("div",Tt,[e("div",{class:"absolute inset-0 opacity-10 group-hover:opacity-20 transition-all duration-300",style:lt({background:`linear-gradient(135deg, ${o.color}, transparent)`})},null,4),e("div",Nt,[e("div",{class:x([o.bgColor,"p-3 rounded-xl shadow-md transform transition-all group-hover:rotate-12"])},[(b(),$(rt(o.icon),{class:x([o.color,"w-7 h-7"])},null,8,["class"]))],2)]),e("div",zt,[e("p",Pt,m(o.title),1),e("p",{class:x([o.color,"text-3xl font-bold"])},m(o.value),3),e("p",Dt,m(o.description),1)])])]))),128))]),_:1})]),e("div",Vt,[e("div",Bt,[t[7]||(t[7]=e("div",{class:"absolute inset-0 opacity-10 bg-blue-100"},null,-1)),t[8]||(t[8]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a.5.5 0 11-1 0 .5.5 0 011 0zm4 5a.5.5 0 11-1 0 .5.5 0 011 0z"})]),P(" Payment Methods Distribution ")],-1)),e("div",Et,[e("canvas",{ref_key:"chartRef",ref:M,class:"w-full h-full"},null,512)])]),e("div",Lt,[t[9]||(t[9]=e("div",{class:"absolute inset-0 opacity-10 bg-green-100"},null,-1)),t[10]||(t[10]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})]),P(" Recent Announcements ")],-1)),e("div",Rt,[w.announcements.length?(b(!0),f(G,{key:0},q(w.announcements,(o,i)=>(b(),f("div",{key:i,class:"bg-white/60 p-4 rounded-xl border border-blue-100 mb-4 hover:border-blue-300 transition-all duration-300 hover:shadow-lg"},[e("h4",Ot,m(o.title),1),e("p",Wt,m(o.description),1)]))),128)):(b(),f("p",Ft," No announcements available "))])])]),e("div",jt,[t[11]||(t[11]=e("div",{class:"absolute inset-0 opacity-10 bg-purple-100"},null,-1)),t[12]||(t[12]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),P(" Popular Products & Products Under Monitoring ")],-1)),e("div",$t,[e("canvas",{ref_key:"topBottomProductsRef",ref:T,class:"w-full h-full"},null,512)])]),e("div",It,[e("div",Qt,[t[13]||(t[13]=e("div",{class:"absolute inset-0 opacity-10 bg-teal-100"},null,-1)),t[14]||(t[14]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"}," Monthly Sales Trend ",-1)),e("div",Ut,[e("canvas",{ref_key:"monthlySalesRef",ref:C,class:"w-full h-full"},null,512)])]),e("div",Ht,[t[15]||(t[15]=e("div",{class:"absolute inset-0 opacity-10 bg-red-100"},null,-1)),t[16]||(t[16]=e("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"}," Top Wastes Analysis ",-1)),e("div",qt,[e("canvas",{ref_key:"topWasteRef",ref:A,class:"w-full h-full"},null,512)])])])])]),_:1}))}},ne=ct(Gt,[["__scopeId","data-v-827a6631"]]);export{ne as default};
