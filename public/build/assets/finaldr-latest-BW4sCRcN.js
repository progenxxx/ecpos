import{C as U,Q as M,d as P,q as u,T as _,p as V,c as v,w as p,o as d,f as A,a as t,b as i,g as l,i as h,j as B,v as H,u as c,n as Y,e as n,t as o,h as D,F as y}from"./app-DJ_ZTFbI.js";import{_ as G,a as F}from"./Update-DfReG9nS.js";import{_ as m}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-B7C873nC.js";import{_ as $}from"./TransparentButton-G7EMCu8y.js";import{S as j}from"./SearchColored-F1cgUrq2.js";import{B as K}from"./Back-CaeIMo8B.js";import{_ as Q}from"./AdminPanel-DorjMUAR.js";import"./Modal-CKYSH-Ul.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-PkxbjC5q.js";import"./FormComponent-B6ZSceH5.js";import"./RetailGroup-ReiPV-Rs.js";import"./Logout-CqZ_wKbj.js";/* empty css                                                             */import"./RetailItems-BqM3fhIp.js";const q={class:"absolute adjust"},z={class:"flex justify-start items-center"},J=["value"],W={"date-rangepicker":"",class:"flex items-center"},X={class:"relative ml-5"},Z=["placeholder"],tt={role:"tablist",class:"tabs tabs-lifted mt-10 p-5"},rt={role:"tabpanel",class:"tab-content bg-base-100 border-base-200 p-6 h-[85vh] overflow-y-auto"},et={key:0,class:"col-span-full text-center mt-8"},ot={key:1,class:"col-span-full text-center mt-8"},st={class:"text-red-600 text-lg"},lt={key:2,class:"col-span-full text-center mt-8"},at={class:"max-w-4xl mx-auto p-4 bg-white shadow-lg text-xs"},dt={class:"w-full border-collapse border border-gray-400"},nt={colspan:"2",class:"border border-gray-400 p-1"},it={class:"font-bold"},bt={colspan:"3",class:"border border-gray-400 p-1"},pt={class:"font-bold"},ut={class:"border border-gray-400 p-1"},gt={class:"border border-gray-400 p-1 text-center"},ct={class:"border border-gray-400 p-1 text-center"},Et={class:"border border-gray-400 p-1 text-center"},yt={class:"border border-gray-400 p-1 text-right"},mt={class:"border border-gray-400 p-1 text-right"},Tt={class:"border border-gray-400 p-1 text-right font-bold"},Ct={class:"border border-gray-400 p-1"},ft={class:"border border-gray-400 p-1 text-center"},vt={class:"border border-gray-400 p-1 text-right"},At={class:"border border-gray-400 p-1 text-right"},Dt={class:"border border-gray-400 p-1 text-right font-bold"},It={colspan:"3",class:"border border-gray-400 p-1"},St={class:"font-bold"},Rt={colspan:"3",class:"border border-gray-400 p-1"},xt={class:"font-bold"},$t={__name:"finaldr-latest",setup(Nt){U.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content");const R=M(),E=P(Object.entries(R.props.groupedPicklist).reduce((e,[r,g])=>(e[r]=g.map(a=>({...a,actual:a.ACTUAL})),e),{})),T=u(()=>{const e=Object.values(E.value)[0];return e||[]}),b=_({StartDate:"2024-07-22",StoreName:"Urdaneta2"}),I=()=>{b.get(route("picklist.getrange"),{preserveState:!0,preserveScroll:!0})},C=u(()=>{const e=b.StartDate;if(e){const r=new Date(e),g=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),f=String(r.getDate()).padStart(2,"0");return`${g}-${a}-${f}`}return""}),x=u(()=>T.value.reduce((e,r)=>e+Number(r.COST||0)*Number(r.CHECKINGCOUNT||0),0)),N=u(()=>T.value.some(e=>Number(e.SPECIALORDER||0)>0)),S=u(()=>T.value.filter(e=>Number(e.SPECIALORDER||0)>0)),O=u(()=>S.value.reduce((e,r)=>e+Number(r.COST||0)*Number(r.SPECIALORDER||0),0)),k=()=>{},L=()=>{window.location.href="/mgcount"},w=()=>{window.location.href="/picklist"};return(e,r)=>{const g=V("InputError");return d(),v(Q,{"active-tab":"FINALDR"},{modals:p(()=>[e.showCreateModal?(d(),v(G,{key:0,onToggleActive:e.createModalHandler},null,8,["onToggleActive"])):A("",!0),e.showModalUpdate?(d(),v(F,{key:1,ID:e.id,SUBJECT:e.subject,DESCRIPTION:e.description,onToggleActive:e.updateModalHandler},null,8,["ID","SUBJECT","DESCRIPTION","onToggleActive"])):A("",!0)]),main:p(()=>[t("div",q,[t("div",z,[i(m,{type:"button",onClick:L,class:"m-1 ml-2 bg-navy p-10"},{default:p(()=>[i(K,{class:"h-5"})]),_:1}),i(m,{type:"button",onClick:e.printPackingList,class:"m-6 bg-navy"},{default:p(()=>r[2]||(r[2]=[l(" PRINT PL ")])),_:1},8,["onClick"]),i(m,{type:"button",onClick:k,class:"bg-navy"},{default:p(()=>r[3]||(r[3]=[l(" PRINT DR ")])),_:1}),i(m,{type:"button",onClick:w,class:"ml-2 bg-navy"},{default:p(()=>r[4]||(r[4]=[l(" CALCULATE ")])),_:1}),t("form",{onSubmit:h(I,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[t("input",{type:"hidden",name:"_token",value:e.$page.props.csrf_token},null,8,J),t("div",W,[t("div",X,[r[5]||(r[5]=t("div",{class:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"},[t("svg",{class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])],-1)),B(t("input",{id:"StartDate",type:"date","onUpdate:modelValue":r[0]||(r[0]=a=>c(b).StartDate=a),onInput:r[1]||(r[1]=(...a)=>C.value&&C.value(...a)),placeholder:C.value,class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,40,Z),[[H,c(b).StartDate]]),i(g,{message:c(b).errors.StartDate,class:"mt-2"},null,8,["message"])])])],32),i($,{type:"submit",onClick:I,disabled:c(b).processing,class:Y({"opacity-25":c(b).processing})},{default:p(()=>[i(j,{class:"h-8"})]),_:1},8,["disabled","class"])])]),t("div",tt,[r[33]||(r[33]=t("input",{type:"radio",name:"my_tabs_2",role:"tab",class:"tab","aria-label":"FINAL DR"},null,-1)),t("div",rt,[e.isLoading?(d(),n("div",et,r[6]||(r[6]=[t("p",{class:"text-gray-600 text-lg"},"Loading...",-1)]))):e.error?(d(),n("div",ot,[t("p",st,o(e.error),1)])):!E.value||Object.keys(E.value).length===0?(d(),n("div",lt,r[7]||(r[7]=[t("div",{class:"bg-white rounded-lg shadow-md p-4 sm:p-8 max-w-sm mx-auto"},[t("p",{class:"text-gray-600 text-base sm:text-lg"},"No DR2 List Available")],-1)]))):(d(!0),n(y,{key:3},D(E.value,(a,f)=>(d(),n("div",{key:f},[t("div",at,[t("table",dt,[r[29]||(r[29]=t("tr",null,[t("td",{colspan:"6",class:"text-center font-bold text-lg border border-gray-400 p-1"},[l(" MALIWALO"),t("br"),l(" TARLAC CITY ")])],-1)),t("tr",null,[r[10]||(r[10]=t("td",{colspan:"4",class:"font-bold border border-gray-400 p-1"},[l("DELIVERY GOODS RECEIPT"),t("br"),l("BW PRODUCT")],-1)),t("td",nt,[r[8]||(r[8]=l(" DR #: ")),t("span",it,o(a[0].JOURNALID),1),r[9]||(r[9]=t("br",null,null,-1)),l(" DELIVERY DATE: "+o(a[0].DELIVERYDATE),1)])]),t("tr",null,[r[13]||(r[13]=t("td",{colspan:"3",class:"border border-gray-400 p-1"},[l("RECEIVED FROM:"),t("br"),t("span",{class:"font-bold"},"HEADOFFICE")],-1)),t("td",bt,[r[11]||(r[11]=l("DELIVERED TO:")),r[12]||(r[12]=t("br",null,null,-1)),t("span",pt,o(a[0].STORENAME),1)])]),r[30]||(r[30]=t("tr",{class:"bg-gray-200 font-bold"},[t("td",{class:"border border-gray-400 p-1"},"PRODUCT DESCRIPTION"),t("td",{class:"border border-gray-400 p-1 text-center"},"DELIVERED QUANTITY"),t("td",{class:"border border-gray-400 p-1 text-center"},"RECEIVED QUANTITY"),t("td",{class:"border border-gray-400 p-1 text-center"},"VARIANCE"),t("td",{class:"border border-gray-400 p-1 text-right"},"UNIT COST"),t("td",{class:"border border-gray-400 p-1 text-right"},"TOTAL")],-1)),(d(!0),n(y,null,D(a,s=>(d(),n("tr",{key:s.ITEMID},[t("td",ut,o(s.ITEMNAME),1),t("td",gt,o(s.CHECKINGCOUNT),1),t("td",ct,o(s.ACTUAL),1),t("td",Et,o(s.ACTUAL-s.CHECKINGCOUNT),1),t("td",yt,o(s.COST),1),t("td",mt,o(s.COST*s.CHECKINGCOUNT),1)]))),128)),t("tr",null,[r[14]||(r[14]=t("td",{colspan:"5",class:"border border-gray-400 p-1 text-right font-bold"},"TOTAL",-1)),t("td",Tt,o(x.value),1)]),N.value?(d(),n(y,{key:0},[r[18]||(r[18]=t("tr",null,[t("td",{rowspan:"2",class:"border border-gray-400 p-1"},"PROMO"),t("td",{class:"border border-gray-400 p-1 text-center"},"DELIVERED QUANTITY"),t("td",{class:"border border-gray-400 p-1 text-center"},"RECEIVED QUANTITY"),t("td",{class:"border border-gray-400 p-1 text-center"},"VARIANCE"),t("td",{class:"border border-gray-400 p-1 text-right"},"UNIT COST"),t("td",{class:"border border-gray-400 p-1 text-right"},"AMOUNT")],-1)),(d(!0),n(y,null,D(S.value,s=>(d(),n("tr",{key:s.ITEMID},[t("td",Ct,o(s.ITEMNAME),1),t("td",ft,o(s.SPECIALORDER),1),r[15]||(r[15]=t("td",{class:"border border-gray-400 p-1 text-center"},null,-1)),r[16]||(r[16]=t("td",{class:"border border-gray-400 p-1 text-center"},null,-1)),t("td",vt,o(s.COST),1),t("td",At,o(s.COST*s.SPECIALORDER),1)]))),128)),t("tr",null,[r[17]||(r[17]=t("td",{colspan:"5",class:"border border-gray-400 p-1 text-right font-bold"},"TOTAL",-1)),t("td",Dt,o(O.value),1)])],64)):A("",!0),t("tr",null,[t("td",It,[r[19]||(r[19]=l(" ENDORSED BY:DISPATCHING")),r[20]||(r[20]=t("br",null,null,-1)),t("span",St,o(a[0].DISPATCHER),1),r[21]||(r[21]=t("br",null,null,-1)),r[22]||(r[22]=l(" BREADS/CAKES")),r[23]||(r[23]=t("br",null,null,-1)),r[24]||(r[24]=l(" NAME & SIGNATURE/ DATE "))]),t("td",Rt,[t("span",xt,o(a[0].LOGISTICS),1),r[25]||(r[25]=t("br",null,null,-1)),r[26]||(r[26]=l(" DELIVERED BY:LOGISTICS")),r[27]||(r[27]=t("br",null,null,-1)),r[28]||(r[28]=l(" NAME & SIGNATURE/ DATE "))])]),r[31]||(r[31]=t("tr",null,[t("td",{colspan:"6",class:"border border-gray-400 p-1 font-bold"},"CRATES QUANTITY DELIVERED")],-1)),r[32]||(r[32]=t("tr",null,[t("td",{colspan:"2",class:"border border-gray-400 p-1"},"ORANGE CRATES"),t("td",{colspan:"2",class:"border border-gray-400 p-1"},"BLUE CRATES"),t("td",{colspan:"2",class:"border border-gray-400 p-1"},"EMPANADA CRATES")],-1))])])]))),128))])])]),_:1})}}};export{$t as default};
