import{d as c,l as U,A as pe,k as lt,o as i,e as d,a as t,f as D,n as N,m as ze,F as O,h as Q,t as m,i as be,j as q,v as me,D as w,s as Pe,G as kt,b as ve,w as ot,a0 as _t,E as Ct,c as St,C as At,g as T,x as Re,u as at}from"./app-BNibTCyr.js";import{C,r as Tt}from"./chart-8SaNzrGi.js";import{_ as Dt}from"./AdminPanel-mtITC6Fj.js";import{_ as rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as st,I as Mt,r as zt,R as Pt,P as Rt}from"./CubeIcon-C8B6B1V1.js";import{_ as Lt}from"./MultiSelectDropdown-DL4nKWpb.js";/* empty css                                                                        */import"./RetailGroup-aZWFSXoe.js";import"./Logout-CW2hOaSD.js";/* empty css                                                             */import"./Modal-BIe7acJJ.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-BwnXT4mO.js";import"./RetailItems-B7IK_33H.js";import"./Attendance-CU-uXiMC.js";const Nt={class:"fixed bottom-6 right-6 z-50"},Bt={key:0,class:"relative"},$t={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold"},Vt={key:1,class:"bg-white rounded-lg shadow-2xl w-96 h-[500px] flex flex-col border border-gray-200 overflow-hidden"},Et={key:0,class:"text-center text-gray-500 text-sm"},jt={class:"text-left"},Ot={class:"space-y-1"},Ft=["onClick"],It={class:"text-sm whitespace-pre-wrap"},Wt={class:"text-xs opacity-70 mt-1 block"},Ht={key:1,class:"flex justify-start"},Ut={class:"p-4 bg-white border-t"},qt=["disabled"],Qt=["disabled"],Zt={key:0,class:"mt-2 flex space-x-1 overflow-x-auto"},Gt=["onClick"],Jt={__name:"FloatingChatBot",setup(Y){const z=c(!1),k=c([]),S=c(""),B=c(!1),$=c(!1),Z=c([]),V=c(null),ee=["Today's sales summary","Top performing items","Sales improvement tips","Store performance"],te=async()=>{z.value=!0,$.value=!1,k.value.length===0&&(await ae(),await se()),await pe(),j()},oe=()=>{z.value=!1},ae=async()=>{try{const f=await w.get(route("chatbot.welcome"));f.data.success&&k.value.push({type:"bot",content:f.data.message,timestamp:new Date})}catch(f){console.error("Failed to load welcome message:",f)}},se=async()=>{try{const f=await w.get(route("chatbot.sample.questions"));f.data.success&&(Z.value=f.data.questions)}catch(f){console.error("Failed to load sample questions:",f)}},G=async()=>{if(!S.value.trim())return;const f=S.value.trim();S.value="",k.value.push({type:"user",content:f,timestamp:new Date}),await pe(),j(),B.value=!0;try{const p=await w.post(route("chatbot.send.message"),{message:f});await new Promise(y=>setTimeout(y,1e3)),p.data.success&&p.data.response?k.value.push({type:"bot",content:p.data.response,timestamp:new Date}):k.value.push({type:"bot",content:p.data.message||"Sorry, I encountered an issue. Please try again.",timestamp:new Date})}catch(p){console.error("Failed to send message:",p),k.value.push({type:"bot",content:"Sorry, I'm having trouble connecting. Please check your internet connection and try again.",timestamp:new Date})}finally{B.value=!1,await pe(),j()}},J=f=>{S.value=f,G()},j=()=>{V.value&&(V.value.scrollTop=V.value.scrollHeight)},le=f=>new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return U(k,()=>{pe(()=>{j(),!z.value&&k.value.length>0&&($.value=!0)})},{deep:!0}),lt(()=>{setTimeout(()=>{!z.value&&k.value.length===0&&($.value=!0)},5e3)}),(f,p)=>(i(),d("div",Nt,[z.value?D("",!0):(i(),d("div",Bt,[t("button",{onClick:te,class:N(["bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 group",{"animate-pulse":$.value}])},[p[1]||(p[1]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.955 8.955 0 01-2.15-.26l-4.244 1.082a1 1 0 01-1.288-1.288l1.082-4.244A8.955 8.955 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})],-1)),$.value?(i(),d("div",$t," ! ")):D("",!0)],2),p[2]||(p[2]=t("div",{class:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap"}," AI Sales Assistant ",-1))])),z.value?(i(),d("div",Vt,[t("div",{class:"bg-blue-600 text-white px-4 py-3 flex items-center justify-between"},[p[4]||(p[4]=ze('<div class="flex items-center space-x-2" data-v-e65fb064><div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center" data-v-e65fb064><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e65fb064><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-e65fb064></path></svg></div><div data-v-e65fb064><h3 class="font-semibold text-sm" data-v-e65fb064>AI Sales Assistant</h3><p class="text-xs text-blue-100" data-v-e65fb064>Online</p></div></div>',1)),t("button",{onClick:oe,class:"text-blue-100 hover:text-white transition-colors duration-200"},p[3]||(p[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",{ref_key:"messagesContainer",ref:V,class:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50"},[k.value.length===0?(i(),d("div",Et,[p[6]||(p[6]=ze('<div class="mb-4" data-v-e65fb064><div class="w-16 h-16 bg-blue-100 rounded-full mx-auto flex items-center justify-center mb-2" data-v-e65fb064><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e65fb064><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-e65fb064></path></svg></div><p class="font-medium text-gray-700" data-v-e65fb064>Welcome to your AI Sales Assistant!</p><p class="text-xs text-gray-500 mt-1" data-v-e65fb064>Ask me about your sales performance, strategies, and insights.</p></div>',1)),t("div",jt,[p[5]||(p[5]=t("p",{class:"text-xs font-medium text-gray-600 mb-2"},"Try asking:",-1)),t("div",Ot,[(i(!0),d(O,null,Q(Z.value.slice(0,3),y=>(i(),d("button",{key:y,onClick:F=>J(y),class:"block w-full text-left px-3 py-2 bg-white rounded border text-xs hover:bg-blue-50 hover:border-blue-300 transition-colors duration-200"},' "'+m(y)+'" ',9,Ft))),128))])])])):D("",!0),(i(!0),d(O,null,Q(k.value,(y,F)=>(i(),d("div",{key:F,class:N(y.type==="user"?"flex justify-end":"flex justify-start")},[t("div",{class:N([y.type==="user"?"bg-blue-600 text-white rounded-l-lg rounded-tr-lg":"bg-white text-gray-800 rounded-r-lg rounded-tl-lg border","max-w-[80%] px-3 py-2 shadow-sm"])},[t("p",It,m(y.content),1),t("span",Wt,m(le(y.timestamp)),1)],2)],2))),128)),B.value?(i(),d("div",Ht,p[7]||(p[7]=[ze('<div class="bg-white text-gray-800 rounded-r-lg rounded-tl-lg border px-3 py-2 shadow-sm" data-v-e65fb064><div class="flex space-x-1" data-v-e65fb064><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" data-v-e65fb064></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-e65fb064></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-e65fb064></div></div></div>',1)]))):D("",!0)],512),t("div",Ut,[t("form",{onSubmit:be(G,["prevent"]),class:"flex space-x-2"},[q(t("input",{"onUpdate:modelValue":p[0]||(p[0]=y=>S.value=y),disabled:B.value,type:"text",placeholder:"Ask about sales, strategies, insights...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",maxlength:"1000"},null,8,qt),[[me,S.value]]),t("button",{type:"submit",disabled:!S.value.trim()||B.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-3 py-2 rounded-lg transition-colors duration-200"},p[8]||(p[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)]),8,Qt)],32),k.value.length>0?(i(),d("div",Zt,[(i(),d(O,null,Q(ee,y=>t("button",{key:y,onClick:F=>J(y),class:"flex-shrink-0 text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200"},m(y),9,Gt)),64))])):D("",!0)])])):D("",!0)]))}},Kt=rt(Jt,[["__scopeId","data-v-e65fb064"]]),Xt={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6 space-y-6 relative overflow-hidden"},Yt={class:"relative z-10 bg-white/80 rounded-3xl shadow-2xl border border-blue-100/50 p-6 transform transition-all duration-500 hover:scale-[1.02]"},eo={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},to={class:"flex flex-col w-full md:w-auto"},oo={class:"flex items-center space-x-4"},ao={class:"text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-3 animate-pulse-slow"},so={class:"flex space-x-4"},lo={class:"flex flex-col"},ro={class:"flex flex-col"},no={key:0,class:"text-red-500 text-xs mt-2 flex items-center space-x-2 animate-bounce"},io={class:"w-full md:w-auto"},co={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},uo={class:"bg-white/90 rounded-3xl shadow-xl border border-blue-100/50 p-6 space-y-4 relative overflow-hidden group"},go={class:"flex justify-between items-center relative z-10"},po={class:"relative z-10"},vo={class:"text-xs uppercase tracking-wider text-gray-500 mb-2"},bo={class:"text-sm text-gray-400 mt-2"},mo={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},fo={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},yo={class:"h-[400px] relative z-10"},ho={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},xo={class:"max-h-[400px] overflow-y-auto custom-scrollbar relative z-10"},wo={class:"font-semibold text-gray-800 mb-2"},ko={class:"text-gray-600 text-sm"},_o={key:1,class:"text-gray-500 text-center py-4 italic"},Co={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},So={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 relative z-10"},Ao={class:"flex items-center space-x-3"},To={class:"h-[500px] relative z-10"},Do={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Mo={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},zo={class:"h-[400px] relative z-10"},Po={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},Ro={class:"h-[400px] relative z-10"},Lo={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},No={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 relative z-10"},Bo={class:"flex items-center space-x-3"},$o={class:"w-80"},Vo={class:"block truncate text-gray-700"},Eo={key:0,class:"text-gray-500"},jo={key:1},Oo={key:2},Fo={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},Io={key:0,class:"absolute z-[9999] mt-1 w-full bg-white shadow-2xl border border-gray-300 rounded-lg overflow-hidden",style:{"background-color":"white !important"}},Wo={class:"p-3 border-b border-gray-200 bg-white",style:{"background-color":"white !important"}},Ho={class:"max-h-80 overflow-y-auto bg-white",style:{"background-color":"white !important"}},Uo={class:"border-b border-gray-100 bg-white",style:{"background-color":"white !important"}},qo=["checked","indeterminate"],Qo={class:"ml-3 font-medium text-gray-900"},Zo=["onClick"],Go=["checked"],Jo={class:"ml-3 flex-1"},Ko={class:"text-sm font-medium text-gray-900"},Xo={class:"text-xs text-gray-500"},Yo={key:0,class:"px-4 py-8 text-center text-gray-500"},ea={key:0,class:"text-xs text-gray-500 mt-1"},ta={key:1,class:"text-xs text-gray-500 mt-1"},oa={key:0,class:"text-blue-600"},aa={class:"h-[400px] relative z-0"},sa={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},la={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},ra={class:"h-[400px] relative z-10"},na={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},ia={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 relative z-10"},da={class:"flex items-center space-x-3"},ca={class:"h-[400px] relative z-10"},ua={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},ga={class:"h-[500px] relative z-10"},pa={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},va={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},ba={class:"h-[400px] relative z-10"},ma={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},fa={class:"flex justify-between items-start mb-6 relative z-10"},ya={class:"w-80"},ha={class:"block truncate text-gray-700"},xa={key:0,class:"text-gray-500"},wa={key:1},ka={key:2},_a={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},Ca={key:0,class:"absolute z-20 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"},Sa={class:"border-b border-gray-200"},Aa=["checked","indeterminate"],Ta=["onClick"],Da=["checked"],Ma={class:"ml-2 text-gray-900"},za={key:0,class:"text-xs text-gray-500 mt-1"},Pa={key:1,class:"text-xs text-gray-500 mt-1"},Ra={key:0,class:"text-orange-600"},La={class:"h-[400px] relative z-10"},Na={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},Ba={class:"h-[400px] relative z-10"},$a={__name:"admin",props:{username:{type:String,default:"User"},announcements:{type:Array,required:!0},metrics:{type:Object,required:!0,default:()=>({totalGross:0,totalNetsales:0,totalDiscount:0,totalCost:0,totalVat:0,totalVatableSales:0,paymentBreakdown:{cash:0,gcash:0,paymaya:0,card:0,loyaltyCard:0,foodPanda:0,grabFood:0}})}},setup(Y){C.register(...Tt),w.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content");const z=Y,k=c(z.metrics),S=c(""),B=c(null);let $=null;const Z=c(null);let V=null;c(null),c(null);const ee=c(null);let te=null;const oe=c(null);let ae=null;const se=c(null);let G=null;const J=c(null);let j=null;const le=c(null);let f=null;const p=c(null);let y=null;const F=c(null);let fe=null;const Le=c([]),_=c([]),re=c([]),b=c([]),E=c([]),x=c([]),ne=c(!1),ye=c(null),ie=c(!1),he=c(null),K=c(""),nt=async()=>{try{const a=await w.get(route("get.stores"));Le.value=a.data,_.value=a.data}catch(a){console.error("Error fetching stores:",a)}},it=async(a="")=>{try{console.log("Fetching products with search term:",a);const e=await w.get(route("get.products"),{params:{search:a}});console.log("Products loaded:",e.data.length),re.value=e.data}catch(e){console.error("Error fetching products:",e),e.response&&console.error("Products error response:",e.response.data)}},dt=async(a="")=>{try{console.log("Fetching categories...");const e=await w.get(route("get.categories"),{params:{search:a}});console.log("Categories response:",e.data),E.value=e.data}catch(e){console.error("Error fetching categories:",e),e.response&&console.error("Categories error response:",e.response.data)}},ct=a=>{const e=x.value.indexOf(a);e===-1?x.value.push(a):x.value.splice(e,1)},ut=()=>{x.value.length===E.value.length?x.value=[]:x.value=E.value.map(a=>a.value)},gt=a=>{const e=E.value.find(o=>o.value===a);return e?e.label:a},Ne=a=>{ye.value&&!ye.value.contains(a.target)&&(ne.value=!1)},pt=a=>{console.log("Toggling product:",a),console.log("Current selected products before toggle:",b.value);const e=b.value.indexOf(a);e===-1?(b.value.push(a),console.log("Added product:",a)):(b.value.splice(e,1),console.log("Removed product:",a)),console.log("Selected products after toggle:",b.value)},vt=()=>{b.value.length===P.value.length&&P.value.length>0?b.value=[]:b.value=P.value.map(a=>a.itemid)},bt=a=>{const e=re.value.find(o=>o.itemid===a);return e?e.itemname:a},P=Pe(()=>K.value?re.value.filter(a=>a.itemname.toLowerCase().includes(K.value.toLowerCase())||a.itemid.toLowerCase().includes(K.value.toLowerCase())):re.value),Be=mt(()=>{},300);function mt(a,e){let o;return function(...r){clearTimeout(o),o=setTimeout(()=>a.apply(this,r),e)}}const $e=a=>{he.value&&!he.value.contains(a.target)&&(ie.value=!1,K.value="")};c(null),c(!1);const xe=c(null),we=c(null);let ke=null,ue=null;const g=c((()=>{const a=new Date,e=new Date;return e.setDate(a.getDate()-30),{start_date:e.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0]}})()),de=c("all"),I=c("gross"),W=c("grossamount"),H=Pe(()=>{const a=new Date(g.value.start_date),e=new Date(g.value.end_date),o=new Date;return a<=e&&a<=o&&e<=o}),R=a=>{const e=Number(a);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(isNaN(e)?0:e)},ft=Pe(()=>{const a=k.value||{};return[{title:"TOTAL GROSS",value:R(a.totalGross),icon:st,color:"text-blue-600",bgColor:"bg-blue-100",description:"Total revenue before deductions"},{title:"TOTAL NETSALES",value:R(a.totalNetsales),icon:Mt,color:"text-green-600",bgColor:"bg-green-100",description:"Revenue after all deductions"},{title:"TOTAL DISCOUNT",value:R(a.totalDiscount),icon:st,color:"text-amber-600",bgColor:"bg-amber-100",description:"Sum of all applied discounts"},{title:"TOTAL COST",value:R(a.totalCost),icon:zt,color:"text-purple-600",bgColor:"bg-purple-100",description:"Aggregate cost of goods sold"},{title:"TOTAL VAT",value:R(a.totalVat),icon:Pt,color:"text-pink-600",bgColor:"bg-pink-100",description:"Value Added Tax collected"},{title:"VATABLE SALES",value:R(a.totalVatableSales),icon:Rt,color:"text-indigo-600",bgColor:"bg-indigo-100",description:"Sales subject to VAT"}]}),_e=()=>{var l;if(!xe.value)return;const a=xe.value.getContext("2d");ke&&ke.destroy();const e=((l=k.value)==null?void 0:l.paymentBreakdown)||{},o=Object.keys(e).map(s=>{const v=e[s],n=s.replace(/([A-Z])/g," $1").trim(),u=R(v);return`${n} (${u})`}),r=Object.values(e).map(s=>Number(s)||0);ke=new C(a,{type:"pie",data:{labels:o,datasets:[{data:r,backgroundColor:["#3B82F6","#10B981","#F43F5E","#6366F1","#8B5CF6","#EC4899","#F97316"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:function(s){const v=s.dataset.data.reduce((M,A)=>M+A,0),n=s.parsed,u=(n/v*100).toFixed(2);return`${s.label}: ${n.toFixed(2)} (${u}%)`}}}}}})},Ce=async()=>{var a,e,o;try{const r={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(u=>u.NAME||(typeof u=="object"?u.NAME:u)),product_type:de.value};console.log("Top/Bottom Products Payload:",r);const l=await w.post(route("get.top.bottom.products"),r);if(console.log("Top/Bottom Products Response:",l.data),console.log("Response Status:",l.status),l.status!==200)throw new Error(`API returned status: ${l.status}`);const s=Array.isArray((a=l==null?void 0:l.data)==null?void 0:a.topProducts)?l.data.topProducts:[],v=Array.isArray((e=l==null?void 0:l.data)==null?void 0:e.bottomProducts)?l.data.bottomProducts:[],n=((o=l==null?void 0:l.data)==null?void 0:o.summary)||{};console.log("Processed Data:",{topProductsCount:s.length,bottomProductsCount:v.length,summaryData:n}),Ve(s,v,n)}catch(r){console.error("Error fetching top/bottom products:",r),Ve([],[],{})}},Ve=(a,e,o={})=>{if(!we.value)return;const r=we.value.getContext("2d");if(ue&&ue.destroy(),(!a||a.length===0)&&(!e||e.length===0)){ue=new C(r,{type:"bar",data:{labels:["No Data Available"],datasets:[{label:"No products data available",data:[0],backgroundColor:"rgba(128, 128, 128, 0.3)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Popular Products & Products Under Monitoring (No Data)",font:{size:14,weight:"bold"}}}}});return}console.log("Top Products Data:",a),console.log("Bottom Products Data:",e);const l=(a||[]).slice(0,10),s=(e||[]).slice(0,10),v=l.map(h=>h.itemname||"Unknown"),n=s.map(h=>h.itemname||"Unknown"),u=l.map(h=>Number(h.total_sales||0)),M=s.map(h=>Number(h.total_sales||0)),A=[...v.map(h=>`üî• ${h}`),...n.map(h=>`‚ö†Ô∏è ${h}`)],L=[...u,...M],Te=[...Array(l.length).fill("rgba(34, 197, 94, 0.6)"),...Array(s.length).fill("rgba(239, 68, 68, 0.6)")],De=[...Array(l.length).fill("rgba(34, 197, 94, 1)"),...Array(s.length).fill("rgba(239, 68, 68, 1)")];ue=new C(r,{type:"bar",data:{labels:A,datasets:[{label:"Sales Amount (‚Ç±)",data:L,backgroundColor:Te,borderColor:De,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Popular Products & Products Under Monitoring ${(()=>{switch(de.value){case"regular":return"(Regular Products Only)";case"non_product":return"(Non Products Only)";default:return"(All Products)"}})()}`,font:{size:14,weight:"bold"}},legend:{display:!1},tooltip:{callbacks:{title:function(h){return h[0].label.replace(/üî•|‚ö†Ô∏è/g,"").trim()},label:function(h){const yt=h.parsed.y,Me=h.dataIndex;let X=`Sales: ‚Ç±${yt.toLocaleString()}`;const tt=Me<l.length,ce=tt?l[Me]:s[Me-l.length];if(ce){const ht=ce.product_category||"unknown",xt=ce.retail_department||"Unknown",wt=ce.store_count||0;X+=`
Quantity: ${(ce.total_quantity||0).toLocaleString()}`,X+=`
Category: ${ht==="non_product"?"Non Product":"Regular Product"}`,X+=`
Department: ${xt}`,X+=`
Stores: ${wt}`,X+=`
Type: ${tt?"Top Performer":"Under Monitoring"}`}return X}}}},scales:{x:{ticks:{maxRotation:45,minRotation:45,font:{size:10}}},y:{beginAtZero:!0,title:{display:!0,text:"Sales Amount (‚Ç±)"},ticks:{callback:function(h){return"‚Ç±"+h.toLocaleString()}}}}}})},Ee=async()=>{try{console.log("Selected Stores:",_.value);const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(o=>typeof o=="object"?o.NAME:o)};console.log("Payload for metrics:",a);const e=await w.post(route("get.metrics"),a);console.log("Metrics response:",e.data),k.value=e.data||z.metrics,_e()}catch(a){console.error("Error fetching metrics:",a),k.value=z.metrics,_e()}},je=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(o=>typeof o=="object"?o.NAME:o)},e=await w.post(route("get.monthly.sales"),a);Oe(e.data||[])}catch(a){console.error("Error fetching monthly sales:",a),Oe([])}},Oe=a=>{if(!B.value)return;const e=B.value.getContext("2d");$&&$.destroy();const o=Array.isArray(a)?a:[],r=o.length>0?o.map(s=>s.label):["No Data"],l=o.length>0?o.map(s=>s.total_sales):[0];$=new C(e,{type:"line",data:{labels:r,datasets:[{label:"Monthly Sales",data:l,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.1,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(s){return R(s.parsed.y)}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Sales Amount"},ticks:{callback:function(s){return R(s)}}}}}})},Fe=async()=>{var a,e;try{const o={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(v=>typeof v=="object"?v.NAME:v)},r=await w.post(route("get.top.wastes"),o);console.log("Waste Analysis Response:",r.data);const l=Array.isArray((a=r==null?void 0:r.data)==null?void 0:a.topWastesOverall)?r.data.topWastesOverall:[],s=Array.isArray((e=r==null?void 0:r.data)==null?void 0:e.wasteSummaryByType)?r.data.wasteSummaryByType:[];Ie(l,s)}catch(o){console.error("Error fetching top wastes:",o),Ie([],[])}},Ie=(a,e=[])=>{if(!Z.value)return;const o=Z.value.getContext("2d");if(V&&V.destroy(),!a||a.length===0){V=new C(o,{type:"bar",data:{labels:["No Data"],datasets:[{label:"No waste data available",data:[0],backgroundColor:"rgba(128, 128, 128, 0.3)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}});return}const r=a.slice(0,10).map(n=>{const u=n.itemname||n.ITEMID;return u.length>20?u.substring(0,20)+"...":u}),l=a.slice(0,10).map(n=>Math.abs(Number(n.total_waste_quantity||0))),s=a.slice(0,10).map(n=>Math.abs(Number(n.total_waste_cost||0))),v=a.slice(0,10).map(n=>n.waste_types||"Various");V=new C(o,{type:"bar",data:{labels:r,datasets:[{label:"Waste Quantity",data:l,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,yAxisID:"y"},{label:"Waste Cost (‚Ç±)",data:s,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,type:"line",yAxisID:"y1",fill:!1,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:"Top Waste Items (Stock Counting Analysis)",font:{size:14,weight:"bold"}},legend:{position:"top"},tooltip:{callbacks:{title:function(n){var A,L;const u=n[0].dataIndex;return((A=a[u])==null?void 0:A.itemname)||((L=a[u])==null?void 0:L.ITEMID)||"Unknown"},label:function(n){const u=n.parsed.y,M=n.dataset.label,A=n.dataIndex;v[A];let L=`${M}: `;return n.dataset.label==="Waste Cost (‚Ç±)"?L+=R(u):L+=u.toFixed(2)+" units",L},afterLabel:function(n){const u=n.dataIndex;return`Waste Types: ${v[u]}`}}}},scales:{x:{title:{display:!0,text:"Items"},ticks:{maxRotation:45,minRotation:45}},y:{type:"linear",display:!0,position:"left",beginAtZero:!0,title:{display:!0,text:"Waste Quantity (units)"},grid:{drawOnChartArea:!1}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,title:{display:!0,text:"Waste Cost (‚Ç±)"},grid:{drawOnChartArea:!0},ticks:{callback:function(n){return"‚Ç±"+n.toLocaleString()}}}}}})},ge=async()=>{var a,e;try{const o={start_date:g.value.start_date,end_date:g.value.end_date,filter_by:I.value,stores:_.value.map(l=>l.NAME||l),products:b.value};console.log("Fetching transaction sales with payload:",o),console.log("Selected products:",b.value),console.log("Selected stores:",_.value);const r=await w.post(route("get.transaction.sales"),o);console.log("Transaction sales response:",r.data),console.log("Transaction sales data count:",((e=(a=r.data)==null?void 0:a.data)==null?void 0:e.length)||0),We(r.data||{data:[],summary:{}})}catch(o){console.error("Error fetching transaction sales:",o),o.response&&console.error("Transaction sales error response:",o.response.data),We({data:[],summary:{}})}},We=a=>{if(!ee.value)return;const e=ee.value.getContext("2d");te&&te.destroy();const o=a.data||[];console.log("Initializing chart with data:",o);const r=o.map(s=>s.label),l=o.map(s=>s.total_value);console.log("Chart labels:",r),console.log("Chart values:",l),o.length===0&&console.log("No data to display in chart"),te=new C(e,{type:"line",data:{labels:r.length>0?r:["No Data"],datasets:[{label:I.value==="qty"?"Total Quantity":"Total Sales (‚Ç±)",data:l.length>0?l:[0],borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Transaction ${I.value==="qty"?"Quantity":"Sales"} Trend${b.value.length>0?` (${b.value.length} products selected)`:""}`,font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(s){return I.value==="qty"?s.toLocaleString()+" items":"‚Ç±"+s.toLocaleString()}}}}}})},He=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(o=>typeof o=="object"?o.NAME:o)},e=await w.post(route("get.sales.by.hour"),a);Ue(e.data||{data:[],summary:{}})}catch(a){console.error("Error fetching sales by hour:",a),Ue({data:[],summary:{}})}},Ue=a=>{if(!oe.value)return;const e=oe.value.getContext("2d");ae&&ae.destroy();const o=a.data||[],r=o.map(s=>s.label),l=o.map(s=>s.total_sales);ae=new C(e,{type:"bar",data:{labels:r,datasets:[{label:"Sales (‚Ç±)",data:l,backgroundColor:"rgba(16, 185, 129, 0.6)",borderColor:"rgba(16, 185, 129, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Hour",font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(s){return"‚Ç±"+s.toLocaleString()}}}}}})},Se=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(o=>typeof o=="object"?o.NAME:o),filter_by:W.value},e=await w.post(route("get.top.stores"),a);qe(e.data||{data:[],summary:{}})}catch(a){console.error("Error fetching top stores:",a),qe({data:[],summary:{}})}},qe=a=>{if(!se.value)return;const e=se.value.getContext("2d");G&&G.destroy();const o=a.data||[],r=o.map(s=>s.store),l=o.map(s=>s.total_value);G=new C(e,{type:"bar",data:{labels:r,datasets:[{label:Qe(W.value),data:l,backgroundColor:"rgba(139, 92, 246, 0.6)",borderColor:"rgba(139, 92, 246, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Top Stores by ${Qe(W.value)}`,font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{x:{ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,ticks:{callback:function(s){return W.value==="qty"?s.toLocaleString()+" items":"‚Ç±"+s.toLocaleString()}}}}}})},Qe=a=>({grossamount:"Gross Amount",discamount:"Discount Amount",netamount:"Net Amount",qty:"Quantity"})[a]||"Gross Amount",Ze=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(o=>typeof o=="object"?o.NAME:o)},e=await w.post(route("get.advanced.analysis"),a);Ge(e.data||{salesTrend:[],storeComparison:[],categoryPerformance:[]})}catch(a){console.error("Error fetching advanced analysis:",a),Ge({salesTrend:[],storeComparison:[],categoryPerformance:[]})}},Ge=a=>{if(!J.value)return;const e=J.value.getContext("2d");j&&j.destroy();const o=a.salesTrend||[],r=o.map(n=>n.label),l=o.map(n=>n.gross_sales),s=o.map(n=>n.net_sales),v=o.map(n=>n.discount_amount);j=new C(e,{type:"line",data:{labels:r,datasets:[{label:"Gross Sales",data:l,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4},{label:"Net Sales",data:s,borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4},{label:"Discounts",data:v,borderColor:"rgba(239, 68, 68, 1)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Advanced Sales Analysis",font:{size:14,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(n){return"‚Ç±"+n.toLocaleString()}}}}}})},Je=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(o=>typeof o=="object"?o.NAME:o)},e=await w.post(route("get.received.delivery.vs.sales"),a);Ke(e.data||{data:[],summary:{}})}catch(a){console.error("Error fetching received delivery vs sales:",a),Ke({data:[],summary:{}})}},Ke=a=>{if(!le.value)return;const e=le.value.getContext("2d");f&&f.destroy();const o=a.data||[],r=o.map(v=>v.label),l=o.map(v=>v.received_delivery),s=o.map(v=>v.total_sales);f=new C(e,{type:"line",data:{labels:r,datasets:[{label:"Received Delivery",data:l,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!1},{label:"Total Sales",data:s,borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Received Delivery vs Sales",font:{size:14,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(v){return v.toLocaleString()+" units"}}}}}})},Ae=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(o=>typeof o=="object"?o.NAME:o),categories:x.value};console.log("Fetching sales by category with payload:",a);const e=await w.post(route("get.sales.by.category"),a);console.log("Sales by category response:",e.data),Xe(e.data||{data:[],summary:{}})}catch(a){console.error("Error fetching sales by category:",a),a.response&&console.error("Error response:",a.response.data),Xe({data:[],summary:{}})}},Xe=a=>{if(!p.value)return;const e=p.value.getContext("2d");y&&y.destroy();const o=a.data||[];if(!o||o.length===0){y=new C(e,{type:"doughnut",data:{labels:["No Data Available"],datasets:[{data:[1],backgroundColor:["rgba(128, 128, 128, 0.3)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Category (No Data)",font:{size:14,weight:"bold"}},legend:{display:!1}}}});return}const r=o.slice(0,10),l=o.slice(10);let s=r.map(u=>u.category),v=r.map(u=>u.total_sales);if(l.length>0){const u=l.reduce((M,A)=>M+A.total_sales,0);s.push(`Others (${l.length} categories)`),v.push(u)}const n=["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(34, 197, 94, 0.8)","rgba(168, 85, 247, 0.8)","rgba(251, 146, 60, 0.8)","rgba(14, 165, 233, 0.8)","rgba(156, 163, 175, 0.8)"];y=new C(e,{type:"doughnut",data:{labels:s,datasets:[{data:v,backgroundColor:n.slice(0,s.length),borderColor:n.slice(0,s.length).map(u=>u.replace("0.8","1")),borderWidth:2,hoverOffset:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Category",font:{size:14,weight:"bold"}},legend:{position:"right",labels:{padding:15,usePointStyle:!0,font:{size:11}}},tooltip:{callbacks:{label:function(u){const M=u.dataset.data.reduce((Te,De)=>Te+De,0),A=u.parsed,L=(A/M*100).toFixed(1);return`${u.label}: ‚Ç±${A.toLocaleString()} (${L}%)`}}}}}})},Ye=async()=>{try{const a={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(o=>typeof o=="object"?o.NAME:o)},e=await w.post(route("get.top.variance.stores"),a);et(e.data||{data:[],summary:{}})}catch(a){console.error("Error fetching top variance stores:",a),et({data:[],summary:{}})}},et=a=>{if(!F.value)return;const e=F.value.getContext("2d");fe&&fe.destroy();const o=a.data||[],r=o.map(s=>s.store),l=o.map(s=>s.total_variance);fe=new C(e,{type:"bar",data:{labels:r,datasets:[{label:"Total Variance",data:l,backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Top 10 Stores Under Monitoring (Highest Variances)",font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{x:{ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,ticks:{callback:function(s){return s.toLocaleString()+" units"}}}}}})};return U([()=>g.value.start_date,()=>g.value.end_date,()=>JSON.stringify(_.value)],()=>{H.value?(S.value="",Ee(),Ce(),je(),Fe(),ge(),He(),Se(),Ze(),Je(),Ae(),Ye()):S.value="Invalid date range. Please check your selections."}),U(()=>de.value,()=>{H.value&&Ce()}),U(()=>I.value,()=>{H.value&&ge()}),U(()=>W.value,()=>{H.value&&Se()}),U(()=>JSON.stringify(b.value),()=>{console.log("Products watcher triggered, new products:",b.value),console.log("Is valid date range:",H.value),H.value&&(console.log("Calling fetchTransactionSales from watcher"),ge())}),U(()=>JSON.stringify(x.value),()=>{H.value&&Ae()}),lt(()=>{_e(),nt(),it(),dt(),Ee(),Ce(),je(),Fe(),ge(),He(),Se(),Ze(),Je(),Ae(),Ye(),document.addEventListener("click",Ne),document.addEventListener("click",$e)}),kt(()=>{document.removeEventListener("click",Ne),document.removeEventListener("click",$e)}),(a,e)=>(i(),d(O,null,[ve(Dt,{"active-tab":"DASHBOARD"},{main:ot(()=>[t("div",Xt,[e[52]||(e[52]=t("div",{class:"absolute inset-0 opacity-10 bg-pattern z-0"},null,-1)),t("div",Yt,[t("div",eo,[t("div",to,[t("div",oo,[t("h1",ao," Welcome back, "+m(Y.username)+"! üëã ",1),t("div",so,[t("div",lo,[e[11]||(e[11]=t("label",{class:"text-sm font-medium text-gray-600 mb-1"},"Start Date",-1)),q(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=o=>g.value.start_date=o),class:N(["border-2 border-blue-200 rounded-xl px-4 py-2 focus:ring-4 focus:ring-blue-300/50 transition-all duration-300",{"border-red-500":S.value}])},null,2),[[me,g.value.start_date]])]),t("div",ro,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-gray-600 mb-1"},"End Date",-1)),q(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=o=>g.value.end_date=o),class:N(["border-2 border-blue-200 rounded-xl px-4 py-2 focus:ring-4 focus:ring-blue-300/50 transition-all duration-300",{"border-red-500":S.value}])},null,2),[[me,g.value.end_date]])])])]),S.value?(i(),d("div",no,[e[13]||(e[13]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),t("span",null,m(S.value),1)])):D("",!0)]),t("div",io,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Stores",-1)),ve(Lt,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=o=>_.value=o),options:Le.value,multiple:!0,class:"w-full md:w-64"},null,8,["modelValue","options"])])])]),t("div",co,[ve(_t,{"enter-active-class":"transition-all duration-700 ease-out","enter-from-class":"opacity-0 translate-y-10","enter-to-class":"opacity-100 translate-y-0"},{default:ot(()=>[(i(!0),d(O,null,Q(ft.value,(o,r)=>(i(),d("div",{key:o.title,class:"transform transition-all duration-300 hover:-translate-y-2 hover:scale-105 metric-card"},[t("div",uo,[t("div",{class:"absolute inset-0 opacity-20 group-hover:opacity-30 transition-all duration-300",style:Ct({background:`linear-gradient(135deg, ${o.color}, transparent)`})},null,4),t("div",go,[t("div",{class:N([o.bgColor,"p-3 rounded-xl shadow-md transform transition-all group-hover:rotate-12"])},[(i(),St(At(o.icon),{class:N([o.color,"w-7 h-7"])},null,8,["class"]))],2)]),t("div",po,[t("p",vo,m(o.title),1),t("p",{class:N([o.color,"text-3xl font-bold"])},m(o.value),3),t("p",bo,m(o.description),1)]),e[15]||(e[15]=t("div",{class:"absolute top-0 left-0 w-24 h-24 bg-opacity-20 rounded-full bg-blue-300 opacity-0 group-hover:opacity-100 transition-all duration-300"},null,-1))])]))),128))]),_:1})]),t("div",mo,[t("div",fo,[e[16]||(e[16]=t("div",{class:"absolute inset-0 opacity-10 bg-blue-100"},null,-1)),e[17]||(e[17]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a.5.5 0 11-1 0 .5.5 0 011 0zm4 5a.5.5 0 11-1 0 .5.5 0 011 0z"})]),T(" Payment Methods Distribution ")],-1)),t("div",yo,[t("canvas",{ref_key:"chartRef",ref:xe,class:"w-full h-full"},null,512)])]),t("div",ho,[e[18]||(e[18]=t("div",{class:"absolute inset-0 opacity-10 bg-green-100"},null,-1)),e[19]||(e[19]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})]),T(" Recent Announcements ")],-1)),t("div",xo,[Y.announcements.length?(i(!0),d(O,{key:0},Q(Y.announcements,(o,r)=>(i(),d("div",{key:r,class:"bg-white/60 p-4 rounded-xl border border-blue-100 mb-4 hover:border-blue-300 transition-all duration-300 hover:shadow-lg"},[t("h4",wo,m(o.title),1),t("p",ko,m(o.description),1)]))),128)):(i(),d("p",_o," No announcements available "))])])]),t("div",Co,[e[23]||(e[23]=t("div",{class:"absolute inset-0 opacity-10 bg-purple-100"},null,-1)),t("div",So,[e[22]||(e[22]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center mb-3 sm:mb-0"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),T(" Popular Products & Products Under Monitoring ")],-1)),t("div",Ao,[e[21]||(e[21]=t("label",{for:"productTypeFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),q(t("select",{id:"productTypeFilter","onUpdate:modelValue":e[3]||(e[3]=o=>de.value=o),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors duration-200"},e[20]||(e[20]=[t("option",{value:"all"},"All Products",-1),t("option",{value:"regular"},"Regular Products Only",-1),t("option",{value:"non_product"},"Non Products Only",-1)]),512),[[Re,de.value]])])]),t("div",To,[t("canvas",{ref_key:"topBottomProductsRef",ref:we,class:"w-full h-full"},null,512)])]),t("div",Do,[t("div",Mo,[e[24]||(e[24]=t("div",{class:"absolute inset-0 opacity-10 bg-teal-100"},null,-1)),e[25]||(e[25]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"}," Monthly Sales Trend ",-1)),t("div",zo,[t("canvas",{ref_key:"monthlySalesRef",ref:B,class:"w-full h-full"},null,512)])]),t("div",Po,[e[26]||(e[26]=t("div",{class:"absolute inset-0 opacity-10 bg-red-100"},null,-1)),e[27]||(e[27]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})]),T(" Top Waste Items (Stock Counting Analysis) ")],-1)),t("div",Ro,[t("canvas",{ref_key:"topWasteRef",ref:Z,class:"w-full h-full"},null,512)])])]),t("div",Lo,[e[34]||(e[34]=t("div",{class:"absolute inset-0 opacity-10 bg-blue-100"},null,-1)),t("div",No,[e[33]||(e[33]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center mb-3 sm:mb-0"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),T(" Transaction Sales Trend ")],-1)),t("div",Bo,[e[32]||(e[32]=t("label",{for:"transactionSalesFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),q(t("select",{id:"transactionSalesFilter","onUpdate:modelValue":e[4]||(e[4]=o=>I.value=o),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"},e[28]||(e[28]=[t("option",{value:"gross"},"Gross Amount",-1),t("option",{value:"qty"},"Quantity",-1)]),512),[[Re,I.value]]),t("div",$o,[e[31]||(e[31]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Products (Optional)",-1)),t("div",{class:"relative",ref_key:"transactionProductDropdownRef",ref:he},[t("button",{onClick:e[5]||(e[5]=o=>ie.value=!ie.value),type:"button",class:"relative w-full bg-white border border-gray-300 rounded-lg shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-colors duration-200"},[t("span",Vo,[b.value.length===0?(i(),d("span",Eo,"Search and select products...")):b.value.length===1?(i(),d("span",jo,m(bt(b.value[0])),1)):(i(),d("span",Oo,m(b.value.length)+" products selected",1))]),t("span",Fo,[(i(),d("svg",{class:N(["h-4 w-4 text-gray-400 transition-transform duration-200",{"rotate-180":ie.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e[29]||(e[29]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])]),ie.value?(i(),d("div",Io,[t("div",Wo,[q(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>K.value=o),onInput:e[7]||(e[7]=(...o)=>at(Be)&&at(Be)(...o)),onClick:e[8]||(e[8]=be(()=>{},["stop"])),type:"text",placeholder:"Search products by name or ID...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},null,544),[[me,K.value]])]),t("div",Ho,[t("div",Uo,[t("div",{class:"px-4 py-3 cursor-pointer hover:bg-blue-100 flex items-center select-none",onClick:be(vt,["stop","prevent"])},[t("input",{type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",checked:b.value.length===P.value.length&&P.value.length>0,indeterminate:b.value.length>0&&b.value.length<P.value.length,tabindex:"-1",readonly:""},null,8,qo),t("span",Qo," Select All ("+m(P.value.length)+" items) ",1)])]),(i(!0),d(O,null,Q(P.value,o=>(i(),d("div",{key:o.itemid,class:"px-4 py-2 cursor-pointer hover:bg-blue-50 flex items-center border-b border-gray-50 select-none bg-white",style:{"background-color":"white !important"},onClick:be(r=>pt(o.itemid),["stop","prevent"])},[t("input",{type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",checked:b.value.includes(o.itemid),tabindex:"-1",readonly:""},null,8,Go),t("div",Jo,[t("div",Ko,m(o.itemname),1),t("div",Xo,"ID: "+m(o.itemid),1)])],8,Zo))),128)),P.value.length===0?(i(),d("div",Yo,e[30]||(e[30]=[t("div",{class:"text-sm"},"No products found",-1),t("div",{class:"text-xs mt-1"},"Try different search terms",-1)]))):D("",!0)])])):D("",!0)],512),re.value.length===0?(i(),d("div",ea,"Loading products...")):(i(),d("div",ta,[T(m(P.value.length)+" products available ",1),b.value.length>0?(i(),d("span",oa," ("+m(b.value.length)+" selected) ",1)):D("",!0)]))])])]),t("div",aa,[t("canvas",{ref_key:"transactionSalesRef",ref:ee,class:"w-full h-full"},null,512)])]),t("div",sa,[t("div",la,[e[35]||(e[35]=t("div",{class:"absolute inset-0 opacity-10 bg-green-100"},null,-1)),e[36]||(e[36]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),T(" Sales by Hour ")],-1)),t("div",ra,[t("canvas",{ref_key:"salesByHourRef",ref:oe,class:"w-full h-full"},null,512)])]),t("div",na,[e[40]||(e[40]=t("div",{class:"absolute inset-0 opacity-10 bg-purple-100"},null,-1)),t("div",ia,[e[39]||(e[39]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center mb-3 sm:mb-0"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),T(" Top Stores Performance ")],-1)),t("div",da,[e[38]||(e[38]=t("label",{for:"topStoresFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),q(t("select",{id:"topStoresFilter","onUpdate:modelValue":e[9]||(e[9]=o=>W.value=o),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors duration-200"},e[37]||(e[37]=[t("option",{value:"grossamount"},"Gross Amount",-1),t("option",{value:"discamount"},"Discount Amount",-1),t("option",{value:"netamount"},"Net Amount",-1),t("option",{value:"qty"},"Quantity",-1)]),512),[[Re,W.value]])])]),t("div",ca,[t("canvas",{ref_key:"topStoresRef",ref:se,class:"w-full h-full"},null,512)])])]),t("div",ua,[e[41]||(e[41]=t("div",{class:"absolute inset-0 opacity-10 bg-indigo-100"},null,-1)),e[42]||(e[42]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),T(" Advanced Data Analysis ")],-1)),t("div",ga,[t("canvas",{ref_key:"advancedAnalysisRef",ref:J,class:"w-full h-full"},null,512)])]),t("div",pa,[t("div",va,[e[43]||(e[43]=t("div",{class:"absolute inset-0 opacity-10 bg-cyan-100"},null,-1)),e[44]||(e[44]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-cyan-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})]),T(" Received Delivery vs Sales ")],-1)),t("div",ba,[t("canvas",{ref_key:"receivedDeliveryVsSalesRef",ref:le,class:"w-full h-full"},null,512)])]),t("div",ma,[e[49]||(e[49]=t("div",{class:"absolute inset-0 opacity-10 bg-orange-100"},null,-1)),t("div",fa,[e[48]||(e[48]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),T(" Sales by Category ")],-1)),t("div",ya,[e[47]||(e[47]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Filter Categories (Optional)",-1)),t("div",{class:"relative",ref_key:"categoryDropdownRef",ref:ye},[t("button",{onClick:e[10]||(e[10]=o=>ne.value=!ne.value),type:"button",class:"relative w-full bg-white border border-gray-300 rounded-lg shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 sm:text-sm transition-colors duration-200"},[t("span",ha,[x.value.length===0?(i(),d("span",xa,"Select categories...")):x.value.length===1?(i(),d("span",wa,m(gt(x.value[0])),1)):(i(),d("span",ka,m(x.value.length)+" categories selected",1))]),t("span",_a,[(i(),d("svg",{class:N(["h-4 w-4 text-gray-400 transition-transform duration-200",{"rotate-180":ne.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e[45]||(e[45]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])]),ne.value?(i(),d("div",Ca,[t("div",Sa,[t("div",{class:"px-3 py-2 cursor-pointer hover:bg-orange-50 flex items-center transition-colors duration-150",onClick:ut},[t("input",{type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded",checked:x.value.length===E.value.length,indeterminate:x.value.length>0&&x.value.length<E.value.length,readonly:""},null,8,Aa),e[46]||(e[46]=t("span",{class:"ml-2 font-medium text-gray-900"},"Select All",-1))])]),(i(!0),d(O,null,Q(E.value,o=>(i(),d("div",{key:o.value,class:"px-3 py-2 cursor-pointer hover:bg-orange-50 flex items-center transition-colors duration-150",onClick:r=>ct(o.value)},[t("input",{type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded",checked:x.value.includes(o.value),readonly:""},null,8,Da),t("span",Ma,m(o.label),1)],8,Ta))),128))])):D("",!0)],512),E.value.length===0?(i(),d("div",za,"Loading categories...")):(i(),d("div",Pa,[T(m(E.value.length)+" categories available ",1),x.value.length>0?(i(),d("span",Ra," ("+m(x.value.length)+" selected) ",1)):D("",!0)]))])]),t("div",La,[t("canvas",{ref_key:"salesByCategoryRef",ref:p,class:"w-full h-full"},null,512)])])]),t("div",Na,[e[50]||(e[50]=t("div",{class:"absolute inset-0 opacity-10 bg-red-100"},null,-1)),e[51]||(e[51]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})]),T(" Top 10 Stores Under Monitoring (Highest Variances) ")],-1)),t("div",Ba,[t("canvas",{ref_key:"topVarianceStoresRef",ref:F,class:"w-full h-full"},null,512)])])])]),_:1}),ve(Kt)],64))}},Xa=rt($a,[["__scopeId","data-v-40c692c8"]]);export{Xa as default};
