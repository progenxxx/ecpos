import{R as S}from"./RetailItems-CjOIxooj.js";import{P as R}from"./PartyCake143-Di4gRlu7.js";import{d as i,T as U,G as w,p as y,e as b,a as t,t as g,b as o,w as l,o as v,n as h,f as $,g as q,u as C,C as G}from"./app-CacuESpm.js";/* empty css                                                             */import{C as k}from"./Cart-CNbd93Qn.js";import{_ as m}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-Oe7tEmQB.js";/* empty css                                                               *//* empty css                                                               */import{T as E}from"./TableContainer-D6l808Wc.js";import{S as F}from"./Save-CFLLzL9K.js";import{B as z}from"./Back-CPB2HwX9.js";import{P as f,D as L}from"./dataTables-BnFpA0RH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"flex flex-col min-h-screen"},Y={class:"sticky top-0 bg-navy shadow-md z-10 mb-5"},W={class:"container mx-auto px-4 py-3 flex justify-between items-center"},H={class:"text-sm font-bold text-white"},J={class:"flex-grow px-4 pb-20"},X={class:"flex justify-start items-center"},K={class:"mb-4"},Q={class:"flex flex-wrap justify-start items-center"},Z={class:"fixed bottom-0 left-0 right-0 bg-navy shadow-lg"},ee={class:"flex justify-around items-center h-16 relative"},te={href:"/m-retail",class:"flex flex-col items-center text-white"},se={href:"/m-partycakes",class:"flex flex-col items-center text-white"},oe={href:"/m-orders",class:"flex flex-col items-center text-white"},ye={__name:"m-itemorder",props:{inventjournaltransrepos:{type:Array,required:!0},inventjournaltrans:{type:Array,required:!0},journalid:{type:[String,Number],required:!0},items:{type:Array,required:!0}},setup(u){f.use(L);const p=i("");i(""),i(""),i(!1);const j=i(!1);i(!1);const D=u,T=[{data:"itemname",title:"ITEMNAME"},{data:"COUNTED",title:"COUNTED",render:function(s,e,r){return e==="display"?`<input type="number" class="counted-input form-input block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" value="${Number(s).toFixed(0)}" min="0" step="1">`:s}}],x={paging:!1,scrollX:!0,scrollY:"70vh",scrollCollapse:!0,drawCallback:function(s){this.api().rows().every(function(){const r=this.data(),n=this.node().querySelector(".counted-input");n&&n.addEventListener("change",M=>A(M,r))})}},I=s=>{p.value=s,j.value=!0,console.log(p.value)};U({StartDate:"",EndDate:""});const N=()=>{window.location.href="/order"},V=s=>{window.location.href=`/ViewOrders/${s}`},_=i([]),d=w({}),a=w({text:"",type:""}),A=(s,e)=>{const r=s.target.value;d[e.ITEMID]=r},O=async()=>{try{if(a.text="Updating counted values...",a.type="info",(await G.post("/api/update-all-counted-values",{journalId:D.journalid,updatedValues:d})).data.success){console.log("All values updated successfully");for(const[e,r]of Object.entries(d)){const c=_.value.find(n=>n.ITEMID===e);c&&(c.COUNTED=r)}Object.keys(d).forEach(e=>delete d[e]),a.text="All counted values updated successfully",a.type="success",location.reload()}else throw new Error("Update failed")}catch(s){console.error("You don't have any changes!",s),a.text="You don't have any changes!",a.type="error"}B()},B=()=>{setTimeout(()=>{a.text="",a.type=""},5e3)};return(s,e)=>{const r=y("ExcelIcon"),c=y("SuccessButton");return v(),b("div",P,[t("header",Y,[t("div",W,[e[3]||(e[3]=t("h1",{class:"text-sm font-bold text-white"},"ECORDER",-1)),t("h1",H,g(s.$page.props.auth.user.name),1)])]),t("main",J,[o(E,null,{default:l(()=>[a.text?(v(),b("div",{key:0,class:h(["p-4 mb-4 rounded-md",a.type==="success"?"bg-green-100 text-green-700":a.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},g(a.text),3)):$("",!0),t("div",{class:h(["absolute adjust",{"mt-20":a.text}])},[t("div",X,[o(m,{type:"button",onClick:N,class:"m-1 ml-2 bg-navy p-10"},{default:l(()=>[o(z,{class:"h-5"})]),_:1}),o(m,{type:"button",onClick:e[0]||(e[0]=n=>I(u.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:l(()=>e[4]||(e[4]=[q(" GENERATE ")])),_:1}),o(m,{type:"button",onClick:O,class:"m-1 ml-2 bg-navy p-10"},{default:l(()=>[o(F,{class:"h-5"})]),_:1}),o(m,{type:"button",onClick:e[1]||(e[1]=n=>V(u.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:l(()=>[o(k,{class:"h-5"})]),_:1})])],2),o(C(f),{data:u.inventjournaltransrepos,columns:T,class:"w-full relative display",options:x},{action:l(n=>e[5]||(e[5]=[t("label",{class:"inline-flex items-center"},[t("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600 rounded-full"}),t("span",{class:"ml-2 text-gray-700"})],-1)])),_:1},8,["data"])]),_:1}),o(E,{class:"hidden overflow-x-auto mt-8"},{default:l(()=>[t("div",K,[t("div",Q,[t("button",{onClick:e[2]||(e[2]=(...n)=>s.generateAndDownloadTextFile&&s.generateAndDownloadTextFile(...n)),class:"mb-2 mr-2"},"Generate and Download Text File"),o(c,{type:"button",onClick:s.exportToExcel,class:"bg-green"},{default:l(()=>[o(r,{class:"h-4"})]),_:1},8,["onClick"])])]),o(C(f),{data:s.orders,columns:s.txtfilecolumns,class:"w-full relative display",options:x},{action:l(n=>e[6]||(e[6]=[t("div",{class:"flex justify-start"},null,-1)])),_:1},8,["data","columns"])]),_:1})]),t("nav",Z,[t("div",ee,[e[10]||(e[10]=t("a",{href:"/dashboard",class:"flex flex-col items-center text-blue-400"},[t("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})]),t("span",{class:"text-xs mt-1"},"Home")],-1)),t("a",te,[o(S,{class:"w-5 sm:w-6"}),e[7]||(e[7]=t("span",{class:"text-xs mt-1"},"Retail",-1))]),e[11]||(e[11]=t("button",{onclick:"window.location.href='/m-order'",class:"absolute left-1/2 top-0 transform -translate-x-1/2 -translate-y-1/2 w-14 h-14 bg-blue-700 rounded-full shadow-lg flex items-center justify-center border-2 border-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},[t("span",{class:"text-xs mt-1 font-bold text-white"},"EC")],-1)),t("a",se,[o(R,{class:"w-5 sm:w-6"}),e[8]||(e[8]=t("span",{class:"text-xs mt-1"},"Cakes",-1))]),t("a",oe,[o(k,{class:"w-5 sm:w-6"}),e[9]||(e[9]=t("span",{class:"text-xs mt-1"},"Orders",-1))])])])])}}};export{ye as default};
