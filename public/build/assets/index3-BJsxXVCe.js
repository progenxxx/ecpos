import{C as L}from"./Create-DAU1riZ8.js";import{G as J,_ as q}from"./CopyFrom-D991gLfc.js";import{_ as u}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-DsXaYi2t.js";import{T as H}from"./TableContainer-PwYTmfDA.js";import{_ as W}from"./Main-CQ_whzxT.js";import{S as Y}from"./Save-CyUTnkDp.js";import{B as F}from"./Back-CCs1-C1O.js";import{A as P}from"./Add-D-ME3vlh.js";import{C as _}from"./Cart-BNCzhD23.js";import{d as r,T as z,H as b,c as X,w as l,o as w,b as a,e as K,t as Q,n as C,f as Z,a as c,g as h,u as ee,D as te}from"./app-DwAHA_Mt.js";import{P as x,D as ae}from"./dataTables-7Vvj0GSY.js";import"./Modal-DosvBnh2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-DMqsnpds.js";/* empty css                                                               *//* empty css                                                               */import"./Logout-96D5XcFa.js";/* empty css                                                             */import"./PartyCake143-DpGG8J3p.js";import"./Attendance-CVSU-1NF.js";const oe={class:"flex justify-start items-center"},Ie={__name:"index3",props:{inventjournaltransrepos:{type:Array,required:!0},inventjournaltrans:{type:Array,required:!0},journalid:{type:[String,Number],required:!0},items:{type:Array,required:!0}},setup(i){x.use(ae);const n=r("");r("");const D=r(""),g=r(!1),p=r(!1),f=r(!1),y=i,I=[{data:"ITEMID",title:"ITEMID"},{data:"itemname",title:"ITEMNAME"},{data:"itemgroup",title:"CATEGORY"},{data:"COUNTED",title:"COUNTED",render:function(t,e,s){return e==="display"?`<input type="number" class="counted-input form-input block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" value="${Number(t).toFixed(0)}" min="0" step="1">`:t}}],A={paging:!1,scrollX:!0,scrollY:"70vh",scrollCollapse:!0,drawCallback:function(t){this.api().rows().every(function(){const s=this.data(),m=this.node().querySelector(".counted-input");m&&m.addEventListener("change",G=>V(G,s))})}},E=(t,e)=>{n.value=t,D.value=e,f.value=!0,console.log(n.value)},N=t=>{n.value=t,p.value=!0,console.log(n.value)},T=()=>{f.value=!1},O=()=>{p.value=!1},k=()=>{g.value=!1};z({StartDate:"",EndDate:""});const M=()=>{window.location.href="/order"},j=t=>{window.location.href=`/ViewOrders/${t}`},U=t=>{console.log("Selected Item:",t)},R=r([]),d=b({}),o=b({text:"",type:""}),V=(t,e)=>{const s=t.target.value;d[e.ITEMID]=s},B=async()=>{try{if(o.text="Updating counted values...",o.type="info",(await te.post("/api/update-all-counted-values3",{journalId:y.journalid,updatedValues:d})).data.success){console.log("All values updated successfully");for(const[e,s]of Object.entries(d)){const v=R.value.find(m=>m.ITEMID===e);v&&(v.COUNTED=s)}Object.keys(d).forEach(e=>delete d[e]),o.text="All counted values updated successfully",o.type="success",location.reload()}else throw new Error("Update failed")}catch(t){console.error("You don't have any changes!",t),o.text="You don't have any changes!",o.type="error"}S()},S=()=>{setTimeout(()=>{o.text="",o.type=""},5e3)},$=t=>{window.location.href=`/warehouse/orders/${t}`};return(t,e)=>(w(),X(W,{"active-tab":"ORDER"},{modals:l(()=>[a(L,{"show-modal":f.value,JOURNALID:n.value,items:y.items,onToggleActive:T,onSelectItem:U},null,8,["show-modal","JOURNALID","items"]),a(J,{"show-modal":p.value,JOURNALID:n.value,onToggleActive:O},null,8,["show-modal","JOURNALID"]),a(q,{"show-modal":g.value,JOURNALID:n.value,onToggleActive:k},null,8,["show-modal","JOURNALID"])]),main:l(()=>[a(H,null,{default:l(()=>[o.text?(w(),K("div",{key:0,class:C(["p-4 mb-4 rounded-md",o.type==="success"?"bg-green-100 text-green-700":o.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},Q(o.text),3)):Z("",!0),c("div",{class:C(["absolute adjust",{"mt-20":o.text}])},[c("div",oe,[a(u,{type:"button",onClick:M,class:"m-1 ml-2 bg-navy p-10"},{default:l(()=>[a(F,{class:"h-5"})]),_:1}),a(u,{type:"button",onClick:e[0]||(e[0]=s=>E(i.journalid)),class:"m-6 bg-navy"},{default:l(()=>[a(P,{class:"h-5"})]),_:1}),a(u,{type:"button",onClick:e[1]||(e[1]=s=>N(i.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:l(()=>e[4]||(e[4]=[h(" GENERATE ")])),_:1}),a(u,{type:"button",onClick:B,class:"m-1 ml-2 bg-navy p-10"},{default:l(()=>[a(Y,{class:"h-5"})]),_:1}),a(u,{type:"button",onClick:e[2]||(e[2]=s=>j(i.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:l(()=>[a(_,{class:"h-5"})]),_:1}),a(u,{type:"button",onClick:e[3]||(e[3]=s=>$(i.journalid)),class:"m-1 bg-red-900"},{default:l(()=>e[5]||(e[5]=[h(" WAREHOUSE ")])),_:1})])],2),a(ee(x),{data:i.inventjournaltransrepos,columns:I,class:"w-full relative display",options:A},{action:l(s=>e[6]||(e[6]=[c("label",{class:"inline-flex items-center"},[c("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600 rounded-full"}),c("span",{class:"ml-2 text-gray-700"})],-1)])),_:1},8,["data"])]),_:1})]),_:1}))}};export{Ie as default};
