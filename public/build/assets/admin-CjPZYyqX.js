import{d as c,l as U,A as ve,k as lt,o as n,e as d,a as t,f as T,n as j,m as ze,F,h as Q,t as m,i as be,j as q,v as me,D as w,s as Pe,G as kt,b as Le,w as _t,g as A,c as Ct,C as St,x as Re,u as ot}from"./app-C52hVfJY.js";import{C,r as At}from"./chart-8SaNzrGi.js";import{_ as Tt}from"./AdminPanel-Lz0a11Ng.js";import{_ as rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as at,I as Dt,r as Mt,R as zt,P as Pt}from"./CubeIcon-c7asfkfr.js";import{_ as Lt}from"./MultiSelectDropdown-3Sp06M2v.js";/* empty css                                                                        */import"./RetailGroup-B-ZKk-7u.js";import"./Logout-DjX50YFP.js";/* empty css                                                             */import"./Modal-Bw9dwv6a.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-B_t0RILE.js";import"./RetailItems-sFnzHpqc.js";import"./Attendance-DKYwb2tw.js";const Rt={class:"fixed bottom-6 right-6 z-50"},Nt={key:0,class:"relative"},Bt={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold"},$t={key:1,class:"bg-white rounded-lg shadow-2xl w-96 h-[500px] flex flex-col border border-gray-200 overflow-hidden"},Vt={key:0,class:"text-center text-gray-500 text-sm"},jt={class:"text-left"},Et={class:"space-y-1"},Ft=["onClick"],Ot={class:"text-sm whitespace-pre-wrap"},It={class:"text-xs opacity-70 mt-1 block"},Wt={key:1,class:"flex justify-start"},Ht={class:"p-4 bg-white border-t"},Ut=["disabled"],qt=["disabled"],Qt={key:0,class:"mt-2 flex space-x-1 overflow-x-auto"},Zt=["onClick"],Gt={__name:"FloatingChatBot",setup(Y){const z=c(!1),k=c([]),S=c(""),N=c(!1),B=c(!1),Z=c([]),$=c(null),ee=["Today's sales summary","Top performing items","Sales improvement tips","Store performance"],te=async()=>{z.value=!0,B.value=!1,k.value.length===0&&(await oe(),await ae()),await ve(),E()},se=()=>{z.value=!1},oe=async()=>{try{const f=await w.get(route("chatbot.welcome"));f.data.success&&k.value.push({type:"bot",content:f.data.message,timestamp:new Date})}catch(f){console.error("Failed to load welcome message:",f)}},ae=async()=>{try{const f=await w.get(route("chatbot.sample.questions"));f.data.success&&(Z.value=f.data.questions)}catch(f){console.error("Failed to load sample questions:",f)}},G=async()=>{if(!S.value.trim())return;const f=S.value.trim();S.value="",k.value.push({type:"user",content:f,timestamp:new Date}),await ve(),E(),N.value=!0;try{const p=await w.post(route("chatbot.send.message"),{message:f});await new Promise(y=>setTimeout(y,1e3)),p.data.success&&p.data.response?k.value.push({type:"bot",content:p.data.response,timestamp:new Date}):k.value.push({type:"bot",content:p.data.message||"Sorry, I encountered an issue. Please try again.",timestamp:new Date})}catch(p){console.error("Failed to send message:",p),k.value.push({type:"bot",content:"Sorry, I'm having trouble connecting. Please check your internet connection and try again.",timestamp:new Date})}finally{N.value=!1,await ve(),E()}},J=f=>{S.value=f,G()},E=()=>{$.value&&($.value.scrollTop=$.value.scrollHeight)},le=f=>new Date(f).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return U(k,()=>{ve(()=>{E(),!z.value&&k.value.length>0&&(B.value=!0)})},{deep:!0}),lt(()=>{setTimeout(()=>{!z.value&&k.value.length===0&&(B.value=!0)},5e3)}),(f,p)=>(n(),d("div",Rt,[z.value?T("",!0):(n(),d("div",Nt,[t("button",{onClick:te,class:j(["bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 group",{"animate-pulse":B.value}])},[p[1]||(p[1]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.955 8.955 0 01-2.15-.26l-4.244 1.082a1 1 0 01-1.288-1.288l1.082-4.244A8.955 8.955 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})],-1)),B.value?(n(),d("div",Bt," ! ")):T("",!0)],2),p[2]||(p[2]=t("div",{class:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap"}," AI Sales Assistant ",-1))])),z.value?(n(),d("div",$t,[t("div",{class:"bg-blue-600 text-white px-4 py-3 flex items-center justify-between"},[p[4]||(p[4]=ze('<div class="flex items-center space-x-2" data-v-e65fb064><div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center" data-v-e65fb064><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e65fb064><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-e65fb064></path></svg></div><div data-v-e65fb064><h3 class="font-semibold text-sm" data-v-e65fb064>AI Sales Assistant</h3><p class="text-xs text-blue-100" data-v-e65fb064>Online</p></div></div>',1)),t("button",{onClick:se,class:"text-blue-100 hover:text-white transition-colors duration-200"},p[3]||(p[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",{ref_key:"messagesContainer",ref:$,class:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50"},[k.value.length===0?(n(),d("div",Vt,[p[6]||(p[6]=ze('<div class="mb-4" data-v-e65fb064><div class="w-16 h-16 bg-blue-100 rounded-full mx-auto flex items-center justify-center mb-2" data-v-e65fb064><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e65fb064><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-e65fb064></path></svg></div><p class="font-medium text-gray-700" data-v-e65fb064>Welcome to your AI Sales Assistant!</p><p class="text-xs text-gray-500 mt-1" data-v-e65fb064>Ask me about your sales performance, strategies, and insights.</p></div>',1)),t("div",jt,[p[5]||(p[5]=t("p",{class:"text-xs font-medium text-gray-600 mb-2"},"Try asking:",-1)),t("div",Et,[(n(!0),d(F,null,Q(Z.value.slice(0,3),y=>(n(),d("button",{key:y,onClick:O=>J(y),class:"block w-full text-left px-3 py-2 bg-white rounded border text-xs hover:bg-blue-50 hover:border-blue-300 transition-colors duration-200"},' "'+m(y)+'" ',9,Ft))),128))])])])):T("",!0),(n(!0),d(F,null,Q(k.value,(y,O)=>(n(),d("div",{key:O,class:j(y.type==="user"?"flex justify-end":"flex justify-start")},[t("div",{class:j([y.type==="user"?"bg-blue-600 text-white rounded-l-lg rounded-tr-lg":"bg-white text-gray-800 rounded-r-lg rounded-tl-lg border","max-w-[80%] px-3 py-2 shadow-sm"])},[t("p",Ot,m(y.content),1),t("span",It,m(le(y.timestamp)),1)],2)],2))),128)),N.value?(n(),d("div",Wt,p[7]||(p[7]=[ze('<div class="bg-white text-gray-800 rounded-r-lg rounded-tl-lg border px-3 py-2 shadow-sm" data-v-e65fb064><div class="flex space-x-1" data-v-e65fb064><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" data-v-e65fb064></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-e65fb064></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-e65fb064></div></div></div>',1)]))):T("",!0)],512),t("div",Ht,[t("form",{onSubmit:be(G,["prevent"]),class:"flex space-x-2"},[q(t("input",{"onUpdate:modelValue":p[0]||(p[0]=y=>S.value=y),disabled:N.value,type:"text",placeholder:"Ask about sales, strategies, insights...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",maxlength:"1000"},null,8,Ut),[[me,S.value]]),t("button",{type:"submit",disabled:!S.value.trim()||N.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-3 py-2 rounded-lg transition-colors duration-200"},p[8]||(p[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)]),8,qt)],32),k.value.length>0?(n(),d("div",Qt,[(n(),d(F,null,Q(ee,y=>t("button",{key:y,onClick:O=>J(y),class:"flex-shrink-0 text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200"},m(y),9,Zt)),64))])):T("",!0)])])):T("",!0)]))}},Jt=rt(Gt,[["__scopeId","data-v-e65fb064"]]),Kt={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6 space-y-6 relative overflow-hidden"},Xt={class:"relative z-10 bg-white/80 rounded-3xl shadow-2xl border border-blue-100/50 p-6 transform transition-all duration-500 hover:scale-[1.02]"},Yt={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},es={class:"flex flex-col w-full md:w-auto"},ts={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between w-full gap-4"},ss={class:"text-2xl sm:text-3xl font-bold text-gray-800 mb-1"},os={class:"text-blue-600"},as={class:"flex flex-wrap items-center gap-2 sm:gap-3"},ls={class:"flex flex-col"},rs={class:"flex flex-col"},ns={key:0,class:"text-red-500 text-xs mt-2 flex items-center gap-1"},is={class:"w-full lg:w-auto"},ds={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"},cs={key:0,class:"absolute inset-0 bg-white/90 backdrop-blur-sm z-20 flex items-center justify-center rounded-xl"},us={class:"flex items-start justify-between mb-3"},gs={class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1"},ps={class:"text-xl md:text-2xl font-bold text-gray-800 mb-1"},vs={class:"text-xs text-gray-400"},bs={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6"},ms={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 hover:shadow-md transition-shadow duration-200 relative"},fs={key:0,class:"absolute inset-0 bg-white/90 backdrop-blur-sm z-30 flex items-center justify-center rounded-xl"},ys={class:"h-[300px] md:h-[400px]"},hs={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 hover:shadow-md transition-shadow duration-200"},xs={class:"max-h-[300px] md:max-h-[400px] overflow-y-auto space-y-3"},ws={class:"font-semibold text-gray-800 text-sm mb-1"},ks={class:"text-gray-600 text-xs md:text-sm"},_s={key:1,class:"text-gray-400 text-center py-8 text-sm"},Cs={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 hover:shadow-md transition-shadow duration-200"},Ss={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-3"},As={class:"flex items-center space-x-3"},Ts={class:"h-[500px] relative z-10"},Ds={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ms={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},zs={class:"h-[400px] relative z-10"},Ps={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},Ls={class:"h-[400px] relative z-10"},Rs={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},Ns={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 relative z-10"},Bs={class:"flex items-center space-x-3"},$s={class:"w-80"},Vs={class:"block truncate text-gray-700"},js={key:0,class:"text-gray-500"},Es={key:1},Fs={key:2},Os={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},Is={key:0,class:"absolute z-[9999] mt-1 w-full bg-white shadow-2xl border border-gray-300 rounded-lg overflow-hidden",style:{"background-color":"white !important"}},Ws={class:"p-3 border-b border-gray-200 bg-white",style:{"background-color":"white !important"}},Hs={class:"max-h-80 overflow-y-auto bg-white",style:{"background-color":"white !important"}},Us={class:"border-b border-gray-100 bg-white",style:{"background-color":"white !important"}},qs=["checked","indeterminate"],Qs={class:"ml-3 font-medium text-gray-900"},Zs=["onClick"],Gs=["checked"],Js={class:"ml-3 flex-1"},Ks={class:"text-sm font-medium text-gray-900"},Xs={class:"text-xs text-gray-500"},Ys={key:0,class:"px-4 py-8 text-center text-gray-500"},eo={key:0,class:"text-xs text-gray-500 mt-1"},to={key:1,class:"text-xs text-gray-500 mt-1"},so={key:0,class:"text-blue-600"},oo={class:"h-[400px] relative z-0"},ao={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},lo={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},ro={class:"h-[400px] relative z-10"},no={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},io={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 relative z-10"},co={class:"flex items-center space-x-3"},uo={class:"h-[400px] relative z-10"},go={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},po={class:"h-[500px] relative z-10"},vo={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},bo={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},mo={class:"h-[400px] relative z-10"},fo={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},yo={class:"flex justify-between items-start mb-6 relative z-10"},ho={class:"w-80"},xo={class:"block truncate text-gray-700"},wo={key:0,class:"text-gray-500"},ko={key:1},_o={key:2},Co={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},So={key:0,class:"absolute z-20 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"},Ao={class:"border-b border-gray-200"},To=["checked","indeterminate"],Do=["onClick"],Mo=["checked"],zo={class:"ml-2 text-gray-900"},Po={key:0,class:"text-xs text-gray-500 mt-1"},Lo={key:1,class:"text-xs text-gray-500 mt-1"},Ro={key:0,class:"text-orange-600"},No={class:"h-[400px] relative z-10"},Bo={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},$o={class:"h-[400px] relative z-10"},Vo={__name:"admin",props:{username:{type:String,default:"User"},announcements:{type:Array,required:!0},metrics:{type:Object,required:!0,default:()=>({totalGross:0,totalNetsales:0,totalDiscount:0,totalCost:0,totalVat:0,totalVatableSales:0,paymentBreakdown:{cash:0,gcash:0,paymaya:0,card:0,loyaltyCard:0,foodPanda:0,grabFood:0}})}},setup(Y){C.register(...At),w.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content");const z=Y,k=c(z.metrics),S=c(""),N=c(null);let B=null;const Z=c(null);let $=null;c(null),c(null);const ee=c(null);let te=null;const se=c(null);let oe=null;const ae=c(null);let G=null;const J=c(null);let E=null;const le=c(null);let f=null;const p=c(null);let y=null;const O=c(null);let fe=null;const Ne=c([]),_=c([]),re=c([]),b=c([]),V=c([]),x=c([]),ne=c(!1),ye=c(null),ie=c(!1),he=c(null),K=c(""),nt=async()=>{try{const o=await w.get(route("get.stores"));Ne.value=o.data,_.value=o.data}catch(o){console.error("Error fetching stores:",o)}},it=async(o="")=>{try{console.log("Fetching products with search term:",o);const e=await w.get(route("get.products"),{params:{search:o}});console.log("Products loaded:",e.data.length),re.value=e.data}catch(e){console.error("Error fetching products:",e),e.response&&console.error("Products error response:",e.response.data)}},dt=async(o="")=>{try{console.log("Fetching categories...");const e=await w.get(route("get.categories"),{params:{search:o}});console.log("Categories response:",e.data),V.value=e.data}catch(e){console.error("Error fetching categories:",e),e.response&&console.error("Categories error response:",e.response.data)}},ct=o=>{const e=x.value.indexOf(o);e===-1?x.value.push(o):x.value.splice(e,1)},ut=()=>{x.value.length===V.value.length?x.value=[]:x.value=V.value.map(o=>o.value)},gt=o=>{const e=V.value.find(s=>s.value===o);return e?e.label:o},Be=o=>{ye.value&&!ye.value.contains(o.target)&&(ne.value=!1)},pt=o=>{console.log("Toggling product:",o),console.log("Current selected products before toggle:",b.value);const e=b.value.indexOf(o);e===-1?(b.value.push(o),console.log("Added product:",o)):(b.value.splice(e,1),console.log("Removed product:",o)),console.log("Selected products after toggle:",b.value)},vt=()=>{b.value.length===P.value.length&&P.value.length>0?b.value=[]:b.value=P.value.map(o=>o.itemid)},bt=o=>{const e=re.value.find(s=>s.itemid===o);return e?e.itemname:o},P=Pe(()=>K.value?re.value.filter(o=>o.itemname.toLowerCase().includes(K.value.toLowerCase())||o.itemid.toLowerCase().includes(K.value.toLowerCase())):re.value),$e=mt(()=>{},300);function mt(o,e){let s;return function(...r){clearTimeout(s),s=setTimeout(()=>o.apply(this,r),e)}}const Ve=o=>{he.value&&!he.value.contains(o.target)&&(ie.value=!1,K.value="")};c(null),c(!1);const xe=c(null),we=c(null);let ke=null,ue=null;const ge=c(!1);c(!1);const g=c((()=>{const o=new Date,e=new Date;return e.setDate(o.getDate()-30),{start_date:e.toISOString().split("T")[0],end_date:o.toISOString().split("T")[0]}})()),de=c("all"),I=c("gross"),W=c("grossamount"),H=Pe(()=>{const o=new Date(g.value.start_date),e=new Date(g.value.end_date),s=new Date;return o<=e&&o<=s&&e<=s}),L=o=>{const e=Number(o);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(isNaN(e)?0:e)},ft=Pe(()=>{const o=k.value||{};return[{title:"TOTAL GROSS",value:L(o.totalGross),icon:at,color:"text-blue-600",bgColor:"bg-blue-100",description:"Total revenue before deductions"},{title:"TOTAL NETSALES",value:L(o.totalNetsales),icon:Dt,color:"text-green-600",bgColor:"bg-green-100",description:"Revenue after all deductions"},{title:"TOTAL DISCOUNT",value:L(o.totalDiscount),icon:at,color:"text-amber-600",bgColor:"bg-amber-100",description:"Sum of all applied discounts"},{title:"TOTAL COST",value:L(o.totalCost),icon:Mt,color:"text-purple-600",bgColor:"bg-purple-100",description:"Aggregate cost of goods sold"},{title:"TOTAL VAT",value:L(o.totalVat),icon:zt,color:"text-pink-600",bgColor:"bg-pink-100",description:"Value Added Tax collected"},{title:"VATABLE SALES",value:L(o.totalVatableSales),icon:Pt,color:"text-indigo-600",bgColor:"bg-indigo-100",description:"Sales subject to VAT"}]}),_e=()=>{var l;if(!xe.value)return;const o=xe.value.getContext("2d");ke&&ke.destroy();const e=((l=k.value)==null?void 0:l.paymentBreakdown)||{},s=Object.keys(e).map(a=>{const v=e[a],i=a.replace(/([A-Z])/g," $1").trim(),u=L(v);return`${i} (${u})`}),r=Object.values(e).map(a=>Number(a)||0);ke=new C(o,{type:"pie",data:{labels:s,datasets:[{data:r,backgroundColor:["#3B82F6","#10B981","#F43F5E","#6366F1","#8B5CF6","#EC4899","#F97316"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:function(a){const v=a.dataset.data.reduce((M,D)=>M+D,0),i=a.parsed,u=(i/v*100).toFixed(2);return`${a.label}: ${i.toFixed(2)} (${u}%)`}}}}}})},Ce=async()=>{var o,e,s;try{const r={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(u=>u.NAME||(typeof u=="object"?u.NAME:u)),product_type:de.value};console.log("Top/Bottom Products Payload:",r);const l=await w.post(route("get.top.bottom.products"),r);if(console.log("Top/Bottom Products Response:",l.data),console.log("Response Status:",l.status),l.status!==200)throw new Error(`API returned status: ${l.status}`);const a=Array.isArray((o=l==null?void 0:l.data)==null?void 0:o.topProducts)?l.data.topProducts:[],v=Array.isArray((e=l==null?void 0:l.data)==null?void 0:e.bottomProducts)?l.data.bottomProducts:[],i=((s=l==null?void 0:l.data)==null?void 0:s.summary)||{};console.log("Processed Data:",{topProductsCount:a.length,bottomProductsCount:v.length,summaryData:i}),je(a,v,i)}catch(r){console.error("Error fetching top/bottom products:",r),je([],[],{})}},je=(o,e,s={})=>{if(!we.value)return;const r=we.value.getContext("2d");if(ue&&ue.destroy(),(!o||o.length===0)&&(!e||e.length===0)){ue=new C(r,{type:"bar",data:{labels:["No Data Available"],datasets:[{label:"No products data available",data:[0],backgroundColor:"rgba(128, 128, 128, 0.3)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Popular Products & Products Under Monitoring (No Data)",font:{size:14,weight:"bold"}}}}});return}console.log("Top Products Data:",o),console.log("Bottom Products Data:",e);const l=(o||[]).slice(0,10),a=(e||[]).slice(0,10),v=l.map(h=>h.itemname||"Unknown"),i=a.map(h=>h.itemname||"Unknown"),u=l.map(h=>Number(h.total_sales||0)),M=a.map(h=>Number(h.total_sales||0)),D=[...v.map(h=>`üî• ${h}`),...i.map(h=>`‚ö†Ô∏è ${h}`)],R=[...u,...M],Te=[...Array(l.length).fill("rgba(34, 197, 94, 0.6)"),...Array(a.length).fill("rgba(239, 68, 68, 0.6)")],De=[...Array(l.length).fill("rgba(34, 197, 94, 1)"),...Array(a.length).fill("rgba(239, 68, 68, 1)")];ue=new C(r,{type:"bar",data:{labels:D,datasets:[{label:"Sales Amount (‚Ç±)",data:R,backgroundColor:Te,borderColor:De,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Popular Products & Products Under Monitoring ${(()=>{switch(de.value){case"regular":return"(Regular Products Only)";case"non_product":return"(Non Products Only)";default:return"(All Products)"}})()}`,font:{size:14,weight:"bold"}},legend:{display:!1},tooltip:{callbacks:{title:function(h){return h[0].label.replace(/üî•|‚ö†Ô∏è/g,"").trim()},label:function(h){const yt=h.parsed.y,Me=h.dataIndex;let X=`Sales: ‚Ç±${yt.toLocaleString()}`;const st=Me<l.length,ce=st?l[Me]:a[Me-l.length];if(ce){const ht=ce.product_category||"unknown",xt=ce.retail_department||"Unknown",wt=ce.store_count||0;X+=`
Quantity: ${(ce.total_quantity||0).toLocaleString()}`,X+=`
Category: ${ht==="non_product"?"Non Product":"Regular Product"}`,X+=`
Department: ${xt}`,X+=`
Stores: ${wt}`,X+=`
Type: ${st?"Top Performer":"Under Monitoring"}`}return X}}}},scales:{x:{ticks:{maxRotation:45,minRotation:45,font:{size:10}}},y:{beginAtZero:!0,title:{display:!0,text:"Sales Amount (‚Ç±)"},ticks:{callback:function(h){return"‚Ç±"+h.toLocaleString()}}}}}})},Ee=async()=>{try{ge.value=!0,console.log("Selected Stores:",_.value);const o={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)};console.log("Payload for metrics:",o);const e=await w.post(route("get.metrics"),o);console.log("Metrics response:",e.data),k.value=e.data||z.metrics,_e()}catch(o){console.error("Error fetching metrics:",o),k.value=z.metrics,_e()}finally{ge.value=!1}},Fe=async()=>{try{const o={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)},e=await w.post(route("get.monthly.sales"),o);Oe(e.data||[])}catch(o){console.error("Error fetching monthly sales:",o),Oe([])}},Oe=o=>{if(!N.value)return;const e=N.value.getContext("2d");B&&B.destroy();const s=Array.isArray(o)?o:[],r=s.length>0?s.map(a=>a.label):["No Data"],l=s.length>0?s.map(a=>a.total_sales):[0];B=new C(e,{type:"line",data:{labels:r,datasets:[{label:"Monthly Sales",data:l,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.1,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(a){return L(a.parsed.y)}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Sales Amount"},ticks:{callback:function(a){return L(a)}}}}}})},Ie=async()=>{var o,e;try{const s={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(v=>typeof v=="object"?v.NAME:v)},r=await w.post(route("get.top.wastes"),s);console.log("Waste Analysis Response:",r.data);const l=Array.isArray((o=r==null?void 0:r.data)==null?void 0:o.topWastesOverall)?r.data.topWastesOverall:[],a=Array.isArray((e=r==null?void 0:r.data)==null?void 0:e.wasteSummaryByType)?r.data.wasteSummaryByType:[];We(l,a)}catch(s){console.error("Error fetching top wastes:",s),We([],[])}},We=(o,e=[])=>{if(!Z.value)return;const s=Z.value.getContext("2d");if($&&$.destroy(),!o||o.length===0){$=new C(s,{type:"bar",data:{labels:["No Data"],datasets:[{label:"No waste data available",data:[0],backgroundColor:"rgba(128, 128, 128, 0.3)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}});return}const r=o.slice(0,10).map(i=>{const u=i.itemname||i.ITEMID;return u.length>20?u.substring(0,20)+"...":u}),l=o.slice(0,10).map(i=>Math.abs(Number(i.total_waste_quantity||0))),a=o.slice(0,10).map(i=>Math.abs(Number(i.total_waste_cost||0))),v=o.slice(0,10).map(i=>i.waste_types||"Various");$=new C(s,{type:"bar",data:{labels:r,datasets:[{label:"Waste Quantity",data:l,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,yAxisID:"y"},{label:"Waste Cost (‚Ç±)",data:a,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,type:"line",yAxisID:"y1",fill:!1,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:"Top Waste Items (Stock Counting Analysis)",font:{size:14,weight:"bold"}},legend:{position:"top"},tooltip:{callbacks:{title:function(i){var D,R;const u=i[0].dataIndex;return((D=o[u])==null?void 0:D.itemname)||((R=o[u])==null?void 0:R.ITEMID)||"Unknown"},label:function(i){const u=i.parsed.y,M=i.dataset.label,D=i.dataIndex;v[D];let R=`${M}: `;return i.dataset.label==="Waste Cost (‚Ç±)"?R+=L(u):R+=u.toFixed(2)+" units",R},afterLabel:function(i){const u=i.dataIndex;return`Waste Types: ${v[u]}`}}}},scales:{x:{title:{display:!0,text:"Items"},ticks:{maxRotation:45,minRotation:45}},y:{type:"linear",display:!0,position:"left",beginAtZero:!0,title:{display:!0,text:"Waste Quantity (units)"},grid:{drawOnChartArea:!1}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,title:{display:!0,text:"Waste Cost (‚Ç±)"},grid:{drawOnChartArea:!0},ticks:{callback:function(i){return"‚Ç±"+i.toLocaleString()}}}}}})},pe=async()=>{var o,e;try{const s={start_date:g.value.start_date,end_date:g.value.end_date,filter_by:I.value,stores:_.value.map(l=>l.NAME||l),products:b.value};console.log("Fetching transaction sales with payload:",s),console.log("Selected products:",b.value),console.log("Selected stores:",_.value);const r=await w.post(route("get.transaction.sales"),s);console.log("Transaction sales response:",r.data),console.log("Transaction sales data count:",((e=(o=r.data)==null?void 0:o.data)==null?void 0:e.length)||0),He(r.data||{data:[],summary:{}})}catch(s){console.error("Error fetching transaction sales:",s),s.response&&console.error("Transaction sales error response:",s.response.data),He({data:[],summary:{}})}},He=o=>{if(!ee.value)return;const e=ee.value.getContext("2d");te&&te.destroy();const s=o.data||[];console.log("Initializing chart with data:",s);const r=s.map(a=>a.label),l=s.map(a=>a.total_value);console.log("Chart labels:",r),console.log("Chart values:",l),s.length===0&&console.log("No data to display in chart"),te=new C(e,{type:"line",data:{labels:r.length>0?r:["No Data"],datasets:[{label:I.value==="qty"?"Total Quantity":"Total Sales (‚Ç±)",data:l.length>0?l:[0],borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Transaction ${I.value==="qty"?"Quantity":"Sales"} Trend${b.value.length>0?` (${b.value.length} products selected)`:""}`,font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(a){return I.value==="qty"?a.toLocaleString()+" items":"‚Ç±"+a.toLocaleString()}}}}}})},Ue=async()=>{try{const o={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)},e=await w.post(route("get.sales.by.hour"),o);qe(e.data||{data:[],summary:{}})}catch(o){console.error("Error fetching sales by hour:",o),qe({data:[],summary:{}})}},qe=o=>{if(!se.value)return;const e=se.value.getContext("2d");oe&&oe.destroy();const s=o.data||[],r=s.map(a=>a.label),l=s.map(a=>a.total_sales);oe=new C(e,{type:"bar",data:{labels:r,datasets:[{label:"Sales (‚Ç±)",data:l,backgroundColor:"rgba(16, 185, 129, 0.6)",borderColor:"rgba(16, 185, 129, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Hour",font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(a){return"‚Ç±"+a.toLocaleString()}}}}}})},Se=async()=>{try{const o={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s),filter_by:W.value},e=await w.post(route("get.top.stores"),o);Qe(e.data||{data:[],summary:{}})}catch(o){console.error("Error fetching top stores:",o),Qe({data:[],summary:{}})}},Qe=o=>{if(!ae.value)return;const e=ae.value.getContext("2d");G&&G.destroy();const s=o.data||[],r=s.map(a=>a.store),l=s.map(a=>a.total_value);G=new C(e,{type:"bar",data:{labels:r,datasets:[{label:Ze(W.value),data:l,backgroundColor:"rgba(139, 92, 246, 0.6)",borderColor:"rgba(139, 92, 246, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Top Stores by ${Ze(W.value)}`,font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{x:{ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,ticks:{callback:function(a){return W.value==="qty"?a.toLocaleString()+" items":"‚Ç±"+a.toLocaleString()}}}}}})},Ze=o=>({grossamount:"Gross Amount",discamount:"Discount Amount",netamount:"Net Amount",qty:"Quantity"})[o]||"Gross Amount",Ge=async()=>{try{const o={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)},e=await w.post(route("get.advanced.analysis"),o);Je(e.data||{salesTrend:[],storeComparison:[],categoryPerformance:[]})}catch(o){console.error("Error fetching advanced analysis:",o),Je({salesTrend:[],storeComparison:[],categoryPerformance:[]})}},Je=o=>{if(!J.value)return;const e=J.value.getContext("2d");E&&E.destroy();const s=o.salesTrend||[],r=s.map(i=>i.label),l=s.map(i=>i.gross_sales),a=s.map(i=>i.net_sales),v=s.map(i=>i.discount_amount);E=new C(e,{type:"line",data:{labels:r,datasets:[{label:"Gross Sales",data:l,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4},{label:"Net Sales",data:a,borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4},{label:"Discounts",data:v,borderColor:"rgba(239, 68, 68, 1)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Advanced Sales Analysis",font:{size:14,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(i){return"‚Ç±"+i.toLocaleString()}}}}}})},Ke=async()=>{try{const o={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)},e=await w.post(route("get.received.delivery.vs.sales"),o);Xe(e.data||{data:[],summary:{}})}catch(o){console.error("Error fetching received delivery vs sales:",o),Xe({data:[],summary:{}})}},Xe=o=>{if(!le.value)return;const e=le.value.getContext("2d");f&&f.destroy();const s=o.data||[],r=s.map(v=>v.label),l=s.map(v=>v.received_delivery),a=s.map(v=>v.total_sales);f=new C(e,{type:"line",data:{labels:r,datasets:[{label:"Received Delivery",data:l,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!1},{label:"Total Sales",data:a,borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Received Delivery vs Sales",font:{size:14,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(v){return v.toLocaleString()+" units"}}}}}})},Ae=async()=>{try{const o={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s),categories:x.value};console.log("Fetching sales by category with payload:",o);const e=await w.post(route("get.sales.by.category"),o);console.log("Sales by category response:",e.data),Ye(e.data||{data:[],summary:{}})}catch(o){console.error("Error fetching sales by category:",o),o.response&&console.error("Error response:",o.response.data),Ye({data:[],summary:{}})}},Ye=o=>{if(!p.value)return;const e=p.value.getContext("2d");y&&y.destroy();const s=o.data||[];if(!s||s.length===0){y=new C(e,{type:"doughnut",data:{labels:["No Data Available"],datasets:[{data:[1],backgroundColor:["rgba(128, 128, 128, 0.3)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Category (No Data)",font:{size:14,weight:"bold"}},legend:{display:!1}}}});return}const r=s.slice(0,10),l=s.slice(10);let a=r.map(u=>u.category),v=r.map(u=>u.total_sales);if(l.length>0){const u=l.reduce((M,D)=>M+D.total_sales,0);a.push(`Others (${l.length} categories)`),v.push(u)}const i=["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(34, 197, 94, 0.8)","rgba(168, 85, 247, 0.8)","rgba(251, 146, 60, 0.8)","rgba(14, 165, 233, 0.8)","rgba(156, 163, 175, 0.8)"];y=new C(e,{type:"doughnut",data:{labels:a,datasets:[{data:v,backgroundColor:i.slice(0,a.length),borderColor:i.slice(0,a.length).map(u=>u.replace("0.8","1")),borderWidth:2,hoverOffset:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Category",font:{size:14,weight:"bold"}},legend:{position:"right",labels:{padding:15,usePointStyle:!0,font:{size:11}}},tooltip:{callbacks:{label:function(u){const M=u.dataset.data.reduce((Te,De)=>Te+De,0),D=u.parsed,R=(D/M*100).toFixed(1);return`${u.label}: ‚Ç±${D.toLocaleString()} (${R}%)`}}}}}})},et=async()=>{try{const o={start_date:g.value.start_date,end_date:g.value.end_date,stores:_.value.map(s=>typeof s=="object"?s.NAME:s)},e=await w.post(route("get.top.variance.stores"),o);tt(e.data||{data:[],summary:{}})}catch(o){console.error("Error fetching top variance stores:",o),tt({data:[],summary:{}})}},tt=o=>{if(!O.value)return;const e=O.value.getContext("2d");fe&&fe.destroy();const s=o.data||[],r=s.map(a=>a.store),l=s.map(a=>a.total_variance);fe=new C(e,{type:"bar",data:{labels:r,datasets:[{label:"Total Variance",data:l,backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Top 10 Stores Under Monitoring (Highest Variances)",font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{x:{ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,ticks:{callback:function(a){return a.toLocaleString()+" units"}}}}}})};return U([()=>g.value.start_date,()=>g.value.end_date,()=>JSON.stringify(_.value)],()=>{H.value?(S.value="",Ee(),Ce(),Fe(),Ie(),pe(),Ue(),Se(),Ge(),Ke(),Ae(),et()):S.value="Invalid date range. Please check your selections."}),U(()=>de.value,()=>{H.value&&Ce()}),U(()=>I.value,()=>{H.value&&pe()}),U(()=>W.value,()=>{H.value&&Se()}),U(()=>JSON.stringify(b.value),()=>{console.log("Products watcher triggered, new products:",b.value),console.log("Is valid date range:",H.value),H.value&&(console.log("Calling fetchTransactionSales from watcher"),pe())}),U(()=>JSON.stringify(x.value),()=>{H.value&&Ae()}),lt(()=>{_e(),nt(),it(),dt(),Ee(),Ce(),Fe(),Ie(),pe(),Ue(),Se(),Ge(),Ke(),Ae(),et(),document.addEventListener("click",Be),document.addEventListener("click",Ve)}),kt(()=>{document.removeEventListener("click",Be),document.removeEventListener("click",Ve)}),(o,e)=>(n(),d(F,null,[Le(Tt,{"active-tab":"DASHBOARD"},{main:_t(()=>[t("div",Kt,[e[52]||(e[52]=t("div",{class:"absolute inset-0 opacity-10 bg-pattern z-0"},null,-1)),t("div",Xt,[t("div",Yt,[t("div",es,[t("div",ts,[t("div",null,[t("h1",ss,[e[11]||(e[11]=A(" Welcome back, ")),t("span",os,m(Y.username)+"!",1)]),e[12]||(e[12]=t("p",{class:"text-sm text-gray-500"},"Track your sales, analyze performance, and manage your business",-1))]),t("div",as,[t("div",ls,[e[13]||(e[13]=t("label",{class:"text-xs font-medium text-gray-500 mb-1"},"Start Date",-1)),q(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>g.value.start_date=s),class:j(["border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-red-500":S.value}])},null,2),[[me,g.value.start_date]])]),t("div",rs,[e[14]||(e[14]=t("label",{class:"text-xs font-medium text-gray-500 mb-1"},"End Date",-1)),q(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>g.value.end_date=s),class:j(["border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",{"border-red-500":S.value}])},null,2),[[me,g.value.end_date]])])])]),S.value?(n(),d("div",ns,[e[15]||(e[15]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),t("span",null,m(S.value),1)])):T("",!0)]),t("div",is,[e[16]||(e[16]=t("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Filter by Stores",-1)),Le(Lt,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=s=>_.value=s),options:Ne.value,multiple:!0,class:"w-full lg:w-64"},null,8,["modelValue","options"])])])]),t("div",ds,[(n(!0),d(F,null,Q(ft.value,(s,r)=>(n(),d("div",{key:s.title,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6 hover:shadow-md transition-shadow duration-200 relative"},[ge.value?(n(),d("div",cs,e[17]||(e[17]=[t("div",{class:"flex flex-col items-center gap-2"},[t("div",{class:"w-8 h-8 border-3 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),t("span",{class:"text-xs text-gray-500"},"Loading...")],-1)]))):T("",!0),t("div",us,[t("div",{class:j([s.bgColor,"p-2.5 rounded-lg"])},[(n(),Ct(St(s.icon),{class:j([s.color,"w-5 h-5 md:w-6 md:h-6"])},null,8,["class"]))],2)]),t("div",null,[t("p",gs,m(s.title),1),t("p",ps,m(s.value),1),t("p",vs,m(s.description),1)])]))),128))]),t("div",bs,[t("div",ms,[ge.value?(n(),d("div",fs,e[18]||(e[18]=[t("div",{class:"flex flex-col items-center gap-2"},[t("div",{class:"w-10 h-10 border-3 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),t("span",{class:"text-sm text-gray-600"},"Loading chart...")],-1)]))):T("",!0),e[19]||(e[19]=t("h3",{class:"text-base md:text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a.5.5 0 11-1 0 .5.5 0 011 0zm4 5a.5.5 0 11-1 0 .5.5 0 011 0z"})]),A(" Payment Methods ")],-1)),t("div",ys,[t("canvas",{ref_key:"chartRef",ref:xe,class:"w-full h-full"},null,512)])]),t("div",hs,[e[20]||(e[20]=t("h3",{class:"text-base md:text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})]),A(" Announcements ")],-1)),t("div",xs,[Y.announcements.length?(n(!0),d(F,{key:0},Q(Y.announcements,(s,r)=>(n(),d("div",{key:r,class:"p-3 md:p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50/50 transition-all duration-200"},[t("h4",ws,m(s.title),1),t("p",ks,m(s.description),1)]))),128)):(n(),d("p",_s," No announcements available "))])])]),t("div",Cs,[t("div",Ss,[e[23]||(e[23]=t("h3",{class:"text-base md:text-lg font-semibold text-gray-800 flex items-center gap-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),A(" Popular Products & Products Under Monitoring ")],-1)),t("div",As,[e[22]||(e[22]=t("label",{for:"productTypeFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),q(t("select",{id:"productTypeFilter","onUpdate:modelValue":e[3]||(e[3]=s=>de.value=s),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors duration-200"},e[21]||(e[21]=[t("option",{value:"all"},"All Products",-1),t("option",{value:"regular"},"Regular Products Only",-1),t("option",{value:"non_product"},"Non Products Only",-1)]),512),[[Re,de.value]])])]),t("div",Ts,[t("canvas",{ref_key:"topBottomProductsRef",ref:we,class:"w-full h-full"},null,512)])]),t("div",Ds,[t("div",Ms,[e[24]||(e[24]=t("div",{class:"absolute inset-0 opacity-10 bg-teal-100"},null,-1)),e[25]||(e[25]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"}," Monthly Sales Trend ",-1)),t("div",zs,[t("canvas",{ref_key:"monthlySalesRef",ref:N,class:"w-full h-full"},null,512)])]),t("div",Ps,[e[26]||(e[26]=t("div",{class:"absolute inset-0 opacity-10 bg-red-100"},null,-1)),e[27]||(e[27]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})]),A(" Top Waste Items (Stock Counting Analysis) ")],-1)),t("div",Ls,[t("canvas",{ref_key:"topWasteRef",ref:Z,class:"w-full h-full"},null,512)])])]),t("div",Rs,[e[34]||(e[34]=t("div",{class:"absolute inset-0 opacity-10 bg-blue-100"},null,-1)),t("div",Ns,[e[33]||(e[33]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center mb-3 sm:mb-0"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),A(" Transaction Sales Trend ")],-1)),t("div",Bs,[e[32]||(e[32]=t("label",{for:"transactionSalesFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),q(t("select",{id:"transactionSalesFilter","onUpdate:modelValue":e[4]||(e[4]=s=>I.value=s),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"},e[28]||(e[28]=[t("option",{value:"gross"},"Gross Amount",-1),t("option",{value:"qty"},"Quantity",-1)]),512),[[Re,I.value]]),t("div",$s,[e[31]||(e[31]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Products (Optional)",-1)),t("div",{class:"relative",ref_key:"transactionProductDropdownRef",ref:he},[t("button",{onClick:e[5]||(e[5]=s=>ie.value=!ie.value),type:"button",class:"relative w-full bg-white border border-gray-300 rounded-lg shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-colors duration-200"},[t("span",Vs,[b.value.length===0?(n(),d("span",js,"Search and select products...")):b.value.length===1?(n(),d("span",Es,m(bt(b.value[0])),1)):(n(),d("span",Fs,m(b.value.length)+" products selected",1))]),t("span",Os,[(n(),d("svg",{class:j(["h-4 w-4 text-gray-400 transition-transform duration-200",{"rotate-180":ie.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e[29]||(e[29]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])]),ie.value?(n(),d("div",Is,[t("div",Ws,[q(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>K.value=s),onInput:e[7]||(e[7]=(...s)=>ot($e)&&ot($e)(...s)),onClick:e[8]||(e[8]=be(()=>{},["stop"])),type:"text",placeholder:"Search products by name or ID...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},null,544),[[me,K.value]])]),t("div",Hs,[t("div",Us,[t("div",{class:"px-4 py-3 cursor-pointer hover:bg-blue-100 flex items-center select-none",onClick:be(vt,["stop","prevent"])},[t("input",{type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",checked:b.value.length===P.value.length&&P.value.length>0,indeterminate:b.value.length>0&&b.value.length<P.value.length,tabindex:"-1",readonly:""},null,8,qs),t("span",Qs," Select All ("+m(P.value.length)+" items) ",1)])]),(n(!0),d(F,null,Q(P.value,s=>(n(),d("div",{key:s.itemid,class:"px-4 py-2 cursor-pointer hover:bg-blue-50 flex items-center border-b border-gray-50 select-none bg-white",style:{"background-color":"white !important"},onClick:be(r=>pt(s.itemid),["stop","prevent"])},[t("input",{type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",checked:b.value.includes(s.itemid),tabindex:"-1",readonly:""},null,8,Gs),t("div",Js,[t("div",Ks,m(s.itemname),1),t("div",Xs,"ID: "+m(s.itemid),1)])],8,Zs))),128)),P.value.length===0?(n(),d("div",Ys,e[30]||(e[30]=[t("div",{class:"text-sm"},"No products found",-1),t("div",{class:"text-xs mt-1"},"Try different search terms",-1)]))):T("",!0)])])):T("",!0)],512),re.value.length===0?(n(),d("div",eo,"Loading products...")):(n(),d("div",to,[A(m(P.value.length)+" products available ",1),b.value.length>0?(n(),d("span",so," ("+m(b.value.length)+" selected) ",1)):T("",!0)]))])])]),t("div",oo,[t("canvas",{ref_key:"transactionSalesRef",ref:ee,class:"w-full h-full"},null,512)])]),t("div",ao,[t("div",lo,[e[35]||(e[35]=t("div",{class:"absolute inset-0 opacity-10 bg-green-100"},null,-1)),e[36]||(e[36]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),A(" Sales by Hour ")],-1)),t("div",ro,[t("canvas",{ref_key:"salesByHourRef",ref:se,class:"w-full h-full"},null,512)])]),t("div",no,[e[40]||(e[40]=t("div",{class:"absolute inset-0 opacity-10 bg-purple-100"},null,-1)),t("div",io,[e[39]||(e[39]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center mb-3 sm:mb-0"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),A(" Top Stores Performance ")],-1)),t("div",co,[e[38]||(e[38]=t("label",{for:"topStoresFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),q(t("select",{id:"topStoresFilter","onUpdate:modelValue":e[9]||(e[9]=s=>W.value=s),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors duration-200"},e[37]||(e[37]=[t("option",{value:"grossamount"},"Gross Amount",-1),t("option",{value:"discamount"},"Discount Amount",-1),t("option",{value:"netamount"},"Net Amount",-1),t("option",{value:"qty"},"Quantity",-1)]),512),[[Re,W.value]])])]),t("div",uo,[t("canvas",{ref_key:"topStoresRef",ref:ae,class:"w-full h-full"},null,512)])])]),t("div",go,[e[41]||(e[41]=t("div",{class:"absolute inset-0 opacity-10 bg-indigo-100"},null,-1)),e[42]||(e[42]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),A(" Advanced Data Analysis ")],-1)),t("div",po,[t("canvas",{ref_key:"advancedAnalysisRef",ref:J,class:"w-full h-full"},null,512)])]),t("div",vo,[t("div",bo,[e[43]||(e[43]=t("div",{class:"absolute inset-0 opacity-10 bg-cyan-100"},null,-1)),e[44]||(e[44]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-cyan-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})]),A(" Received Delivery vs Sales ")],-1)),t("div",mo,[t("canvas",{ref_key:"receivedDeliveryVsSalesRef",ref:le,class:"w-full h-full"},null,512)])]),t("div",fo,[e[49]||(e[49]=t("div",{class:"absolute inset-0 opacity-10 bg-orange-100"},null,-1)),t("div",yo,[e[48]||(e[48]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),A(" Sales by Category ")],-1)),t("div",ho,[e[47]||(e[47]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Filter Categories (Optional)",-1)),t("div",{class:"relative",ref_key:"categoryDropdownRef",ref:ye},[t("button",{onClick:e[10]||(e[10]=s=>ne.value=!ne.value),type:"button",class:"relative w-full bg-white border border-gray-300 rounded-lg shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 sm:text-sm transition-colors duration-200"},[t("span",xo,[x.value.length===0?(n(),d("span",wo,"Select categories...")):x.value.length===1?(n(),d("span",ko,m(gt(x.value[0])),1)):(n(),d("span",_o,m(x.value.length)+" categories selected",1))]),t("span",Co,[(n(),d("svg",{class:j(["h-4 w-4 text-gray-400 transition-transform duration-200",{"rotate-180":ne.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e[45]||(e[45]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])]),ne.value?(n(),d("div",So,[t("div",Ao,[t("div",{class:"px-3 py-2 cursor-pointer hover:bg-orange-50 flex items-center transition-colors duration-150",onClick:ut},[t("input",{type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded",checked:x.value.length===V.value.length,indeterminate:x.value.length>0&&x.value.length<V.value.length,readonly:""},null,8,To),e[46]||(e[46]=t("span",{class:"ml-2 font-medium text-gray-900"},"Select All",-1))])]),(n(!0),d(F,null,Q(V.value,s=>(n(),d("div",{key:s.value,class:"px-3 py-2 cursor-pointer hover:bg-orange-50 flex items-center transition-colors duration-150",onClick:r=>ct(s.value)},[t("input",{type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded",checked:x.value.includes(s.value),readonly:""},null,8,Mo),t("span",zo,m(s.label),1)],8,Do))),128))])):T("",!0)],512),V.value.length===0?(n(),d("div",Po,"Loading categories...")):(n(),d("div",Lo,[A(m(V.value.length)+" categories available ",1),x.value.length>0?(n(),d("span",Ro," ("+m(x.value.length)+" selected) ",1)):T("",!0)]))])]),t("div",No,[t("canvas",{ref_key:"salesByCategoryRef",ref:p,class:"w-full h-full"},null,512)])])]),t("div",Bo,[e[50]||(e[50]=t("div",{class:"absolute inset-0 opacity-10 bg-red-100"},null,-1)),e[51]||(e[51]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})]),A(" Top 10 Stores Under Monitoring (Highest Variances) ")],-1)),t("div",$o,[t("canvas",{ref_key:"topVarianceStoresRef",ref:O,class:"w-full h-full"},null,512)])])])]),_:1}),Le(Jt)],64))}},Yo=rt(Vo,[["__scopeId","data-v-9e2c77b6"]]);export{Yo as default};
