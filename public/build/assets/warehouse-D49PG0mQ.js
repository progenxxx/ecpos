import{C as S}from"./Create-KBNQeue9.js";import{G as j,_}from"./CopyFrom-BhW9c5TM.js";import{_ as p}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-BbdsJQL3.js";import{T as B}from"./TableContainer-pQagtIZl.js";import{_ as L}from"./Main-mU2Odhhn.js";import{S as $}from"./Save-_giWOt73.js";import{C as G}from"./Cart-BAHnqGjn.js";import{d as l,T as J,H as w,c as q,w as r,o as b,b as o,e as H,t as W,n as h,f as Y,a as i,g as F,u as P,D as z}from"./app-yW5Rpkbn.js";import{P as C,D as K}from"./dataTables-DqaaNiHf.js";import"./Modal-BKFOYCi9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-BXm32f5m.js";/* empty css                                                               *//* empty css                                                               */import"./Logout-DZWkfwQC.js";/* empty css                                                             */import"./PartyCake143-CLFpLd0Y.js";import"./Attendance-B1yfHN9k.js";const X={class:"flex justify-start items-center"},ge={__name:"warehouse",props:{receivedordertrans:{type:Array,required:!0},journalid:{type:[String,Number],required:!0},items:{type:Array,required:!0}},setup(d){C.use(K);const u=l("");l(""),l("");const f=l(!1),v=l(!1),g=l(!1),y=d,x=[{data:"ITEMID",title:"ITEMID"},{data:"itemname",title:"ITEMNAME"},{data:"itemgroup",title:"CATEGORY"},{data:"COUNTED",title:"COUNTED",render:function(t,e,s){return e==="display"?`<input type="number" class="counted-input form-input block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" value="${Number(t).toFixed(0)}" min="0" step="1">`:t}}],D={paging:!1,scrollX:!0,scrollY:"70vh",scrollCollapse:!0,drawCallback:function(t){this.api().rows().every(function(){const s=this.data(),c=this.node().querySelector(".counted-input");c&&c.addEventListener("change",V=>U(V,s))})}},I=()=>{g.value=!1},T=()=>{v.value=!1},O=()=>{f.value=!1};J({StartDate:"",EndDate:""});const A=t=>{window.location.href=`/ReceivedItems/${t}`},N=t=>{window.location.href=`/Receivedwarehouse/ViewOrders/${t}`},E=t=>{console.log("Selected Item:",t)},M=l([]),n=w({}),a=w({text:"",type:""}),U=(t,e)=>{const s=t.target.value;n[e.ITEMID]=s},k=async()=>{try{if(a.text="Updating counted values...",a.type="info",(await z.post("/api/received-update-all-counted-values",{journalId:y.journalid,updatedValues:n})).data.success){console.log("All values updated successfully");for(const[e,s]of Object.entries(n)){const m=M.value.find(c=>c.ITEMID===e);m&&(m.COUNTED=s)}Object.keys(n).forEach(e=>delete n[e]),a.text="All counted values updated successfully",a.type="success",location.reload()}else throw new Error("Update failed")}catch(t){console.error("You don't have any changes!",t),a.text="You don't have any changes!",a.type="error"}R()},R=()=>{setTimeout(()=>{a.text="",a.type=""},5e3)};return(t,e)=>(b(),q(L,{"active-tab":"STOCK"},{modals:r(()=>[o(S,{"show-modal":g.value,JOURNALID:u.value,items:y.items,onToggleActive:I,onSelectItem:E},null,8,["show-modal","JOURNALID","items"]),o(j,{"show-modal":v.value,JOURNALID:u.value,onToggleActive:T},null,8,["show-modal","JOURNALID"]),o(_,{"show-modal":f.value,JOURNALID:u.value,onToggleActive:O},null,8,["show-modal","JOURNALID"])]),main:r(()=>[o(B,null,{default:r(()=>[a.text?(b(),H("div",{key:0,class:h(["p-4 mb-4 rounded-md",a.type==="success"?"bg-green-100 text-green-700":a.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},W(a.text),3)):Y("",!0),i("div",{class:h(["absolute adjust",{"mt-20":a.text}])},[i("div",X,[o(p,{type:"button",onClick:e[0]||(e[0]=s=>A(d.journalid)),class:"m-1 ml-2 bg-red-900 p-10"},{default:r(()=>e[2]||(e[2]=[F(" BWPRODUCT ")])),_:1}),o(p,{type:"button",onClick:k,class:"m-1 ml-2 bg-navy p-10"},{default:r(()=>[o($,{class:"h-5"})]),_:1}),o(p,{type:"button",onClick:e[1]||(e[1]=s=>N(d.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:r(()=>[o(G,{class:"h-5"})]),_:1})])],2),o(P(C),{data:d.receivedordertrans,columns:x,class:"w-full relative display",options:D},{action:r(s=>e[3]||(e[3]=[i("label",{class:"inline-flex items-center"},[i("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600 rounded-full"}),i("span",{class:"ml-2 text-gray-700"})],-1)])),_:1},8,["data"])]),_:1})]),_:1}))}};export{ge as default};
