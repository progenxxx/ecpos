import{T as $,d as c,q as G,k as j,l as W,o as N,c as q,w as d,a as l,i as H,b as t,u as o,j as K,v as Z,e as C,F as ae,h as re,t as z,f as S,n as _,g as M,G as Y,C as ne}from"./app-CacuESpm.js";import{M as P}from"./Modal-CTDQd9c8.js";import{_ as R}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-Oe7tEmQB.js";import{_ as T,a as V,b as E}from"./InputError-DlCP3Rcd.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as ie}from"./TableContainer-D6l808Wc.js";import{_ as ue}from"./Main-2jZhlWuC.js";import{S as de}from"./Save-CFLLzL9K.js";import{B as ce}from"./Back-CPB2HwX9.js";import{C as me}from"./Cart-CNbd93Qn.js";import{P as X,D as pe}from"./dataTables-BnFpA0RH.js";import"./Logout-CqgzcP31.js";/* empty css                                                             */import"./PartyCake143-Di4gRlu7.js";import"./Attendance-B0jvDPeG.js";const fe={class:"grid grid-cols-3 gap-4 h-full"},ge={class:"col-span-3"},ve={class:"col-span-3"},be={key:0,class:"absolute w-full mt-1 !bg-white border rounded-md shadow-lg max-h-60 overflow-auto z-10"},ye=["onMousedown"],we={class:"col-span-3"},he={__name:"Create",props:{showModal:Boolean,JOURNALID:String,items:{type:Array,required:!0}},emits:["toggleActive"],setup(p,{emit:h}){const x=h,f=p,e=$({JOURNALID:"",itemname:"",qty:"",unitid:""}),I=c(""),i=c(!1),O=c(null),m=G(()=>f.items.filter(D=>D.itemname.toLowerCase().includes(I.value.toLowerCase())));function r(D){O.value=D,I.value=D.itemname,e.itemname=D.itemid,i.value=!1}function g(){setTimeout(()=>{i.value=!1},100)}const L=()=>{e.post("/ReceivedItems",{preserveScroll:!0,onSuccess:()=>{e.reset(),location.reload()}})},B=()=>{x("toggleActive")};return j(()=>{e.JOURNALID=f.JOURNALID,W(()=>f.JOURNALID,D=>{e.JOURNALID=D})}),(D,y)=>(N(),q(P,{title:"RECEIVED ORDER ENTRIES",onToggleActive:B,"show-modal":p.showModal},{content:d(()=>[l("form",{onSubmit:H(L,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[l("div",fe,[l("div",ge,[t(T,{for:"JOURNALID",value:"JOURNALID"}),t(V,{id:"JOURNALID",modelValue:o(e).JOURNALID,"onUpdate:modelValue":y[0]||(y[0]=w=>o(e).JOURNALID=w),type:"text",class:"mt-1 block w-full input !bg-white !text-black","is-error":!!o(e).errors.JOURNALID,autofocus:"",disabled:""},null,8,["modelValue","is-error"]),t(E,{message:o(e).errors.JOURNALID,class:"mt-2"},null,8,["message"])]),l("div",ve,[t(T,{for:"itemname",value:"ITEMNAME"}),K(l("input",{type:"text","onUpdate:modelValue":y[1]||(y[1]=w=>I.value=w),onFocus:y[2]||(y[2]=w=>i.value=!0),onBlur:g,placeholder:"Search items...",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[Z,I.value]]),i.value?(N(),C("div",be,[(N(!0),C(ae,null,re(m.value,w=>(N(),C("div",{key:w.itemid,onMousedown:Q=>r(w),class:"px-4 py-2 cursor-pointer hover:bg-gray-100"},z(w.itemname),41,ye))),128))])):S("",!0),t(E,{message:o(e).errors.itemname,class:"mt-2"},null,8,["message"])]),l("div",we,[t(T,{for:"qty",value:"QTY"}),t(V,{id:"qty",modelValue:o(e).qty,"onUpdate:modelValue":y[3]||(y[3]=w=>o(e).qty=w),type:"number",class:"mt-1 block w-full",required:"",autocomplete:"qty"},null,8,["modelValue"]),t(E,{message:o(e).errors.qty,class:"mt-2"},null,8,["message"])])])],32)]),buttons:d(()=>[t(R,{type:"submit",onClick:L,disabled:o(e).processing,class:_({"opacity-25":o(e).processing})},{default:d(()=>y[4]||(y[4]=[M(" SUBMIT ")])),_:1},8,["disabled","class"])]),_:1},8,["show-modal"]))}},Ie=ee(he,[["__scopeId","data-v-39434086"]]),De={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},Ae={class:"grid grid-cols-3 gap-4 h-full"},Ne={class:"col-span-3"},xe={__name:"GetBWP",props:{showModal:Boolean,receivedordertrans:{type:Array,required:!1},JOURNALID:String,items:{type:Array,required:!0}},emits:["toggleActive"],setup(p,{emit:h}){const x=h,f=p,e=$({JOURNALID:"",itemname:"",qty:"",unitid:""}),I=c("");c(!1),c(null);const i=c(!1);G(()=>f.items.filter(r=>r.itemname.toLowerCase().includes(I.value.toLowerCase())));const O=()=>{console.log("Submitting form..."),i.value=!0,e.patch("/ReceivedItems/getbwproducts",{preserveScroll:!0,onSuccess:()=>{console.log("Form submission successful."),i.value=!1,m()},onError:r=>{console.error("Form submission error:",r),i.value=!1}})},m=()=>{x("toggleActive")};return j(()=>{e.JOURNALID=f.JOURNALID,W(()=>f.JOURNALID,r=>{e.JOURNALID=r})}),(r,g)=>(N(),q(P,{title:"GET BW PRODUCTS",onToggleActive:m,"show-modal":p.showModal},{content:d(()=>[l("form",{onSubmit:H(O,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[i.value?(N(),C("div",De,g[1]||(g[1]=[l("div",{class:"spinner"},null,-1)]))):S("",!0),l("div",Ae,[l("div",Ne,[t(T,{for:"INFO",value:"Generate ID NO:"}),t(V,{id:"JOURNALID",modelValue:o(e).JOURNALID,"onUpdate:modelValue":g[0]||(g[0]=L=>o(e).JOURNALID=L),type:"text",class:"mt-1 block w-full input !bg-gray-100 !text-black","is-error":!!o(e).errors.JOURNALID,autofocus:"",disabled:""},null,8,["modelValue","is-error"]),t(E,{message:o(e).errors.JOURNALID,class:"mt-2"},null,8,["message"])])])],32)]),buttons:d(()=>[t(R,{type:"submit",onClick:O,disabled:o(e).processing||i.value,class:_({"opacity-25":o(e).processing||i.value})},{default:d(()=>[M(z(i.value?"Loading...":"GET ITEMS"),1)]),_:1},8,["disabled","class"])]),_:1},8,["show-modal"]))}},Oe=ee(xe,[["__scopeId","data-v-62dd6729"]]),Re={class:"grid grid-cols-3 gap-4 h-full"},Ue={class:"col-span-3"},Le={class:"col-span-3"},ke={class:"relative"},Ce=["placeholder"],Ee={__name:"CopyFrom",props:{showModal:Boolean,inventjournaltransrepos:{type:Array,required:!1},JOURNALID:String,items:{type:Array,required:!0}},emits:["toggleActive"],setup(p,{emit:h}){const x=h,f=p,e=$({JOURNALID:"",itemname:"",qty:"",unitid:"",EndDate:""}),I=c("");c(!1),c(null),G(()=>f.items.filter(m=>m.itemname.toLowerCase().includes(I.value.toLowerCase())));const i=()=>{console.log("Submitting form..."),e.patch("/ItemOrders/getbwproducts",{preserveScroll:!0,onSuccess:()=>{console.log("Form submission successful."),O()},onError:m=>{console.error("Form submission error:",m)}})},O=()=>{x("toggleActive")};return j(()=>{e.JOURNALID=f.JOURNALID,W(()=>f.JOURNALID,m=>{e.JOURNALID=m})}),(m,r)=>(N(),q(P,{title:"GET BW PRODUCTS",onToggleActive:O,"show-modal":p.showModal},{content:d(()=>[l("form",{onSubmit:H(i,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[l("div",Re,[l("div",Ue,[t(T,{for:"INFO",value:"Generate ID NO:"}),t(V,{id:"JOURNALID",modelValue:o(e).JOURNALID,"onUpdate:modelValue":r[0]||(r[0]=g=>o(e).JOURNALID=g),type:"text",class:"mt-1 block w-full input","is-error":!!o(e).errors.JOURNALID,autofocus:"",disabled:""},null,8,["modelValue","is-error"]),t(E,{message:o(e).errors.JOURNALID,class:"mt-2"},null,8,["message"])]),l("div",Le,[l("div",ke,[r[3]||(r[3]=l("div",{class:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"},[l("svg",{class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[l("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])],-1)),K(l("input",{id:"EndDate",type:"date","onUpdate:modelValue":r[1]||(r[1]=g=>o(e).EndDate=g),onInput:r[2]||(r[2]=(...g)=>m.formattedDate2&&m.formattedDate2(...g)),placeholder:m.formattedDate2,class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,40,Ce),[[Z,o(e).EndDate]]),t(E,{message:o(e).errors.EndDate,class:"mt-2"},null,8,["message"])])])])],32)]),buttons:d(()=>[t(R,{type:"submit",onClick:i,disabled:o(e).processing,class:_({"opacity-25":o(e).processing})},{default:d(()=>r[4]||(r[4]=[M(" GET ITEMS ")])),_:1},8,["disabled","class"])]),_:1},8,["show-modal"]))}},Je={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-filter backdrop-blur-sm"},Te={class:"flex justify-start items-center"},Ye={__name:"index",props:{receivedordertrans:{type:Array,required:!0},journalid:{type:[String,Number],required:!0},items:{type:Array,required:!0}},setup(p){X.use(pe);const h=c("");c(""),c("");const x=c(!1),f=c(!1),e=c(!1),I=c(!1),i=p,O=[{data:"ITEMID",title:"ITEMID"},{data:"itemname",title:"ITEMNAME"},{data:"itemgroup",title:"CATEGORY"},{data:"COUNTED",title:"COUNTED",render:function(n,a,v){if(a==="display"){const A=Number(n);let s,u;return A===0?(s="#f3f3f3",u="black"):A<Number(v.moq)?(s="red",u="white"):(s="white",u="black"),`<input type="number" class="counted-input form-input block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" value="${A.toFixed(0)}" min="0" step="1" style="background-color: ${s}; color: ${u};">`}return n}}],m={paging:!1,scrollX:!0,scrollY:"70vh",scrollCollapse:!0,drawCallback:function(n){this.api().rows().every(function(){const v=this.data(),s=this.node().querySelector(".counted-input");if(s){const u=Number(s.value);let k,U;u===0?(k="#f3f3f3",U="black"):u<Number(v.moq)?(k="red",U="white"):(k="white",U="black"),s.style.backgroundColor=k,s.style.color=U,s.addEventListener("change",F=>te(F,v))}})}},r=n=>{h.value=n,e.value=!0,console.log(h.value)},g=()=>{I.value=!1},L=()=>{e.value=!1},B=()=>{f.value=!1};$({StartDate:"",EndDate:""});const D=()=>{window.location.href="/Received"},y=n=>{window.location.href=`/ReceivedViewOrders/${n}`},w=n=>{console.log("Selected Item:",n)},Q=c([]),J=Y({}),b=Y({text:"",type:""}),te=(n,a)=>{const v=n.target.value;J[a.ITEMID]=v;const A=Number(v);let s,u;A===0?(s="#f3f3f3",u="black"):A<Number(a.moq)?(s="red",u="white"):(s="white",u="black"),n.target.style.backgroundColor=s,n.target.style.color=u},oe=async()=>{var n,a,v,A;try{x.value=!0,b.text="Updating counted values...",b.type="info";const s=await ne.post("/api/received-update-all-counted-values",{journalId:i.journalid,updatedValues:J});if(s.data.success){console.log("All values updated successfully");for(const[u,k]of Object.entries(J)){const U=Q.value.find(F=>F.ITEMID===u);U&&(U.COUNTED=k)}Object.keys(J).forEach(u=>delete J[u]),b.text=s.data.message,b.type="success",setTimeout(()=>{location.reload()},1e3)}else throw new Error(s.data.message)}catch(s){console.error("Error updating values:",s),b.text=((a=(n=s.response)==null?void 0:n.data)==null?void 0:a.message)||s.message||"You don't have any changes!",b.type="error",(A=(v=s.response)==null?void 0:v.data)!=null&&A.errors&&s.response.data.errors.forEach(u=>{console.error(u)})}finally{se(),setTimeout(()=>{x.value=!1},500)}},se=()=>{setTimeout(()=>{b.text="",b.type=""},5e3)},le=n=>{window.location.href=`/Receivedwarehouse/orders/${n}`};return(n,a)=>(N(),q(ue,{"active-tab":"RECEIVE"},{modals:d(()=>[t(Ie,{"show-modal":I.value,JOURNALID:h.value,items:i.items,onToggleActive:g,onSelectItem:w},null,8,["show-modal","JOURNALID","items"]),t(Oe,{"show-modal":e.value,JOURNALID:h.value,onToggleActive:L},null,8,["show-modal","JOURNALID"]),t(Ee,{"show-modal":f.value,JOURNALID:h.value,onToggleActive:B},null,8,["show-modal","JOURNALID"])]),main:d(()=>[t(ie,null,{default:d(()=>[x.value?(N(),C("div",Je,a[3]||(a[3]=[l("div",{class:"text-white text-2xl"},"Loading...",-1)]))):S("",!0),b.text?(N(),C("div",{key:1,class:_(["p-4 mb-4 rounded-md",b.type==="success"?"bg-green-100 text-green-700":b.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},z(b.text),3)):S("",!0),l("div",{class:_(["absolute adjust",{"mt-20":b.text}])},[l("div",Te,[t(R,{type:"button",onClick:D,class:"m-1 ml-2 bg-navy p-10"},{default:d(()=>[t(ce,{class:"h-5"})]),_:1}),t(R,{type:"button",onClick:a[0]||(a[0]=v=>r(p.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:d(()=>a[4]||(a[4]=[M(" GENERATE ")])),_:1}),t(R,{type:"button",onClick:oe,class:"m-1 ml-2 bg-navy p-10"},{default:d(()=>[t(de,{class:"h-5"})]),_:1}),t(R,{type:"button",onClick:a[1]||(a[1]=v=>y(p.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:d(()=>[t(me,{class:"h-5"})]),_:1}),t(R,{type:"button",onClick:a[2]||(a[2]=v=>le(p.journalid)),class:"m-1 bg-red-900"},{default:d(()=>a[5]||(a[5]=[M(" WAREHOUSE ")])),_:1})])],2),t(o(X),{data:p.receivedordertrans,columns:O,class:"w-full relative display",options:m},{action:d(v=>a[6]||(a[6]=[l("label",{class:"inline-flex items-center"},[l("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600 rounded-full"}),l("span",{class:"ml-2 text-gray-700"})],-1)])),_:1},8,["data"])]),_:1})]),_:1}))}};export{Ye as default};
