import{d as a,T as O,s as j,N,l as B,e as x,b as w,w as C,u as _,F as D,o as c,a as e,Z as L,t as d,j as k,v as A,f as v,x as $,n as S,c as z}from"./app-D4KRJyko.js";import{_ as F}from"./AdminPanel-BwjEDCtJ.js";import P from"./AttendanceForm-Cnh2olE_.js";import U from"./AttendanceTable-CWLtkFCZ.js";import{d as q}from"./debounce-DQ4Lvv7d.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./RetailGroup-6t20PwtR.js";import"./Logout-8hw4reCp.js";/* empty css                                                             */import"./Modal-C1bDdoN8.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-5n6bCmaZ.js";import"./RetailItems-Dce1d_bp.js";import"./Attendance-DvpGN19-.js";import"./Modal-P3sIJmIO.js";const R={class:"container mx-auto px-3 sm:px-4 lg:px-8 py-4"},Z={class:"mb-6"},G={class:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},J={class:"flex flex-col sm:flex-row gap-2 sm:gap-4"},K={class:"bg-blue-50 rounded-lg px-3 py-2 text-center sm:text-left"},Q={class:"text-lg sm:text-xl font-semibold text-blue-600"},W={class:"bg-green-50 rounded-lg px-3 py-2 text-center sm:text-left"},X={class:"text-lg sm:text-xl font-semibold text-green-600"},Y={class:"mb-6"},ee={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},te={class:"flex flex-col sm:flex-row gap-4"},se={class:"flex-1"},oe={class:"relative"},le={class:"flex flex-col sm:flex-row gap-2 sm:gap-3"},re={class:"mt-4 sm:hidden border-t pt-4"},ae={class:"flex justify-around text-center"},ne={class:"text-sm font-medium text-gray-900"},ie={class:"text-sm font-medium text-gray-900"},de={class:"text-sm font-medium text-gray-900"},ue={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},ce={class:"text-sm text-gray-700"},me={class:"font-medium"},fe={key:0,class:"text-gray-500"},xe={class:"hidden lg:flex items-center gap-2"},ve={class:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden"},pe={key:0,class:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-40"},ge={__name:"Index",props:{attendances:{type:Array,required:!0},filters:{type:Object,default:()=>({search:""})}},setup(p){const g=p,r=a(g.filters.search||""),n=a(""),i=a(""),m=a("table"),b=a(!1),f=a(!1),y=a(!1),I=a(null),l=O({staffId:"",storeId:"",date:"",timeIn:"",timeInPhoto:null,breakIn:"",breakInPhoto:null,breakOut:"",breakOutPhoto:null,timeOut:"",timeOutPhoto:null,status:"ACTIVE"}),u=j(()=>{let s=g.attendances;if(n.value&&(s=s.filter(t=>t.status===n.value)),i.value&&(s=s.filter(t=>t.date===i.value)),r.value){const t=r.value.toLowerCase();s=s.filter(o=>o.staffId.toLowerCase().includes(t)||o.storeId.toLowerCase().includes(t)||o.date.includes(t))}return s}),T=q(s=>{b.value=!0,N.get("/attendance",{search:s,status:n.value,date:i.value},{preserveState:!0,preserveScroll:!0,replace:!0,onFinish:()=>{b.value=!1}})},300);B([r,n,i],([s,t,o])=>{s!==g.filters.search&&T(s)});const M=s=>{y.value=!0,I.value=s,l.staffId=s.staffId,l.storeId=s.storeId,l.date=s.date,l.timeIn=s.timeIn,l.breakIn=s.breakIn,l.breakOut=s.breakOut,l.timeOut=s.timeOut,l.status=s.status,f.value=!0},h=()=>{f.value=!1,l.reset(),l.clearErrors()},V=()=>{y.value?l.put(route("attendance.update",I.value.id),{onSuccess:()=>h()}):l.post(route("attendance.store"),{onSuccess:()=>h()})},E=s=>{confirm("Are you sure you want to delete this record?")&&l.delete(route("attendance.destroy",s))};return(s,t)=>(c(),x(D,null,[w(_(L),{title:"Attendance"},{default:C(()=>t[6]||(t[6]=[e("meta",{name:"description",content:"Attendance Management System"},null,-1)])),_:1}),w(F,{"active-tab":"ATTENDANCE",user:s.$page.props.auth.user},{main:C(()=>[e("div",R,[e("div",Z,[e("div",G,[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900"},"Attendance Management"),e("p",{class:"mt-1 text-sm text-gray-600"},"Track staff attendance and view records")],-1)),e("div",J,[e("div",K,[e("div",Q,d(p.attendances.length),1),t[7]||(t[7]=e("div",{class:"text-xs text-blue-600"},"Total Records",-1))]),e("div",W,[e("div",X,d(p.attendances.filter(o=>o.status==="ACTIVE").length),1),t[8]||(t[8]=e("div",{class:"text-xs text-green-600"},"Active Today",-1))])])])]),e("div",Y,[e("div",ee,[e("div",te,[e("div",se,[t[12]||(t[12]=e("label",{for:"search",class:"sr-only"},"Search records",-1)),e("div",oe,[t[11]||(t[11]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),k(e("input",{id:"search",type:"text",placeholder:"Search by staff ID, store, or date...","onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o),class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[A,r.value]]),r.value?(c(),x("button",{key:0,onClick:t[1]||(t[1]=o=>r.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},t[10]||(t[10]=[e("svg",{class:"h-4 w-4 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):v("",!0)])]),e("div",le,[k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>n.value=o),class:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},t[13]||(t[13]=[e("option",{value:""},"All Status",-1),e("option",{value:"ACTIVE"},"Active",-1),e("option",{value:"INACTIVE"},"Inactive",-1)]),512),[[$,n.value]]),k(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>i.value=o),type:"date",class:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[A,i.value]])])]),e("div",re,[e("div",ae,[e("div",null,[e("div",ne,d(u.value.length),1),t[14]||(t[14]=e("div",{class:"text-xs text-gray-500"},"Showing",-1))]),e("div",null,[e("div",ie,d(u.value.filter(o=>o.timeIn&&!o.timeOut).length),1),t[15]||(t[15]=e("div",{class:"text-xs text-gray-500"},"Checked In",-1))]),e("div",null,[e("div",de,d(u.value.filter(o=>o.timeIn&&o.timeOut).length),1),t[16]||(t[16]=e("div",{class:"text-xs text-gray-500"},"Completed",-1))])])])])]),e("div",ue,[e("div",ce,[e("span",me,d(u.value.length),1),t[17]||(t[17]=e("span",{class:"hidden sm:inline"}," records found",-1)),t[18]||(t[18]=e("span",{class:"sm:hidden"}," results",-1)),r.value||n.value||i.value?(c(),x("span",fe," (filtered) ")):v("",!0)]),e("div",xe,[t[19]||(t[19]=e("span",{class:"text-sm text-gray-500"},"View:",-1)),e("button",{onClick:t[4]||(t[4]=o=>m.value="table"),class:S(["px-3 py-1 text-xs rounded-md transition-colors",m.value==="table"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," Table ",2),e("button",{onClick:t[5]||(t[5]=o=>m.value="card"),class:S(["px-3 py-1 text-xs rounded-md transition-colors",m.value==="card"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," Cards ",2)])]),e("div",ve,[w(U,{attendances:u.value,onEdit:M,onDelete:E},null,8,["attendances"])]),b.value?(c(),x("div",pe,t[20]||(t[20]=[e("div",{class:"bg-white rounded-lg p-6 shadow-xl"},[e("div",{class:"flex items-center gap-3"},[e("svg",{class:"animate-spin h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-sm text-gray-600"},"Loading...")])],-1)]))):v("",!0),f.value?(c(),z(P,{key:1,show:f.value,form:_(l),"is-editing":y.value,onClose:h,onSubmit:V},null,8,["show","form","is-editing"])):v("",!0)])]),_:1},8,["user"])],64))}},Oe=H(ge,[["__scopeId","data-v-738a4cf1"]]);export{Oe as default};
