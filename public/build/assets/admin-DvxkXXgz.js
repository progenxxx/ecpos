import{d as c,l as H,z as ge,k as lt,o as i,e as d,a as t,f as D,n as B,m as Me,F as O,h as q,t as b,i as be,j as U,v as me,C as w,q as Pe,E as kt,b as ve,w as st,a0 as _t,D as Ct,c as St,B as At,g as T,s as Re,u as at}from"./app-CacuESpm.js";import{C,r as Tt}from"./chart-8SaNzrGi.js";import{_ as Dt}from"./AdminPanel-_h8KsVxO.js";import{_ as rt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as ot,I as zt,r as Mt,R as Pt,P as Rt}from"./CubeIcon-D4G-jgId.js";import{_ as Lt}from"./MultiSelectDropdown-DQa9I4Ez.js";/* empty css                                                                        */import"./RetailGroup-CN0qeRLj.js";import"./Logout-CqgzcP31.js";/* empty css                                                             */import"./Modal-CTDQd9c8.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-Oe7tEmQB.js";import"./RetailItems-CjOIxooj.js";import"./Attendance-B0jvDPeG.js";const Bt={class:"fixed bottom-6 right-6 z-50"},Nt={key:0,class:"relative"},Vt={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold"},$t={key:1,class:"bg-white rounded-lg shadow-2xl w-96 h-[500px] flex flex-col border border-gray-200 overflow-hidden"},jt={key:0,class:"text-center text-gray-500 text-sm"},Et={class:"text-left"},Ot={class:"space-y-1"},Ft=["onClick"],It={class:"text-sm whitespace-pre-wrap"},Wt={class:"text-xs opacity-70 mt-1 block"},Ht={key:1,class:"flex justify-start"},Ut={class:"p-4 bg-white border-t"},qt=["disabled"],Qt=["disabled"],Zt={key:0,class:"mt-2 flex space-x-1 overflow-x-auto"},Gt=["onClick"],Jt={__name:"FloatingChatBot",setup(Y){const M=c(!1),k=c([]),S=c(""),N=c(!1),V=c(!1),Q=c([]),$=c(null),ee=["Today's sales summary","Top performing items","Sales improvement tips","Store performance"],te=async()=>{M.value=!0,V.value=!1,k.value.length===0&&(await ae(),await oe()),await ge(),E()},se=()=>{M.value=!1},ae=async()=>{try{const m=await w.get(route("chatbot.welcome"));m.data.success&&k.value.push({type:"bot",content:m.data.message,timestamp:new Date})}catch(m){console.error("Failed to load welcome message:",m)}},oe=async()=>{try{const m=await w.get(route("chatbot.sample.questions"));m.data.success&&(Q.value=m.data.questions)}catch(m){console.error("Failed to load sample questions:",m)}},Z=async()=>{if(!S.value.trim())return;const m=S.value.trim();S.value="",k.value.push({type:"user",content:m,timestamp:new Date}),await ge(),E(),N.value=!0;try{const g=await w.post(route("chatbot.send.message"),{message:m});await new Promise(f=>setTimeout(f,1e3)),g.data.success&&g.data.response?k.value.push({type:"bot",content:g.data.response,timestamp:new Date}):k.value.push({type:"bot",content:g.data.message||"Sorry, I encountered an issue. Please try again.",timestamp:new Date})}catch(g){console.error("Failed to send message:",g),k.value.push({type:"bot",content:"Sorry, I'm having trouble connecting. Please check your internet connection and try again.",timestamp:new Date})}finally{N.value=!1,await ge(),E()}},G=m=>{S.value=m,Z()},E=()=>{$.value&&($.value.scrollTop=$.value.scrollHeight)},le=m=>new Date(m).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return H(k,()=>{ge(()=>{E(),!M.value&&k.value.length>0&&(V.value=!0)})},{deep:!0}),lt(()=>{setTimeout(()=>{!M.value&&k.value.length===0&&(V.value=!0)},5e3)}),(m,g)=>(i(),d("div",Bt,[M.value?D("",!0):(i(),d("div",Nt,[t("button",{onClick:te,class:B(["bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 group",{"animate-pulse":V.value}])},[g[1]||(g[1]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.955 8.955 0 01-2.15-.26l-4.244 1.082a1 1 0 01-1.288-1.288l1.082-4.244A8.955 8.955 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})],-1)),V.value?(i(),d("div",Vt," ! ")):D("",!0)],2),g[2]||(g[2]=t("div",{class:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap"}," AI Sales Assistant ",-1))])),M.value?(i(),d("div",$t,[t("div",{class:"bg-blue-600 text-white px-4 py-3 flex items-center justify-between"},[g[4]||(g[4]=Me('<div class="flex items-center space-x-2" data-v-e65fb064><div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center" data-v-e65fb064><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e65fb064><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-e65fb064></path></svg></div><div data-v-e65fb064><h3 class="font-semibold text-sm" data-v-e65fb064>AI Sales Assistant</h3><p class="text-xs text-blue-100" data-v-e65fb064>Online</p></div></div>',1)),t("button",{onClick:se,class:"text-blue-100 hover:text-white transition-colors duration-200"},g[3]||(g[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",{ref_key:"messagesContainer",ref:$,class:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50"},[k.value.length===0?(i(),d("div",jt,[g[6]||(g[6]=Me('<div class="mb-4" data-v-e65fb064><div class="w-16 h-16 bg-blue-100 rounded-full mx-auto flex items-center justify-center mb-2" data-v-e65fb064><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-e65fb064><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-e65fb064></path></svg></div><p class="font-medium text-gray-700" data-v-e65fb064>Welcome to your AI Sales Assistant!</p><p class="text-xs text-gray-500 mt-1" data-v-e65fb064>Ask me about your sales performance, strategies, and insights.</p></div>',1)),t("div",Et,[g[5]||(g[5]=t("p",{class:"text-xs font-medium text-gray-600 mb-2"},"Try asking:",-1)),t("div",Ot,[(i(!0),d(O,null,q(Q.value.slice(0,3),f=>(i(),d("button",{key:f,onClick:F=>G(f),class:"block w-full text-left px-3 py-2 bg-white rounded border text-xs hover:bg-blue-50 hover:border-blue-300 transition-colors duration-200"},' "'+b(f)+'" ',9,Ft))),128))])])])):D("",!0),(i(!0),d(O,null,q(k.value,(f,F)=>(i(),d("div",{key:F,class:B(f.type==="user"?"flex justify-end":"flex justify-start")},[t("div",{class:B([f.type==="user"?"bg-blue-600 text-white rounded-l-lg rounded-tr-lg":"bg-white text-gray-800 rounded-r-lg rounded-tl-lg border","max-w-[80%] px-3 py-2 shadow-sm"])},[t("p",It,b(f.content),1),t("span",Wt,b(le(f.timestamp)),1)],2)],2))),128)),N.value?(i(),d("div",Ht,g[7]||(g[7]=[Me('<div class="bg-white text-gray-800 rounded-r-lg rounded-tl-lg border px-3 py-2 shadow-sm" data-v-e65fb064><div class="flex space-x-1" data-v-e65fb064><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" data-v-e65fb064></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.1s;" data-v-e65fb064></div><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-e65fb064></div></div></div>',1)]))):D("",!0)],512),t("div",Ut,[t("form",{onSubmit:be(Z,["prevent"]),class:"flex space-x-2"},[U(t("input",{"onUpdate:modelValue":g[0]||(g[0]=f=>S.value=f),disabled:N.value,type:"text",placeholder:"Ask about sales, strategies, insights...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",maxlength:"1000"},null,8,qt),[[me,S.value]]),t("button",{type:"submit",disabled:!S.value.trim()||N.value,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-3 py-2 rounded-lg transition-colors duration-200"},g[8]||(g[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)]),8,Qt)],32),k.value.length>0?(i(),d("div",Zt,[(i(),d(O,null,q(ee,f=>t("button",{key:f,onClick:F=>G(f),class:"flex-shrink-0 text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200"},b(f),9,Gt)),64))])):D("",!0)])])):D("",!0)]))}},Kt=rt(Jt,[["__scopeId","data-v-e65fb064"]]),Xt={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6 space-y-6 relative overflow-hidden"},Yt={class:"relative z-10 bg-white/80 rounded-3xl shadow-2xl border border-blue-100/50 p-6 transform transition-all duration-500 hover:scale-[1.02]"},es={class:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"},ts={class:"flex flex-col w-full md:w-auto"},ss={class:"flex items-center space-x-4"},as={class:"text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 mb-3 animate-pulse-slow"},os={class:"flex space-x-4"},ls={class:"flex flex-col"},rs={class:"flex flex-col"},ns={key:0,class:"text-red-500 text-xs mt-2 flex items-center space-x-2 animate-bounce"},is={class:"w-full md:w-auto"},ds={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},cs={class:"bg-white/90 rounded-3xl shadow-xl border border-blue-100/50 p-6 space-y-4 relative overflow-hidden group"},us={class:"flex justify-between items-center relative z-10"},ps={class:"relative z-10"},gs={class:"text-xs uppercase tracking-wider text-gray-500 mb-2"},vs={class:"text-sm text-gray-400 mt-2"},bs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ms={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},fs={class:"h-[400px] relative z-10"},ys={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},hs={class:"max-h-[400px] overflow-y-auto custom-scrollbar relative z-10"},xs={class:"font-semibold text-gray-800 mb-2"},ws={class:"text-gray-600 text-sm"},ks={key:1,class:"text-gray-500 text-center py-4 italic"},_s={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},Cs={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 relative z-10"},Ss={class:"flex items-center space-x-3"},As={class:"h-[500px] relative z-10"},Ts={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ds={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},zs={class:"h-[400px] relative z-10"},Ms={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},Ps={class:"h-[400px] relative z-10"},Rs={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},Ls={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 relative z-10"},Bs={class:"flex items-center space-x-3"},Ns={class:"w-80"},Vs={class:"block truncate text-gray-700"},$s={key:0,class:"text-gray-500"},js={key:1},Es={key:2},Os={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},Fs={key:0,class:"absolute z-30 mt-1 w-full bg-white shadow-xl border border-gray-200 rounded-lg overflow-hidden"},Is={class:"p-3 border-b border-gray-200 bg-gray-50"},Ws={class:"max-h-80 overflow-y-auto"},Hs={class:"border-b border-gray-100 bg-gray-50"},Us=["checked","indeterminate"],qs={class:"ml-3 font-medium text-gray-900"},Qs=["onClick"],Zs=["checked"],Gs={class:"ml-3 flex-1"},Js={class:"text-sm font-medium text-gray-900"},Ks={class:"text-xs text-gray-500"},Xs={key:0,class:"px-4 py-8 text-center text-gray-500"},Ys={key:0,class:"text-xs text-gray-500 mt-1"},ea={key:1,class:"text-xs text-gray-500 mt-1"},ta={key:0,class:"text-blue-600"},sa={class:"h-[400px] relative z-10"},aa={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},oa={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},la={class:"h-[400px] relative z-10"},ra={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},na={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 relative z-10"},ia={class:"flex items-center space-x-3"},da={class:"h-[400px] relative z-10"},ca={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},ua={class:"h-[500px] relative z-10"},pa={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ga={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},va={class:"h-[400px] relative z-10"},ba={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.02] transition-all duration-300"},ma={class:"flex justify-between items-start mb-6 relative z-10"},fa={class:"w-80"},ya={class:"block truncate text-gray-700"},ha={key:0,class:"text-gray-500"},xa={key:1},wa={key:2},ka={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},_a={key:0,class:"absolute z-20 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"},Ca={class:"border-b border-gray-200"},Sa=["checked","indeterminate"],Aa=["onClick"],Ta=["checked"],Da={class:"ml-2 text-gray-900"},za={key:0,class:"text-xs text-gray-500 mt-1"},Ma={key:1,class:"text-xs text-gray-500 mt-1"},Pa={key:0,class:"text-orange-600"},Ra={class:"h-[400px] relative z-10"},La={class:"bg-white/80 rounded-3xl shadow-xl border border-blue-100/50 p-6 relative overflow-hidden hover:scale-[1.01] transition-all duration-300"},Ba={class:"h-[400px] relative z-10"},Na={__name:"admin",props:{username:{type:String,default:"User"},announcements:{type:Array,required:!0},metrics:{type:Object,required:!0,default:()=>({totalGross:0,totalNetsales:0,totalDiscount:0,totalCost:0,totalVat:0,totalVatableSales:0,paymentBreakdown:{cash:0,gcash:0,paymaya:0,card:0,loyaltyCard:0,foodPanda:0,grabFood:0}})}},setup(Y){C.register(...Tt),w.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content");const M=Y,k=c(M.metrics),S=c(""),N=c(null);let V=null;const Q=c(null);let $=null;c(null),c(null);const ee=c(null);let te=null;const se=c(null);let ae=null;const oe=c(null);let Z=null;const G=c(null);let E=null;const le=c(null);let m=null;const g=c(null);let f=null;const F=c(null);let fe=null;const Le=c([]),_=c([]),re=c([]),h=c([]),j=c([]),x=c([]),ne=c(!1),ye=c(null),ie=c(!1),he=c(null),J=c(""),nt=async()=>{try{const s=await w.get(route("get.stores"));Le.value=s.data,_.value=s.data}catch(s){console.error("Error fetching stores:",s)}},it=async(s="")=>{try{console.log("Fetching products with search term:",s);const e=await w.get(route("get.products"),{params:{search:s}});console.log("Products loaded:",e.data.length),re.value=e.data}catch(e){console.error("Error fetching products:",e),e.response&&console.error("Products error response:",e.response.data)}},dt=async(s="")=>{try{console.log("Fetching categories...");const e=await w.get(route("get.categories"),{params:{search:s}});console.log("Categories response:",e.data),j.value=e.data}catch(e){console.error("Error fetching categories:",e),e.response&&console.error("Categories error response:",e.response.data)}},ct=s=>{const e=x.value.indexOf(s);e===-1?x.value.push(s):x.value.splice(e,1)},ut=()=>{x.value.length===j.value.length?x.value=[]:x.value=j.value.map(s=>s.value)},pt=s=>{const e=j.value.find(a=>a.value===s);return e?e.label:s},Be=s=>{ye.value&&!ye.value.contains(s.target)&&(ne.value=!1)},gt=s=>{const e=h.value.indexOf(s);e===-1?h.value.push(s):h.value.splice(e,1)},vt=()=>{h.value.length===P.value.length&&P.value.length>0?h.value=[]:h.value=P.value.map(s=>s.itemid)},bt=s=>{const e=re.value.find(a=>a.itemid===s);return e?e.itemname:s},P=Pe(()=>J.value?re.value.filter(s=>s.itemname.toLowerCase().includes(J.value.toLowerCase())||s.itemid.toLowerCase().includes(J.value.toLowerCase())):re.value),Ne=mt(()=>{},300);function mt(s,e){let a;return function(...r){clearTimeout(a),a=setTimeout(()=>s.apply(this,r),e)}}const Ve=s=>{he.value&&!he.value.contains(s.target)&&(ie.value=!1,J.value="")};c(null),c(!1);const xe=c(null),we=c(null);let ke=null,ue=null;const p=c((()=>{const s=new Date,e=new Date;return e.setDate(s.getDate()-30),{start_date:e.toISOString().split("T")[0],end_date:s.toISOString().split("T")[0]}})()),de=c("all"),I=c("gross"),W=c("grossamount"),K=Pe(()=>{const s=new Date(p.value.start_date),e=new Date(p.value.end_date),a=new Date;return s<=e&&s<=a&&e<=a}),R=s=>{const e=Number(s);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(isNaN(e)?0:e)},ft=Pe(()=>{const s=k.value||{};return[{title:"TOTAL GROSS",value:R(s.totalGross),icon:ot,color:"text-blue-600",bgColor:"bg-blue-100",description:"Total revenue before deductions"},{title:"TOTAL NETSALES",value:R(s.totalNetsales),icon:zt,color:"text-green-600",bgColor:"bg-green-100",description:"Revenue after all deductions"},{title:"TOTAL DISCOUNT",value:R(s.totalDiscount),icon:ot,color:"text-amber-600",bgColor:"bg-amber-100",description:"Sum of all applied discounts"},{title:"TOTAL COST",value:R(s.totalCost),icon:Mt,color:"text-purple-600",bgColor:"bg-purple-100",description:"Aggregate cost of goods sold"},{title:"TOTAL VAT",value:R(s.totalVat),icon:Pt,color:"text-pink-600",bgColor:"bg-pink-100",description:"Value Added Tax collected"},{title:"VATABLE SALES",value:R(s.totalVatableSales),icon:Rt,color:"text-indigo-600",bgColor:"bg-indigo-100",description:"Sales subject to VAT"}]}),_e=()=>{var l;if(!xe.value)return;const s=xe.value.getContext("2d");ke&&ke.destroy();const e=((l=k.value)==null?void 0:l.paymentBreakdown)||{},a=Object.keys(e).map(o=>{const v=e[o],n=o.replace(/([A-Z])/g," $1").trim(),u=R(v);return`${n} (${u})`}),r=Object.values(e).map(o=>Number(o)||0);ke=new C(s,{type:"pie",data:{labels:a,datasets:[{data:r,backgroundColor:["#3B82F6","#10B981","#F43F5E","#6366F1","#8B5CF6","#EC4899","#F97316"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:function(o){const v=o.dataset.data.reduce((z,A)=>z+A,0),n=o.parsed,u=(n/v*100).toFixed(2);return`${o.label}: ${n.toFixed(2)} (${u}%)`}}}}}})},Ce=async()=>{var s,e,a;try{const r={start_date:p.value.start_date,end_date:p.value.end_date,stores:_.value.map(u=>u.NAME||(typeof u=="object"?u.NAME:u)),product_type:de.value};console.log("Top/Bottom Products Payload:",r);const l=await w.post(route("get.top.bottom.products"),r);if(console.log("Top/Bottom Products Response:",l.data),console.log("Response Status:",l.status),l.status!==200)throw new Error(`API returned status: ${l.status}`);const o=Array.isArray((s=l==null?void 0:l.data)==null?void 0:s.topProducts)?l.data.topProducts:[],v=Array.isArray((e=l==null?void 0:l.data)==null?void 0:e.bottomProducts)?l.data.bottomProducts:[],n=((a=l==null?void 0:l.data)==null?void 0:a.summary)||{};console.log("Processed Data:",{topProductsCount:o.length,bottomProductsCount:v.length,summaryData:n}),$e(o,v,n)}catch(r){console.error("Error fetching top/bottom products:",r),$e([],[],{})}},$e=(s,e,a={})=>{if(!we.value)return;const r=we.value.getContext("2d");if(ue&&ue.destroy(),(!s||s.length===0)&&(!e||e.length===0)){ue=new C(r,{type:"bar",data:{labels:["No Data Available"],datasets:[{label:"No products data available",data:[0],backgroundColor:"rgba(128, 128, 128, 0.3)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Popular Products & Products Under Monitoring (No Data)",font:{size:14,weight:"bold"}}}}});return}console.log("Top Products Data:",s),console.log("Bottom Products Data:",e);const l=(s||[]).slice(0,10),o=(e||[]).slice(0,10),v=l.map(y=>y.itemname||"Unknown"),n=o.map(y=>y.itemname||"Unknown"),u=l.map(y=>Number(y.total_sales||0)),z=o.map(y=>Number(y.total_sales||0)),A=[...v.map(y=>`üî• ${y}`),...n.map(y=>`‚ö†Ô∏è ${y}`)],L=[...u,...z],Te=[...Array(l.length).fill("rgba(34, 197, 94, 0.6)"),...Array(o.length).fill("rgba(239, 68, 68, 0.6)")],De=[...Array(l.length).fill("rgba(34, 197, 94, 1)"),...Array(o.length).fill("rgba(239, 68, 68, 1)")];ue=new C(r,{type:"bar",data:{labels:A,datasets:[{label:"Sales Amount (‚Ç±)",data:L,backgroundColor:Te,borderColor:De,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Popular Products & Products Under Monitoring ${(()=>{switch(de.value){case"regular":return"(Regular Products Only)";case"non_product":return"(Non Products Only)";default:return"(All Products)"}})()}`,font:{size:14,weight:"bold"}},legend:{display:!1},tooltip:{callbacks:{title:function(y){return y[0].label.replace(/üî•|‚ö†Ô∏è/g,"").trim()},label:function(y){const yt=y.parsed.y,ze=y.dataIndex;let X=`Sales: ‚Ç±${yt.toLocaleString()}`;const tt=ze<l.length,ce=tt?l[ze]:o[ze-l.length];if(ce){const ht=ce.product_category||"unknown",xt=ce.retail_department||"Unknown",wt=ce.store_count||0;X+=`
Quantity: ${(ce.total_quantity||0).toLocaleString()}`,X+=`
Category: ${ht==="non_product"?"Non Product":"Regular Product"}`,X+=`
Department: ${xt}`,X+=`
Stores: ${wt}`,X+=`
Type: ${tt?"Top Performer":"Under Monitoring"}`}return X}}}},scales:{x:{ticks:{maxRotation:45,minRotation:45,font:{size:10}}},y:{beginAtZero:!0,title:{display:!0,text:"Sales Amount (‚Ç±)"},ticks:{callback:function(y){return"‚Ç±"+y.toLocaleString()}}}}}})},je=async()=>{try{console.log("Selected Stores:",_.value);const s={start_date:p.value.start_date,end_date:p.value.end_date,stores:_.value.map(a=>typeof a=="object"?a.NAME:a)};console.log("Payload for metrics:",s);const e=await w.post(route("get.metrics"),s);console.log("Metrics response:",e.data),k.value=e.data||M.metrics,_e()}catch(s){console.error("Error fetching metrics:",s),k.value=M.metrics,_e()}},Ee=async()=>{try{const s={start_date:p.value.start_date,end_date:p.value.end_date,stores:_.value.map(a=>typeof a=="object"?a.NAME:a)},e=await w.post(route("get.monthly.sales"),s);Oe(e.data||[])}catch(s){console.error("Error fetching monthly sales:",s),Oe([])}},Oe=s=>{if(!N.value)return;const e=N.value.getContext("2d");V&&V.destroy();const a=Array.isArray(s)?s:[],r=a.length>0?a.map(o=>o.label):["No Data"],l=a.length>0?a.map(o=>o.total_sales):[0];V=new C(e,{type:"line",data:{labels:r,datasets:[{label:"Monthly Sales",data:l,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.1,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(o){return R(o.parsed.y)}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Sales Amount"},ticks:{callback:function(o){return R(o)}}}}}})},Fe=async()=>{var s,e;try{const a={start_date:p.value.start_date,end_date:p.value.end_date,stores:_.value.map(v=>typeof v=="object"?v.NAME:v)},r=await w.post(route("get.top.wastes"),a);console.log("Waste Analysis Response:",r.data);const l=Array.isArray((s=r==null?void 0:r.data)==null?void 0:s.topWastesOverall)?r.data.topWastesOverall:[],o=Array.isArray((e=r==null?void 0:r.data)==null?void 0:e.wasteSummaryByType)?r.data.wasteSummaryByType:[];Ie(l,o)}catch(a){console.error("Error fetching top wastes:",a),Ie([],[])}},Ie=(s,e=[])=>{if(!Q.value)return;const a=Q.value.getContext("2d");if($&&$.destroy(),!s||s.length===0){$=new C(a,{type:"bar",data:{labels:["No Data"],datasets:[{label:"No waste data available",data:[0],backgroundColor:"rgba(128, 128, 128, 0.3)"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}});return}const r=s.slice(0,10).map(n=>{const u=n.itemname||n.ITEMID;return u.length>20?u.substring(0,20)+"...":u}),l=s.slice(0,10).map(n=>Math.abs(Number(n.total_waste_quantity||0))),o=s.slice(0,10).map(n=>Math.abs(Number(n.total_waste_cost||0))),v=s.slice(0,10).map(n=>n.waste_types||"Various");$=new C(a,{type:"bar",data:{labels:r,datasets:[{label:"Waste Quantity",data:l,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,yAxisID:"y"},{label:"Waste Cost (‚Ç±)",data:o,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,type:"line",yAxisID:"y1",fill:!1,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:"Top Waste Items (Stock Counting Analysis)",font:{size:14,weight:"bold"}},legend:{position:"top"},tooltip:{callbacks:{title:function(n){var A,L;const u=n[0].dataIndex;return((A=s[u])==null?void 0:A.itemname)||((L=s[u])==null?void 0:L.ITEMID)||"Unknown"},label:function(n){const u=n.parsed.y,z=n.dataset.label,A=n.dataIndex;v[A];let L=`${z}: `;return n.dataset.label==="Waste Cost (‚Ç±)"?L+=R(u):L+=u.toFixed(2)+" units",L},afterLabel:function(n){const u=n.dataIndex;return`Waste Types: ${v[u]}`}}}},scales:{x:{title:{display:!0,text:"Items"},ticks:{maxRotation:45,minRotation:45}},y:{type:"linear",display:!0,position:"left",beginAtZero:!0,title:{display:!0,text:"Waste Quantity (units)"},grid:{drawOnChartArea:!1}},y1:{type:"linear",display:!0,position:"right",beginAtZero:!0,title:{display:!0,text:"Waste Cost (‚Ç±)"},grid:{drawOnChartArea:!0},ticks:{callback:function(n){return"‚Ç±"+n.toLocaleString()}}}}}})},pe=async()=>{try{const s={start_date:p.value.start_date,end_date:p.value.end_date,filter_by:I.value,products:h.value};console.log("Fetching transaction sales with payload:",s);const e=await w.post(route("get.transaction.sales"),s);console.log("Transaction sales response:",e.data),We(e.data||{data:[],summary:{}})}catch(s){console.error("Error fetching transaction sales:",s),s.response&&console.error("Transaction sales error response:",s.response.data),We({data:[],summary:{}})}},We=s=>{if(!ee.value)return;const e=ee.value.getContext("2d");te&&te.destroy();const a=s.data||[],r=a.map(o=>o.label),l=a.map(o=>o.total_value);te=new C(e,{type:"line",data:{labels:r,datasets:[{label:I.value==="qty"?"Total Quantity":"Total Sales (‚Ç±)",data:l,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Transaction ${I.value==="qty"?"Quantity":"Sales"} Trend`,font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(o){return I.value==="qty"?o.toLocaleString()+" items":"‚Ç±"+o.toLocaleString()}}}}}})},He=async()=>{try{const s={start_date:p.value.start_date,end_date:p.value.end_date,stores:_.value.map(a=>typeof a=="object"?a.NAME:a)},e=await w.post(route("get.sales.by.hour"),s);Ue(e.data||{data:[],summary:{}})}catch(s){console.error("Error fetching sales by hour:",s),Ue({data:[],summary:{}})}},Ue=s=>{if(!se.value)return;const e=se.value.getContext("2d");ae&&ae.destroy();const a=s.data||[],r=a.map(o=>o.label),l=a.map(o=>o.total_sales);ae=new C(e,{type:"bar",data:{labels:r,datasets:[{label:"Sales (‚Ç±)",data:l,backgroundColor:"rgba(16, 185, 129, 0.6)",borderColor:"rgba(16, 185, 129, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Hour",font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(o){return"‚Ç±"+o.toLocaleString()}}}}}})},Se=async()=>{try{const s={start_date:p.value.start_date,end_date:p.value.end_date,stores:_.value.map(a=>typeof a=="object"?a.NAME:a),filter_by:W.value},e=await w.post(route("get.top.stores"),s);qe(e.data||{data:[],summary:{}})}catch(s){console.error("Error fetching top stores:",s),qe({data:[],summary:{}})}},qe=s=>{if(!oe.value)return;const e=oe.value.getContext("2d");Z&&Z.destroy();const a=s.data||[],r=a.map(o=>o.store),l=a.map(o=>o.total_value);Z=new C(e,{type:"bar",data:{labels:r,datasets:[{label:Qe(W.value),data:l,backgroundColor:"rgba(139, 92, 246, 0.6)",borderColor:"rgba(139, 92, 246, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:`Top Stores by ${Qe(W.value)}`,font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{x:{ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,ticks:{callback:function(o){return W.value==="qty"?o.toLocaleString()+" items":"‚Ç±"+o.toLocaleString()}}}}}})},Qe=s=>({grossamount:"Gross Amount",discamount:"Discount Amount",netamount:"Net Amount",qty:"Quantity"})[s]||"Gross Amount",Ze=async()=>{try{const s={start_date:p.value.start_date,end_date:p.value.end_date,stores:_.value.map(a=>typeof a=="object"?a.NAME:a)},e=await w.post(route("get.advanced.analysis"),s);Ge(e.data||{salesTrend:[],storeComparison:[],categoryPerformance:[]})}catch(s){console.error("Error fetching advanced analysis:",s),Ge({salesTrend:[],storeComparison:[],categoryPerformance:[]})}},Ge=s=>{if(!G.value)return;const e=G.value.getContext("2d");E&&E.destroy();const a=s.salesTrend||[],r=a.map(n=>n.label),l=a.map(n=>n.gross_sales),o=a.map(n=>n.net_sales),v=a.map(n=>n.discount_amount);E=new C(e,{type:"line",data:{labels:r,datasets:[{label:"Gross Sales",data:l,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4},{label:"Net Sales",data:o,borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4},{label:"Discounts",data:v,borderColor:"rgba(239, 68, 68, 1)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Advanced Sales Analysis",font:{size:14,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(n){return"‚Ç±"+n.toLocaleString()}}}}}})},Je=async()=>{try{const s={start_date:p.value.start_date,end_date:p.value.end_date,stores:_.value.map(a=>typeof a=="object"?a.NAME:a)},e=await w.post(route("get.received.delivery.vs.sales"),s);Ke(e.data||{data:[],summary:{}})}catch(s){console.error("Error fetching received delivery vs sales:",s),Ke({data:[],summary:{}})}},Ke=s=>{if(!le.value)return;const e=le.value.getContext("2d");m&&m.destroy();const a=s.data||[],r=a.map(v=>v.label),l=a.map(v=>v.received_delivery),o=a.map(v=>v.total_sales);m=new C(e,{type:"line",data:{labels:r,datasets:[{label:"Received Delivery",data:l,borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!1},{label:"Total Sales",data:o,borderColor:"rgba(16, 185, 129, 1)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Received Delivery vs Sales",font:{size:14,weight:"bold"}},legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(v){return v.toLocaleString()+" units"}}}}}})},Ae=async()=>{try{const s={start_date:p.value.start_date,end_date:p.value.end_date,stores:_.value.map(a=>typeof a=="object"?a.NAME:a),categories:x.value};console.log("Fetching sales by category with payload:",s);const e=await w.post(route("get.sales.by.category"),s);console.log("Sales by category response:",e.data),Xe(e.data||{data:[],summary:{}})}catch(s){console.error("Error fetching sales by category:",s),s.response&&console.error("Error response:",s.response.data),Xe({data:[],summary:{}})}},Xe=s=>{if(!g.value)return;const e=g.value.getContext("2d");f&&f.destroy();const a=s.data||[];if(!a||a.length===0){f=new C(e,{type:"doughnut",data:{labels:["No Data Available"],datasets:[{data:[1],backgroundColor:["rgba(128, 128, 128, 0.3)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Category (No Data)",font:{size:14,weight:"bold"}},legend:{display:!1}}}});return}const r=a.slice(0,10),l=a.slice(10);let o=r.map(u=>u.category),v=r.map(u=>u.total_sales);if(l.length>0){const u=l.reduce((z,A)=>z+A.total_sales,0);o.push(`Others (${l.length} categories)`),v.push(u)}const n=["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)","rgba(236, 72, 153, 0.8)","rgba(34, 197, 94, 0.8)","rgba(168, 85, 247, 0.8)","rgba(251, 146, 60, 0.8)","rgba(14, 165, 233, 0.8)","rgba(156, 163, 175, 0.8)"];f=new C(e,{type:"doughnut",data:{labels:o,datasets:[{data:v,backgroundColor:n.slice(0,o.length),borderColor:n.slice(0,o.length).map(u=>u.replace("0.8","1")),borderWidth:2,hoverOffset:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Sales by Category",font:{size:14,weight:"bold"}},legend:{position:"right",labels:{padding:15,usePointStyle:!0,font:{size:11}}},tooltip:{callbacks:{label:function(u){const z=u.dataset.data.reduce((Te,De)=>Te+De,0),A=u.parsed,L=(A/z*100).toFixed(1);return`${u.label}: ‚Ç±${A.toLocaleString()} (${L}%)`}}}}}})},Ye=async()=>{try{const s={start_date:p.value.start_date,end_date:p.value.end_date,stores:_.value.map(a=>typeof a=="object"?a.NAME:a)},e=await w.post(route("get.top.variance.stores"),s);et(e.data||{data:[],summary:{}})}catch(s){console.error("Error fetching top variance stores:",s),et({data:[],summary:{}})}},et=s=>{if(!F.value)return;const e=F.value.getContext("2d");fe&&fe.destroy();const a=s.data||[],r=a.map(o=>o.store),l=a.map(o=>o.total_variance);fe=new C(e,{type:"bar",data:{labels:r,datasets:[{label:"Total Variance",data:l,backgroundColor:"rgba(239, 68, 68, 0.6)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Top 10 Stores Under Monitoring (Highest Variances)",font:{size:14,weight:"bold"}},legend:{display:!1}},scales:{x:{ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,ticks:{callback:function(o){return o.toLocaleString()+" units"}}}}}})};return H([()=>p.value.start_date,()=>p.value.end_date,()=>JSON.stringify(_.value)],()=>{K.value?(S.value="",je(),Ce(),Ee(),Fe(),pe(),He(),Se(),Ze(),Je(),Ae(),Ye()):S.value="Invalid date range. Please check your selections."}),H(()=>de.value,()=>{K.value&&Ce()}),H(()=>I.value,()=>{K.value&&pe()}),H(()=>W.value,()=>{K.value&&Se()}),H(()=>JSON.stringify(h.value),()=>{K.value&&pe()}),H(()=>JSON.stringify(x.value),()=>{K.value&&Ae()}),lt(()=>{_e(),nt(),it(),dt(),je(),Ce(),Ee(),Fe(),pe(),He(),Se(),Ze(),Je(),Ae(),Ye(),document.addEventListener("click",Be),document.addEventListener("click",Ve)}),kt(()=>{document.removeEventListener("click",Be),document.removeEventListener("click",Ve)}),(s,e)=>(i(),d(O,null,[ve(Dt,{"active-tab":"DASHBOARD"},{main:st(()=>[t("div",Xt,[e[52]||(e[52]=t("div",{class:"absolute inset-0 opacity-10 bg-pattern z-0"},null,-1)),t("div",Yt,[t("div",es,[t("div",ts,[t("div",ss,[t("h1",as," Welcome back, "+b(Y.username)+"! üëã ",1),t("div",os,[t("div",ls,[e[11]||(e[11]=t("label",{class:"text-sm font-medium text-gray-600 mb-1"},"Start Date",-1)),U(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>p.value.start_date=a),class:B(["border-2 border-blue-200 rounded-xl px-4 py-2 focus:ring-4 focus:ring-blue-300/50 transition-all duration-300",{"border-red-500":S.value}])},null,2),[[me,p.value.start_date]])]),t("div",rs,[e[12]||(e[12]=t("label",{class:"text-sm font-medium text-gray-600 mb-1"},"End Date",-1)),U(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>p.value.end_date=a),class:B(["border-2 border-blue-200 rounded-xl px-4 py-2 focus:ring-4 focus:ring-blue-300/50 transition-all duration-300",{"border-red-500":S.value}])},null,2),[[me,p.value.end_date]])])])]),S.value?(i(),d("div",ns,[e[13]||(e[13]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),t("span",null,b(S.value),1)])):D("",!0)]),t("div",is,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-600 mb-1"},"Stores",-1)),ve(Lt,{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=a=>_.value=a),options:Le.value,multiple:!0,class:"w-full md:w-64"},null,8,["modelValue","options"])])])]),t("div",ds,[ve(_t,{"enter-active-class":"transition-all duration-700 ease-out","enter-from-class":"opacity-0 translate-y-10","enter-to-class":"opacity-100 translate-y-0"},{default:st(()=>[(i(!0),d(O,null,q(ft.value,(a,r)=>(i(),d("div",{key:a.title,class:"transform transition-all duration-300 hover:-translate-y-2 hover:scale-105 metric-card"},[t("div",cs,[t("div",{class:"absolute inset-0 opacity-20 group-hover:opacity-30 transition-all duration-300",style:Ct({background:`linear-gradient(135deg, ${a.color}, transparent)`})},null,4),t("div",us,[t("div",{class:B([a.bgColor,"p-3 rounded-xl shadow-md transform transition-all group-hover:rotate-12"])},[(i(),St(At(a.icon),{class:B([a.color,"w-7 h-7"])},null,8,["class"]))],2)]),t("div",ps,[t("p",gs,b(a.title),1),t("p",{class:B([a.color,"text-3xl font-bold"])},b(a.value),3),t("p",vs,b(a.description),1)]),e[15]||(e[15]=t("div",{class:"absolute top-0 left-0 w-24 h-24 bg-opacity-20 rounded-full bg-blue-300 opacity-0 group-hover:opacity-100 transition-all duration-300"},null,-1))])]))),128))]),_:1})]),t("div",bs,[t("div",ms,[e[16]||(e[16]=t("div",{class:"absolute inset-0 opacity-10 bg-blue-100"},null,-1)),e[17]||(e[17]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2zM10 8.5a.5.5 0 11-1 0 .5.5 0 011 0zm4 5a.5.5 0 11-1 0 .5.5 0 011 0z"})]),T(" Payment Methods Distribution ")],-1)),t("div",fs,[t("canvas",{ref_key:"chartRef",ref:xe,class:"w-full h-full"},null,512)])]),t("div",ys,[e[18]||(e[18]=t("div",{class:"absolute inset-0 opacity-10 bg-green-100"},null,-1)),e[19]||(e[19]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})]),T(" Recent Announcements ")],-1)),t("div",hs,[Y.announcements.length?(i(!0),d(O,{key:0},q(Y.announcements,(a,r)=>(i(),d("div",{key:r,class:"bg-white/60 p-4 rounded-xl border border-blue-100 mb-4 hover:border-blue-300 transition-all duration-300 hover:shadow-lg"},[t("h4",xs,b(a.title),1),t("p",ws,b(a.description),1)]))),128)):(i(),d("p",ks," No announcements available "))])])]),t("div",_s,[e[23]||(e[23]=t("div",{class:"absolute inset-0 opacity-10 bg-purple-100"},null,-1)),t("div",Cs,[e[22]||(e[22]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center mb-3 sm:mb-0"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),T(" Popular Products & Products Under Monitoring ")],-1)),t("div",Ss,[e[21]||(e[21]=t("label",{for:"productTypeFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),U(t("select",{id:"productTypeFilter","onUpdate:modelValue":e[3]||(e[3]=a=>de.value=a),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors duration-200"},e[20]||(e[20]=[t("option",{value:"all"},"All Products",-1),t("option",{value:"regular"},"Regular Products Only",-1),t("option",{value:"non_product"},"Non Products Only",-1)]),512),[[Re,de.value]])])]),t("div",As,[t("canvas",{ref_key:"topBottomProductsRef",ref:we,class:"w-full h-full"},null,512)])]),t("div",Ts,[t("div",Ds,[e[24]||(e[24]=t("div",{class:"absolute inset-0 opacity-10 bg-teal-100"},null,-1)),e[25]||(e[25]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"}," Monthly Sales Trend ",-1)),t("div",zs,[t("canvas",{ref_key:"monthlySalesRef",ref:N,class:"w-full h-full"},null,512)])]),t("div",Ms,[e[26]||(e[26]=t("div",{class:"absolute inset-0 opacity-10 bg-red-100"},null,-1)),e[27]||(e[27]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})]),T(" Top Waste Items (Stock Counting Analysis) ")],-1)),t("div",Ps,[t("canvas",{ref_key:"topWasteRef",ref:Q,class:"w-full h-full"},null,512)])])]),t("div",Rs,[e[34]||(e[34]=t("div",{class:"absolute inset-0 opacity-10 bg-blue-100"},null,-1)),t("div",Ls,[e[33]||(e[33]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center mb-3 sm:mb-0"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})]),T(" Transaction Sales Trend ")],-1)),t("div",Bs,[e[32]||(e[32]=t("label",{for:"transactionSalesFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),U(t("select",{id:"transactionSalesFilter","onUpdate:modelValue":e[4]||(e[4]=a=>I.value=a),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"},e[28]||(e[28]=[t("option",{value:"gross"},"Gross Amount",-1),t("option",{value:"qty"},"Quantity",-1)]),512),[[Re,I.value]]),t("div",Ns,[e[31]||(e[31]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Products (Optional)",-1)),t("div",{class:"relative",ref_key:"transactionProductDropdownRef",ref:he},[t("button",{onClick:e[5]||(e[5]=a=>ie.value=!ie.value),type:"button",class:"relative w-full bg-white border border-gray-300 rounded-lg shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-colors duration-200"},[t("span",Vs,[h.value.length===0?(i(),d("span",$s,"Search and select products...")):h.value.length===1?(i(),d("span",js,b(bt(h.value[0])),1)):(i(),d("span",Es,b(h.value.length)+" products selected",1))]),t("span",Os,[(i(),d("svg",{class:B(["h-4 w-4 text-gray-400 transition-transform duration-200",{"rotate-180":ie.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e[29]||(e[29]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])]),ie.value?(i(),d("div",Fs,[t("div",Is,[U(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>J.value=a),onInput:e[7]||(e[7]=(...a)=>at(Ne)&&at(Ne)(...a)),onClick:e[8]||(e[8]=be(()=>{},["stop"])),type:"text",placeholder:"Search products by name or ID...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"},null,544),[[me,J.value]])]),t("div",Ws,[t("div",Hs,[t("div",{class:"px-4 py-3 cursor-pointer hover:bg-blue-100 flex items-center select-none",onClick:be(vt,["stop"])},[t("input",{type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",checked:h.value.length===P.value.length&&P.value.length>0,indeterminate:h.value.length>0&&h.value.length<P.value.length,tabindex:"-1"},null,8,Us),t("span",qs," Select All ("+b(P.value.length)+" items) ",1)])]),(i(!0),d(O,null,q(P.value,a=>(i(),d("div",{key:a.itemid,class:"px-4 py-2 cursor-pointer hover:bg-blue-50 flex items-center border-b border-gray-50 select-none",onClick:be(r=>gt(a.itemid),["stop"])},[t("input",{type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded pointer-events-none",checked:h.value.includes(a.itemid),tabindex:"-1"},null,8,Zs),t("div",Gs,[t("div",Js,b(a.itemname),1),t("div",Ks,"ID: "+b(a.itemid),1)])],8,Qs))),128)),P.value.length===0?(i(),d("div",Xs,e[30]||(e[30]=[t("div",{class:"text-sm"},"No products found",-1),t("div",{class:"text-xs mt-1"},"Try different search terms",-1)]))):D("",!0)])])):D("",!0)],512),re.value.length===0?(i(),d("div",Ys,"Loading products...")):(i(),d("div",ea,[T(b(P.value.length)+" products available ",1),h.value.length>0?(i(),d("span",ta," ("+b(h.value.length)+" selected) ",1)):D("",!0)]))])])]),t("div",sa,[t("canvas",{ref_key:"transactionSalesRef",ref:ee,class:"w-full h-full"},null,512)])]),t("div",aa,[t("div",oa,[e[35]||(e[35]=t("div",{class:"absolute inset-0 opacity-10 bg-green-100"},null,-1)),e[36]||(e[36]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),T(" Sales by Hour ")],-1)),t("div",la,[t("canvas",{ref_key:"salesByHourRef",ref:se,class:"w-full h-full"},null,512)])]),t("div",ra,[e[40]||(e[40]=t("div",{class:"absolute inset-0 opacity-10 bg-purple-100"},null,-1)),t("div",na,[e[39]||(e[39]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center mb-3 sm:mb-0"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),T(" Top Stores Performance ")],-1)),t("div",ia,[e[38]||(e[38]=t("label",{for:"topStoresFilter",class:"text-sm font-medium text-gray-700"},"Filter by:",-1)),U(t("select",{id:"topStoresFilter","onUpdate:modelValue":e[9]||(e[9]=a=>W.value=a),class:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors duration-200"},e[37]||(e[37]=[t("option",{value:"grossamount"},"Gross Amount",-1),t("option",{value:"discamount"},"Discount Amount",-1),t("option",{value:"netamount"},"Net Amount",-1),t("option",{value:"qty"},"Quantity",-1)]),512),[[Re,W.value]])])]),t("div",da,[t("canvas",{ref_key:"topStoresRef",ref:oe,class:"w-full h-full"},null,512)])])]),t("div",ca,[e[41]||(e[41]=t("div",{class:"absolute inset-0 opacity-10 bg-indigo-100"},null,-1)),e[42]||(e[42]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),T(" Advanced Data Analysis ")],-1)),t("div",ua,[t("canvas",{ref_key:"advancedAnalysisRef",ref:G,class:"w-full h-full"},null,512)])]),t("div",pa,[t("div",ga,[e[43]||(e[43]=t("div",{class:"absolute inset-0 opacity-10 bg-cyan-100"},null,-1)),e[44]||(e[44]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-cyan-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})]),T(" Received Delivery vs Sales ")],-1)),t("div",va,[t("canvas",{ref_key:"receivedDeliveryVsSalesRef",ref:le,class:"w-full h-full"},null,512)])]),t("div",ba,[e[49]||(e[49]=t("div",{class:"absolute inset-0 opacity-10 bg-orange-100"},null,-1)),t("div",ma,[e[48]||(e[48]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})]),T(" Sales by Category ")],-1)),t("div",fa,[e[47]||(e[47]=t("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"Filter Categories (Optional)",-1)),t("div",{class:"relative",ref_key:"categoryDropdownRef",ref:ye},[t("button",{onClick:e[10]||(e[10]=a=>ne.value=!ne.value),type:"button",class:"relative w-full bg-white border border-gray-300 rounded-lg shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 sm:text-sm transition-colors duration-200"},[t("span",ya,[x.value.length===0?(i(),d("span",ha,"Select categories...")):x.value.length===1?(i(),d("span",xa,b(pt(x.value[0])),1)):(i(),d("span",wa,b(x.value.length)+" categories selected",1))]),t("span",ka,[(i(),d("svg",{class:B(["h-4 w-4 text-gray-400 transition-transform duration-200",{"rotate-180":ne.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e[45]||(e[45]=[t("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])]),ne.value?(i(),d("div",_a,[t("div",Ca,[t("div",{class:"px-3 py-2 cursor-pointer hover:bg-orange-50 flex items-center transition-colors duration-150",onClick:ut},[t("input",{type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded",checked:x.value.length===j.value.length,indeterminate:x.value.length>0&&x.value.length<j.value.length,readonly:""},null,8,Sa),e[46]||(e[46]=t("span",{class:"ml-2 font-medium text-gray-900"},"Select All",-1))])]),(i(!0),d(O,null,q(j.value,a=>(i(),d("div",{key:a.value,class:"px-3 py-2 cursor-pointer hover:bg-orange-50 flex items-center transition-colors duration-150",onClick:r=>ct(a.value)},[t("input",{type:"checkbox",class:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded",checked:x.value.includes(a.value),readonly:""},null,8,Ta),t("span",Da,b(a.label),1)],8,Aa))),128))])):D("",!0)],512),j.value.length===0?(i(),d("div",za,"Loading categories...")):(i(),d("div",Ma,[T(b(j.value.length)+" categories available ",1),x.value.length>0?(i(),d("span",Pa," ("+b(x.value.length)+" selected) ",1)):D("",!0)]))])]),t("div",Ra,[t("canvas",{ref_key:"salesByCategoryRef",ref:g,class:"w-full h-full"},null,512)])])]),t("div",La,[e[50]||(e[50]=t("div",{class:"absolute inset-0 opacity-10 bg-red-100"},null,-1)),e[51]||(e[51]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6 flex items-center relative z-10"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-3 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})]),T(" Top 10 Stores Under Monitoring (Highest Variances) ")],-1)),t("div",Ba,[t("canvas",{ref_key:"topVarianceStoresRef",ref:F,class:"w-full h-full"},null,512)])])])]),_:1}),ve(Kt)],64))}},Ka=rt(Na,[["__scopeId","data-v-c0fc7969"]]);export{Ka as default};
