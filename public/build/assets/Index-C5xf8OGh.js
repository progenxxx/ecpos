import{d as i,T as j,s as B,N,l as D,e as f,b as w,w as C,u as _,F as L,o as c,a as e,Z as $,t as d,j as k,v as A,f as v,x as z,n as S,c as F}from"./app-C8JQCepG.js";import{_ as P}from"./AdminPanel-C83M-2eE.js";import U from"./AttendanceForm-B4QVmrsn.js";import H from"./AttendanceTable-B6VV5gJg.js";import{d as R}from"./debounce-BRMs7aiL.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./RetailGroup-DlwVVYvp.js";import"./Logout-aL1qiQHO.js";/* empty css                                                             */import"./Modal-BiiQ0EAt.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-KuC_yowt.js";import"./RetailItems-BPv8Qi4G.js";import"./Attendance-C9B-DZaj.js";import"./Modal-8_DouGor.js";const Z={class:"container mx-auto px-3 sm:px-4 lg:px-8 py-4"},G={class:"mb-6"},J={class:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0"},K={class:"flex flex-col sm:flex-row gap-2 sm:gap-4"},Q={class:"bg-blue-50 rounded-lg px-3 py-2 text-center sm:text-left"},W={class:"text-lg sm:text-xl font-semibold text-blue-600"},X={class:"bg-green-50 rounded-lg px-3 py-2 text-center sm:text-left"},Y={class:"text-lg sm:text-xl font-semibold text-green-600"},ee={class:"mb-6"},te={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},se={class:"flex flex-col sm:flex-row gap-4"},oe={class:"flex-1"},le={class:"relative"},re={class:"flex flex-col sm:flex-row gap-2 sm:gap-3"},ae={class:"mt-4 sm:hidden border-t pt-4"},ne={class:"flex justify-around text-center"},ie={class:"text-sm font-medium text-gray-900"},de={class:"text-sm font-medium text-gray-900"},ue={class:"text-sm font-medium text-gray-900"},ce={class:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},me={class:"text-sm text-gray-700"},xe={class:"font-medium"},fe={key:0,class:"text-gray-500"},ve={class:"hidden lg:flex items-center gap-2"},pe={class:"bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden"},ge={key:0,class:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-40"},be={__name:"Index",props:{attendances:{type:Array,required:!0},filters:{type:Object,default:()=>({search:""})}},setup(p){const g=p,r=i(g.filters.search||""),a=i(""),n=i(""),m=i("table"),b=i(!1),x=i(!1),y=i(!1),I=i(null),l=j({staffId:"",storeId:"",date:"",timeIn:"",timeInPhoto:null,breakIn:"",breakInPhoto:null,breakOut:"",breakOutPhoto:null,timeOut:"",timeOutPhoto:null,status:"ACTIVE"}),u=B(()=>{let s=g.attendances;if(a.value&&(s=s.filter(t=>t.status===a.value)),n.value&&(s=s.filter(t=>t.date===n.value)),r.value){const t=r.value.toLowerCase();s=s.filter(o=>o.staffId.toLowerCase().includes(t)||o.storeId.toLowerCase().includes(t)||o.date.includes(t))}return s}),T=R(s=>{b.value=!0,N.get("/attendance",{search:s,status:a.value,date:n.value},{preserveState:!0,preserveScroll:!0,replace:!0,onFinish:()=>{b.value=!1}})},300);D([r,a,n],([s,t,o])=>{s!==g.filters.search&&T(s)});const V=s=>{y.value=!0,I.value=s,l.staffId=s.staffId,l.storeId=s.storeId,l.date=s.date,l.timeIn=s.timeIn,l.breakIn=s.breakIn,l.breakOut=s.breakOut,l.timeOut=s.timeOut,l.status=s.status,x.value=!0},h=()=>{x.value=!1,l.reset(),l.clearErrors()},E=()=>{y.value?l.put(route("attendance.update",I.value.id),{onSuccess:()=>h()}):l.post(route("attendance.store"),{onSuccess:()=>h()})},M=s=>{confirm("Are you sure you want to delete this record?")&&l.delete(route("attendance.destroy",s))},O=()=>{const s=new URLSearchParams;r.value&&s.append("search",r.value),a.value&&s.append("status",a.value),n.value&&s.append("date",n.value);const t=`/attendance/export/excel${s.toString()?"?"+s.toString():""}`;window.location.href=t};return(s,t)=>(c(),f(L,null,[w(_($),{title:"Attendance"},{default:C(()=>t[6]||(t[6]=[e("meta",{name:"description",content:"Attendance Management System"},null,-1)])),_:1}),w(P,{"active-tab":"ATTENDANCE",user:s.$page.props.auth.user},{main:C(()=>[e("div",Z,[e("div",G,[e("div",J,[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900"},"Attendance Management"),e("p",{class:"mt-1 text-sm text-gray-600"},"Track staff attendance and view records")],-1)),e("div",K,[e("div",Q,[e("div",W,d(p.attendances.length),1),t[7]||(t[7]=e("div",{class:"text-xs text-blue-600"},"Total Records",-1))]),e("div",X,[e("div",Y,d(p.attendances.filter(o=>o.status==="ACTIVE").length),1),t[8]||(t[8]=e("div",{class:"text-xs text-green-600"},"Active Today",-1))])])])]),e("div",ee,[e("div",te,[e("div",se,[e("div",oe,[t[12]||(t[12]=e("label",{for:"search",class:"sr-only"},"Search records",-1)),e("div",le,[t[11]||(t[11]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),k(e("input",{id:"search",type:"text",placeholder:"Search by staff ID, store, or date...","onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o),class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"},null,512),[[A,r.value]]),r.value?(c(),f("button",{key:0,onClick:t[1]||(t[1]=o=>r.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},t[10]||(t[10]=[e("svg",{class:"h-4 w-4 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):v("",!0)])]),e("div",re,[k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>a.value=o),class:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},t[13]||(t[13]=[e("option",{value:""},"All Status",-1),e("option",{value:"ACTIVE"},"Active",-1),e("option",{value:"INACTIVE"},"Inactive",-1)]),512),[[z,a.value]]),k(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>n.value=o),type:"date",class:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[A,n.value]]),e("button",{onClick:O,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm font-medium transition-colors flex items-center justify-center gap-2"},t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("span",null,"Export",-1)]))])]),e("div",ae,[e("div",ne,[e("div",null,[e("div",ie,d(u.value.length),1),t[15]||(t[15]=e("div",{class:"text-xs text-gray-500"},"Showing",-1))]),e("div",null,[e("div",de,d(u.value.filter(o=>o.timeIn&&!o.timeOut).length),1),t[16]||(t[16]=e("div",{class:"text-xs text-gray-500"},"Checked In",-1))]),e("div",null,[e("div",ue,d(u.value.filter(o=>o.timeIn&&o.timeOut).length),1),t[17]||(t[17]=e("div",{class:"text-xs text-gray-500"},"Completed",-1))])])])])]),e("div",ce,[e("div",me,[e("span",xe,d(u.value.length),1),t[18]||(t[18]=e("span",{class:"hidden sm:inline"}," records found",-1)),t[19]||(t[19]=e("span",{class:"sm:hidden"}," results",-1)),r.value||a.value||n.value?(c(),f("span",fe," (filtered) ")):v("",!0)]),e("div",ve,[t[20]||(t[20]=e("span",{class:"text-sm text-gray-500"},"View:",-1)),e("button",{onClick:t[4]||(t[4]=o=>m.value="table"),class:S(["px-3 py-1 text-xs rounded-md transition-colors",m.value==="table"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," Table ",2),e("button",{onClick:t[5]||(t[5]=o=>m.value="card"),class:S(["px-3 py-1 text-xs rounded-md transition-colors",m.value==="card"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"])}," Cards ",2)])]),e("div",pe,[w(H,{attendances:u.value,onEdit:V,onDelete:M},null,8,["attendances"])]),b.value?(c(),f("div",ge,t[21]||(t[21]=[e("div",{class:"bg-white rounded-lg p-6 shadow-xl"},[e("div",{class:"flex items-center gap-3"},[e("svg",{class:"animate-spin h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),e("span",{class:"text-sm text-gray-600"},"Loading...")])],-1)]))):v("",!0),x.value?(c(),F(U,{key:1,show:x.value,form:_(l),"is-editing":y.value,onClose:h,onSubmit:E},null,8,["show","form","is-editing"])):v("",!0)])]),_:1},8,["user"])],64))}},je=q(be,[["__scopeId","data-v-ad2dca79"]]);export{je as default};
