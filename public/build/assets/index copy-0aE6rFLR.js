import{C as U}from"./Create-CQKI4MAh.js";import{G as x,_ as M}from"./CopyFrom-t_24YJSF.js";import{_ as p}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-DFF7VX6Y.js";import{T as _}from"./TableContainer-B85p6F6Z.js";import{_ as k}from"./AdminPanel-CRYPwC5J.js";import{B as R}from"./Back-Cz3pmKZo.js";import{d as n,T as j,c as B,w as s,o as G,b as a,a as i,g as y,u as L,C as J}from"./app-BoaMMdkU.js";import{P as w,D as S}from"./dataTables-CI4NjUw-.js";import"./Modal-5-iMnX7J.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-DS750Wq9.js";/* empty css                                                               *//* empty css                                                               */import"./RetailGroup-BjeigQ0x.js";import"./Logout-BJuIbz2k.js";/* empty css                                                             */import"./RetailItems-BB1M731N.js";import"./Attendance-CU9DKH9f.js";const V={class:"absolute adjust"},q={class:"flex justify-start items-center"},re={__name:"index copy",props:{inventjournaltransrepos:{type:Array,required:!0},inventjournaltrans:{type:Array,required:!0},journalid:{type:[String,Number],required:!0},items:{type:Array,required:!0}},setup(d){w.use(S);const r=n("");n(""),n("");const f=n(!1),c=n(!1),v=n(!1),g=d,h=[{data:"ITEMID",title:"ITEMID"},{data:"itemname",title:"ITEMNAME"},{data:"itemgroup",title:"CATEGORY"},{data:"COUNTED",title:"COUNTED",render:function(t,e,o){return e==="display"?`<input type="number" class="counted-input form-input block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" value="${Number(t).toFixed(0)}" min="0" step="1">`:t}}],C={paging:!1,scrollX:!0,scrollY:"70vh",scrollCollapse:!0,drawCallback:function(t){this.api().rows().every(function(){const o=this.data(),u=this.node().querySelector(".counted-input");u&&u.addEventListener("change",m=>N(m,o))})}},b=t=>{r.value=t,c.value=!0,console.log(r.value)},I=()=>{v.value=!1},D=()=>{c.value=!1},E=()=>{f.value=!1},N=async(t,e)=>{const o=t.target.value,l=e.ITEMID,u=g.journalid;try{await T(u,l,o),e.COUNTED=o}catch(m){console.error("Failed to update counted value:",m),t.target.value=e.COUNTED}},T=async(t,e,o)=>{try{if((await J.post("/api/update-counted-value",{journalId:t,itemId:e,newValue:o})).data.success)console.log("Updated successfully");else throw new Error("Update failed")}catch(l){throw console.error("Error updating counted value:",l),l}};j({StartDate:"",EndDate:""});const A=()=>{window.location.href="/order"},O=t=>{console.log("Selected Item:",t)};return(t,e)=>(G(),B(k,{"active-tab":"ORDER"},{modals:s(()=>[a(U,{"show-modal":v.value,JOURNALID:r.value,items:g.items,onToggleActive:I,onSelectItem:O},null,8,["show-modal","JOURNALID","items"]),a(x,{"show-modal":c.value,JOURNALID:r.value,onToggleActive:D},null,8,["show-modal","JOURNALID"]),a(M,{"show-modal":f.value,JOURNALID:r.value,onToggleActive:E},null,8,["show-modal","JOURNALID"])]),main:s(()=>[a(_,null,{default:s(()=>[i("div",V,[i("div",q,[a(p,{type:"button",onClick:A,class:"m-1 ml-2 bg-navy p-10"},{default:s(()=>[a(R,{class:"h-5"})]),_:1}),a(p,{type:"button",onClick:e[0]||(e[0]=o=>b(d.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:s(()=>e[1]||(e[1]=[y(" GENERATE ")])),_:1}),a(p,{type:"button",onClick:t.updateAllCountedValues,class:"m-1 ml-2 bg-navy p-10"},{default:s(()=>e[2]||(e[2]=[y(" Save ")])),_:1},8,["onClick"])])]),a(L(w),{data:d.inventjournaltransrepos,columns:h,class:"w-full relative display",options:C},{action:s(o=>e[3]||(e[3]=[i("label",{class:"inline-flex items-center"},[i("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600 rounded-full"}),i("span",{class:"ml-2 text-gray-700"})],-1)])),_:1},8,["data"])]),_:1})]),_:1}))}};export{re as default};
