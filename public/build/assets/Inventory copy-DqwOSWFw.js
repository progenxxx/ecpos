import{d as c,k as _,q as x,c as D,w as b,o as f,a,e as F,b as g,f as B,j as y,v as w,t as n,n as S,u as k}from"./app-BoaMMdkU.js";import{_ as C}from"./Main-BbjkEZ83.js";import{_ as V}from"./MultiSelectDropdown-CvWO6dSB.js";import{T as R}from"./TableContainer-B85p6F6Z.js";import{P as N,D as T}from"./dataTables-CI4NjUw-.js";import"./Logout-BJuIbz2k.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                             */import"./Modal-5-iMnX7J.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-DFF7VX6Y.js";import"./PartyCake143-BDy8Cxyz.js";import"./Attendance-CU9DKH9f.js";const A={class:"mb-4 flex flex-wrap gap-4 p-4 bg-white rounded-lg shadow"},E={key:0,class:"flex-1 min-w-[200px]"},M={class:"flex-1 min-w-[200px]"},U={class:"flex-1 min-w-[200px]"},q={class:"flex items-end"},O={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4"},I={class:"bg-white p-4 rounded-lg shadow"},P={class:"text-2xl"},$={class:"bg-white p-4 rounded-lg shadow"},j={class:"text-2xl"},z={class:"bg-white p-4 rounded-lg shadow"},G={class:"text-2xl"},H={class:"bg-white p-4 rounded-lg shadow"},J={class:"text-2xl"},K={class:"bg-white p-4 rounded-lg shadow"},oe={__name:"Inventory copy",props:{inventory:{type:Array,required:!0},stores:{type:Array,required:!0},userRole:{type:String,required:!0},filters:{type:Object,required:!0,default:()=>({startDate:"",endDate:"",selectedStores:[]})}},setup(d){N.use(T);const l=c([]),r=c(""),o=c(""),u=d;_(()=>{l.value=u.filters.selectedStores||[],r.value=u.filters.startDate||"",o.value=u.filters.endDate||""});const v=x(()=>{let e=[...u.inventory];return l.value.length>0&&(e=e.filter(t=>l.value.includes(t.storename))),r.value&&o.value&&(e=e.filter(t=>{const s=new Date(t.createddate),m=new Date(r.value),p=new Date(o.value);return s>=m&&s<=p})),e}),h=[{data:"itemname",title:"Item Name",className:"min-w-[200px]"},{data:"beginning",title:"Beginning",className:"text-right",render:e=>Number(e||0).toFixed(2)},{data:"received_delivery",title:"Received Delivery",className:"text-right",render:e=>Number(e||0).toFixed(2)},{data:"sales",title:"Sales",className:"text-right",render:e=>Number(e||0).toFixed(2)},{data:"throw_away",title:"Throw Away",className:"text-right",render:e=>Number(e||0).toFixed(2)},{data:"early_molds",title:"Early Molds",className:"text-right",render:e=>Number(e||0).toFixed(2)},{data:"pull_out",title:"Pull Out",className:"text-right",render:e=>Number(e||0).toFixed(2)},{data:"rat_bites",title:"Rat Bites",className:"text-right",render:e=>Number(e||0).toFixed(2)},{data:"ant_bites",title:"Ant Bites",className:"text-right",render:e=>Number(e||0).toFixed(2)},{data:"ending",title:"Ending",className:"text-right font-bold",render:e=>Number(e||0).toFixed(2)},{data:"variance",title:"Variance",className:"text-right",render:(e,t,s)=>{const m=Number(e||0);return`<span class="${m<0?"text-red-600":"text-green-600"}">${m.toFixed(2)}</span>`}}],i=x(()=>{const e={beginning:0,receivedDelivery:0,sales:0,throwAway:0,earlyMolds:0,pullOut:0,ratBites:0,antBites:0,ending:0,variance:0};return v.value.forEach(t=>{e.beginning+=Number(t.beginning)||0,e.receivedDelivery+=Number(t.received_delivery)||0,e.sales+=Number(t.sales)||0,e.throwAway+=Number(t.throw_away)||0,e.earlyMolds+=Number(t.early_molds)||0,e.pullOut+=Number(t.pull_out)||0,e.ratBites+=Number(t.rat_bites)||0,e.antBites+=Number(t.ant_bites)||0,e.ending+=Number(t.ending)||0,e.variance+=Number(t.variance)||0}),e});return(e,t)=>(f(),D(C,{"active-tab":"REPORTS"},{main:b(()=>[a("div",A,[d.userRole.toUpperCase()==="ADMIN"||d.userRole.toUpperCase()==="SUPERADMIN"?(f(),F("div",E,[g(V,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=s=>l.value=s),options:d.stores,label:"Stores"},null,8,["modelValue","options"])])):B("",!0),a("div",M,[t[4]||(t[4]=a("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),y(a("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>r.value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[w,r.value]])]),a("div",U,[t[5]||(t[5]=a("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1)),y(a("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>o.value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[w,o.value]])]),a("div",q,[a("button",{onClick:t[3]||(t[3]=()=>{l.value=[],r.value="",o.value=""}),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md"}," Clear Filters ")])]),a("div",O,[a("div",I,[t[6]||(t[6]=a("h3",{class:"text-lg font-semibold"},"Beginning Balance",-1)),a("p",P,n(i.value.beginning.toFixed(2)),1)]),a("div",$,[t[7]||(t[7]=a("h3",{class:"text-lg font-semibold"},"Total Received",-1)),a("p",j,n(i.value.receivedDelivery.toFixed(2)),1)]),a("div",z,[t[8]||(t[8]=a("h3",{class:"text-lg font-semibold"},"Total Sales",-1)),a("p",G,n(i.value.sales.toFixed(2)),1)]),a("div",H,[t[9]||(t[9]=a("h3",{class:"text-lg font-semibold"},"Ending Balance",-1)),a("p",J,n(i.value.ending.toFixed(2)),1)]),a("div",K,[t[10]||(t[10]=a("h3",{class:"text-lg font-semibold"},"Total Variance",-1)),a("p",{class:S(["text-2xl",i.value.variance<0?"text-red-600":"text-green-600"])},n(i.value.variance.toFixed(2)),3)])]),g(R,null,{default:b(()=>[g(k(N),{data:v.value,columns:h,class:"w-full relative display",options:e.options},null,8,["data","options"])]),_:1})]),_:1}))}};export{oe as default};
