import{q as L,d as i,l as pe,E as Pe,k as Ue,c as q,w as ye,B as $e,o as a,a as t,e as r,t as l,j as k,v as A,i as J,F as W,h as K,f as v,g as c,n as I,b as He,u as ze,s as xe,N as qe}from"./app-BNPGhoL2.js";import{_ as Je}from"./AdminPanel-C3by1daL.js";import{_ as We}from"./Main-CkYp62E2.js";import{T as Ke}from"./TableContainer-DOq29hCC.js";import{P as be,D as Xe}from"./dataTables-CYoR-ngT.js";import"./buttons.print-BML1l2ev.js";import"./exceljs.min-Bz6n0dRn.js";import{M as Ge,C as Qe}from"./Close-CrA_aAJ4.js";import"./RetailGroup-afsdHTlZ.js";import"./Logout-B5n2G0rZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                             */import"./Modal-k3aPgSoE.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-B6Xc1nH0.js";import"./RetailItems-BzVTUMDz.js";import"./Attendance-D3nGk9-s.js";import"./PartyCake143-DUp1Stp_.js";const Ye={class:"mb-4 flex flex-wrap gap-4 p-4 bg-white rounded-lg shadow z-[999]"},Ze={key:0,class:"flex-1 min-w-[200px] store-dropdown-container relative"},et={class:"relative"},tt={key:0,class:"text-gray-500"},st={key:1},ot={key:2},nt={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto"},at={class:"p-2 border-b border-gray-200"},lt={class:"max-h-40 overflow-auto"},rt=["checked","onChange"],it={class:"text-sm"},dt={key:0,class:"p-3 text-sm text-gray-500 text-center"},ut={class:"flex-1 min-w-[200px]"},ct={class:"flex-1 min-w-[200px]"},mt={class:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md"},vt={class:"text-sm text-blue-800"},gt={key:0},pt={class:"mb-4 bg-white rounded-lg shadow",open:""},yt={class:"p-4"},xt={key:0,class:"flex justify-center items-center py-8"},bt={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ft={class:"bg-gray-50 p-4 rounded-lg"},wt={class:"text-2xl mt-1"},ht={class:"bg-gray-50 p-4 rounded-lg"},_t={class:"text-2xl mt-1"},kt={class:"bg-gray-50 p-4 rounded-lg"},St={class:"text-2xl mt-1"},jt={class:"bg-gray-50 p-4 rounded-lg"},Tt={class:"flex justify-between mt-1"},Nt={class:"text-lg"},Ct={class:"text-lg"},Dt={class:"bg-gray-50 p-4 rounded-lg"},At={class:"text-2xl mt-1"},Mt={class:"bg-gray-50 p-4 rounded-lg"},Ft={class:"text-2xl mt-1"},Et={class:"bg-gray-50 p-4 rounded-lg"},Rt={class:"text-2xl mt-1 font-bold"},Bt={class:"bg-gray-50 p-4 rounded-lg col-span-1"},Lt={class:"flex justify-between mt-1"},It={class:"text-xl text-red-600"},Ot={class:"text-xl text-green-600"},Vt={class:"bg-gray-50 p-4 rounded-lg col-span-full"},Pt={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},Ut={class:"text-lg"},$t={class:"text-lg"},Ht={class:"text-lg"},zt={class:"text-lg"},qt={class:"text-lg"},Jt={class:"bg-white rounded-lg shadow"},Wt={key:0,class:"flex justify-center items-center py-12"},Kt={key:1,class:"overflow-hidden"},Xt={class:"max-h-96 overflow-y-auto"},Gt=["onTouchstart","onTouchend","onMousedown","onMouseup"],Qt={class:"space-y-3"},Yt={class:"font-medium text-gray-900"},Zt={class:"text-sm text-gray-500"},es={class:"grid grid-cols-2 gap-2 text-sm"},ts={class:"font-medium ml-1"},ss={class:"font-medium ml-1"},os={class:"font-medium ml-1"},ns={class:"font-medium ml-1"},as={class:"font-bold ml-1"},ls={class:"grid grid-cols-3 gap-2 text-xs text-gray-600"},rs={class:"flex justify-end space-x-2 mt-2"},is=["onClick"],ds=["onClick"],us={key:0,class:"fixed bottom-6 right-6 z-40"},cs={key:0,class:"absolute bottom-16 right-0 bg-white rounded-lg shadow-lg border border-gray-200 py-2 w-56 transform transition-all duration-200 ease-out"},ms={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},vs={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},gs={class:"mt-3"},ps={key:0,class:"mb-4 p-3 bg-gray-50 rounded"},ys={class:"text-sm font-medium"},xs={class:"text-sm text-gray-600"},bs={class:"text-sm text-gray-600"},fs={class:"text-xs text-gray-500"},ws={class:"space-y-4"},hs={class:"block text-sm font-medium text-gray-700"},_s={key:0},ks={key:1},Ss={key:2},js={key:0,class:"p-3 bg-blue-50 rounded"},Ts={class:"text-sm text-blue-700"},Ns={key:0},Cs={key:1},Ds={class:"flex justify-end space-x-3 mt-6"},As=["disabled"],Ms=["disabled"],Fs={key:0},Es={key:1},Rs={key:3,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Bs={class:"relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white"},Ls={class:"mt-3"},Is={key:0,class:"mb-4 p-3 bg-gray-50 rounded"},Os={class:"text-sm font-medium"},Vs={class:"text-sm text-gray-600"},Ps={key:1,class:"flex justify-center items-center py-8"},Us={key:2,class:"text-center py-8 text-gray-500"},$s={key:3,class:"overflow-x-auto"},Hs={class:"min-w-full divide-y divide-gray-200"},zs={class:"bg-white divide-y divide-gray-200"},qs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Js={class:"px-6 py-4 whitespace-nowrap text-sm"},Ws={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ks={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Xs={key:0},Gs={key:1},Qs={class:"px-6 py-4 text-sm text-gray-900"},Ys=["title"],Zs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},eo={key:4,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},to={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},so={class:"mt-3"},oo={class:"space-y-4"},no={key:0},ao=["value"],lo={key:1,class:"p-4 bg-gray-50 rounded-lg"},ro={key:0,class:"flex items-center"},io={key:1,class:"space-y-2 text-sm"},uo={class:"flex justify-between"},co={class:"flex justify-between"},mo={class:"text-gray-600"},vo={class:"flex justify-between"},go={class:"text-gray-600"},po={class:"flex justify-between"},yo={class:"text-gray-600"},xo={key:0,class:"mt-3 pt-3 border-t border-gray-200"},bo={class:"text-xs text-gray-500"},fo={key:1,class:"mt-3 p-2 bg-red-50 rounded text-red-700 text-xs"},wo={class:"flex justify-end space-x-3 mt-6"},ho=["disabled"],_o=["disabled"],ko={key:0},So={key:1},$o={__name:"Inventory",props:{inventory:{type:Array,required:!0,default:()=>[]},stores:{type:Array,required:!0,default:()=>[]},userRole:{type:String,required:!0},filters:{type:Object,required:!0,default:()=>({startDate:"",endDate:"",selectedStores:[]})},url:{type:String,default:()=>route("reports.inventory")}},setup(S){be.use(Xe);const g=S,fe=L(()=>g.userRole.toUpperCase()==="STORE"?We:Je),p=i(g.filters.selectedStores||[]),w=i(g.filters.startDate||""),h=i(g.filters.endDate||""),j=i(!0),T=i(!1),O=i(!1),V=i(null),M=i(0),F=i(null),C=i(!1),P=i(""),N=i(!1),X=i(!1),m=i(null),d=i({adjustment_value:"",adjustment_type:"set",remarks:""}),E=i(!1),G=i(!1),U=i([]),Q=i(!1),$=i(!1),y=i({sync_date:"",store_name:""}),R=i(!1),x=i(null),Y=i(!1),Z=L(()=>{let o=[];return Array.isArray(g.stores)&&(o=g.stores.map(e=>{if(typeof e=="object"&&e!==null){if(e.NAME)return e.NAME;if(e.name)return e.name;if(e.storename)return e.storename;if(e.store_name)return e.store_name;const s=JSON.stringify(e),n=s.match(/"NAME"\s*:\s*"([^"]+)"/);return n?n[1]:s.replace(/[{}":]/g,"").replace(/STOREID[^,]*,?\s*/g,"").replace(/NAME/g,"").trim()||"Unknown Store"}return String(e)})),P.value?o.filter(e=>e.toLowerCase().includes(P.value.toLowerCase())):o}),ne=o=>{clearTimeout(V.value),M.value++,M.value===1?V.value=setTimeout(()=>{M.value=0},300):M.value===2&&(clearTimeout(V.value),H(o),M.value=0)},we=(o,e)=>{C.value=!1,F.value=setTimeout(()=>{C.value=!0,B(o),navigator.vibrate&&navigator.vibrate(50)},1e3)},he=(o,e)=>{clearTimeout(F.value),C.value||ne(o)},_e=(o,e)=>{e.preventDefault(),C.value=!1,F.value=setTimeout(()=>{C.value=!0,B(o)},1e3)},ke=(o,e)=>{clearTimeout(F.value),C.value||ne(o)},ee=()=>{clearTimeout(F.value),clearTimeout(V.value)},Se=()=>{T.value=!T.value},_=()=>{T.value=!1},je=o=>{const e=p.value.indexOf(o);e>-1?p.value.splice(e,1):p.value.push(o)},Te=o=>p.value.includes(o),Ne=()=>{p.value=[],N.value=!1},Ce=()=>{const o=g.stores.map(e=>{if(typeof e=="object"&&e!==null){if(e.NAME)return e.NAME;if(e.name)return e.name;if(e.storename)return e.storename;if(e.store_name)return e.store_name;const s=JSON.stringify(e),n=s.match(/"NAME"\s*:\s*"([^"]+)"/);return n?n[1]:s.replace(/[{}":]/g,"").replace(/STOREID[^,]*,?\s*/g,"").replace(/NAME/g,"").trim()||"Unknown Store"}return String(e)});p.value=o,N.value=!1},te=()=>{O.value=window.innerWidth<768},f=L(()=>{var o;return(o=g.inventory)!=null&&o.length?g.inventory.reduce((e,s)=>{const n=b=>Number(b||0),u=n(s.throw_away)+n(s.early_molds)+n(s.pull_out)+n(s.rat_bites)+n(s.ant_bites);return{beginning:e.beginning+n(s.beginning),receivedDelivery:e.receivedDelivery+n(s.received_delivery),stockTransfer:e.stockTransfer+n(s.stock_transfer),sales:e.sales+n(s.sales),bundleSales:e.bundleSales+n(s.bundle_sales||0),waste:e.waste+u,itemcount:e.itemcount+n(s.item_count),ending:e.ending+n(s.ending),variance:e.variance+n(s.variance),throwAway:e.throwAway+n(s.throw_away),earlyMolds:e.earlyMolds+n(s.early_molds),pullOut:e.pullOut+n(s.pull_out),ratBites:e.ratBites+n(s.rat_bites),antBites:e.antBites+n(s.ant_bites)}},{beginning:0,receivedDelivery:0,stockTransfer:0,sales:0,bundleSales:0,waste:0,itemcount:0,ending:0,variance:0,throwAway:0,earlyMolds:0,pullOut:0,ratBites:0,antBites:0}):{beginning:0,receivedDelivery:0,stockTransfer:0,sales:0,bundleSales:0,waste:0,itemcount:0,ending:0,variance:0,throwAway:0,earlyMolds:0,pullOut:0,ratBites:0,antBites:0}}),De=L(()=>{var o;return((o=g.inventory)==null?void 0:o.reduce((e,s)=>{const n=Number(s.variance||0);return n<0?e+n:e},0))||0}),Ae=L(()=>{var o;return((o=g.inventory)==null?void 0:o.reduce((e,s)=>{const n=Number(s.variance||0);return n>0?e+n:e},0))||0}),H=o=>{console.log("Opening adjustment modal for item:",o),m.value=o,d.value={adjustment_value:"",adjustment_type:"set",remarks:""},X.value=!0,_()},ae=()=>{X.value=!1,m.value=null,d.value={adjustment_value:"",adjustment_type:"set",remarks:""}},Me=async()=>{var o;if(!d.value.adjustment_value||!d.value.remarks.trim()){alert("Please fill in all required fields");return}if(!m.value||!m.value.id){alert("Item ID is missing. This might be an aggregated record. Please contact support if this persists."),console.error("Missing ID for item:",m.value);return}E.value=!0;try{const e=(o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content");if(!e)throw new Error("CSRF token not found");const s={id:m.value.id,adjustment_value:parseFloat(d.value.adjustment_value),adjustment_type:d.value.adjustment_type,remarks:d.value.remarks.trim()};console.log("Submitting adjustment:",s);const n=await fetch("/inventory/adjust-item-count",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Accept:"application/json"},body:JSON.stringify(s)});if(!n.ok){const b=await n.text();throw console.error("HTTP Error Response:",b),new Error(`HTTP error! status: ${n.status} - ${b}`)}const u=await n.json();console.log("Response:",u),u.success?(alert("Item count adjusted successfully"),ae(),window.location.reload()):(alert(u.message||"Failed to adjust item count"),u.errors&&(console.error("Validation errors:",u.errors),Object.keys(u.errors).forEach(b=>{console.error(`${b}: ${u.errors[b].join(", ")}`)})))}catch(e){console.error("Error adjusting item count:",e),alert("An error occurred while adjusting item count: "+e.message)}finally{E.value=!1}},B=async o=>{var e;m.value=o,G.value=!0,Q.value=!0,_();try{const s=(e=document.querySelector('meta[name="csrf-token"]'))==null?void 0:e.getAttribute("content"),u=await(await fetch("/inventory/adjustment-history",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s,Accept:"application/json"},body:JSON.stringify({itemid:o.itemid,storename:o.storename})})).json();u.success?U.value=u.data:console.error("Failed to fetch adjustment history:",u.message)}catch(s){console.error("Error fetching adjustment history:",s)}finally{Q.value=!1}},Fe=()=>{G.value=!1,m.value=null,U.value=[]},le=()=>{y.value={sync_date:h.value||w.value||new Date().toISOString().split("T")[0],store_name:p.value.length===1?p.value[0]:""},$.value=!0,_(),ie()},re=()=>{$.value=!1,y.value={sync_date:"",store_name:""},x.value=null},ie=async()=>{var o;if(y.value.sync_date){Y.value=!0;try{const e=(o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"),n=await(await fetch("/inventory/sync-status",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Accept:"application/json"},body:JSON.stringify({sync_date:y.value.sync_date,store_name:y.value.store_name})})).json();n.success?x.value=n.data:console.error("Failed to get sync status:",n.message)}catch(e){console.error("Error getting sync status:",e)}finally{Y.value=!1}}},Ee=async()=>{var o;if(!y.value.sync_date){alert("Please select a sync date");return}if((g.userRole.toUpperCase()==="ADMIN"||g.userRole.toUpperCase()==="SUPERADMIN")&&!y.value.store_name){alert("Please select a store");return}R.value=!0;try{const e=(o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"),n=await(await fetch("/inventory/sync-variance",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":e,Accept:"application/json"},body:JSON.stringify({sync_date:y.value.sync_date,store_name:y.value.store_name})})).json();n.success?(alert(`Sync completed successfully!

Store: ${n.data.store_name}
Date: ${n.data.sync_date}
Records Updated: ${n.data.total_affected_rows}`),re(),window.location.reload()):alert("Sync failed: "+n.message)}catch(e){console.error("Error performing sync:",e),alert("An error occurred during sync: "+e.message)}finally{R.value=!1}},Re=[{data:"itemname",title:"Item Name",className:"min-w-[200px]"},{data:"storename",title:"Store",className:"min-w-[120px]"},{data:"beginning",title:"Beginning",className:"text-right",render:o=>Number(o||0).toFixed(2)},{data:"received_delivery",title:"Received",className:"text-right",render:o=>Number(o||0).toFixed(2)},{data:"stock_transfer",title:"Stock Transfer",className:"text-right",render:o=>Number(o||0).toFixed(2)},{data:"sales",title:"Direct Sales",className:"text-right",render:o=>Number(o||0).toFixed(2)},{data:"bundle_sales",title:"Bundle Sales",className:"text-right",render:(o,e,s)=>Number(s.bundle_sales||0).toFixed(2)},{data:"throw_away",title:"Throw Away",className:"text-right",render:o=>Number(o||0).toFixed(2)},{data:"early_molds",title:"Early Molds",className:"text-right",render:o=>Number(o||0).toFixed(2)},{data:"pull_out",title:"Pull Out",className:"text-right",render:o=>Number(o||0).toFixed(2)},{data:"rat_bites",title:"Rat Bites",className:"text-right",render:o=>Number(o||0).toFixed(2)},{data:"ant_bites",title:"Ant Bites",className:"text-right",render:o=>Number(o||0).toFixed(2)},{data:"item_count",title:"Item Count",className:"text-right",render:(o,e,s)=>{const n=Number(o||0).toFixed(2),u=`adjust-${s.id||Math.random()}`,b=`history-${s.id||Math.random()}`;return`
                <div class="flex items-center justify-between">
                    <span>${n}</span>
                    <div class="flex gap-1 ml-2">
                        <button 
                            id="${u}"
                            class="text-blue-600 hover:text-blue-800 text-xs px-2 py-1 border border-blue-300 rounded adjust-btn"
                            title="Adjust Item Count"
                            data-item='${JSON.stringify(s)}'
                        >
                            Adjust
                        </button>
                        <button 
                            id="${b}"
                            class="text-green-600 hover:text-green-800 text-xs px-2 py-1 border border-green-300 rounded history-btn"
                            title="View History"
                            data-item='${JSON.stringify(s)}'
                        >
                            History
                        </button>
                    </div>
                </div>
            `}},{data:"ending",title:"Ending",className:"text-right font-bold",render:o=>Number(o||0).toFixed(2)},{data:"variance",title:"Variance",className:"text-right",render:(o,e,s)=>{const n=Number(o||0);return`<span class="${n<0?"text-red-600":"text-green-600"} font-bold">${n.toFixed(2)}</span>`}}],de=()=>{document.removeEventListener("click",se),document.addEventListener("click",se)},se=o=>{if(o.target.classList.contains("adjust-btn")){const e=JSON.parse(o.target.getAttribute("data-item"));H(e)}else if(o.target.classList.contains("history-btn")){const e=JSON.parse(o.target.getAttribute("data-item"));B(e)}},Be={responsive:!0,order:[[0,"asc"]],pageLength:25,dom:"Bfrtip",deferRender:!0,buttons:["copy",{extend:"csv",title:"Inventory Report"},{extend:"excel",title:"Inventory Report"},{extend:"pdf",title:"Inventory Report"},"print"],createdRow:function(o,e,s){let n,u=0,b;o.classList.add("cursor-pointer","hover:bg-gray-50","select-none");const ve=D=>{D.preventDefault(),n=setTimeout(()=>{B(e)},1e3)},z=()=>{clearTimeout(n)},ge=D=>{D.target.classList.contains("adjust-btn")||D.target.classList.contains("history-btn")||D.target.closest(".adjust-btn")||D.target.closest(".history-btn")||(clearTimeout(b),u++,u===1?b=setTimeout(()=>{u=0},300):u===2&&(clearTimeout(b),H(e),u=0))};o.addEventListener("mousedown",ve),o.addEventListener("mouseup",z),o.addEventListener("mouseleave",z),o.addEventListener("click",ge),o._cleanupEvents=()=>{o.removeEventListener("mousedown",ve),o.removeEventListener("mouseup",z),o.removeEventListener("mouseleave",z),o.removeEventListener("click",ge),clearTimeout(n),clearTimeout(b)}},drawCallback:function(){j.value=!1,setTimeout(de,100)}},ue=()=>{if(w.value&&h.value){const o=new Date(w.value),e=new Date(h.value);if(o>e){alert("Start date cannot be later than end date");return}}j.value=!0,qe.get(route("reports.inventory"),{startDate:w.value,endDate:h.value,stores:p.value},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{j.value=!1},onError:o=>{console.error("Filter update failed:",o),j.value=!1}})},ce=()=>{p.value=[],w.value="",h.value="",ue(),_()},Le=()=>{if(window.DataTable){const o=window.DataTable.tables()[0];o&&o.button(".buttons-csv").trigger()}_()},Ie=()=>{if(window.DataTable){const o=window.DataTable.tables()[0];o&&o.button(".buttons-excel").trigger()}_()},Oe=()=>{if(window.DataTable){const o=window.DataTable.tables()[0];o&&o.button(".buttons-pdf").trigger()}_()},Ve=()=>{if(window.DataTable){const o=window.DataTable.tables()[0];o&&o.button(".buttons-print").trigger()}_()},me=o=>{N.value&&!o.target.closest(".store-dropdown-container")&&(N.value=!1)};pe([()=>y.value.sync_date,()=>y.value.store_name],()=>{$.value&&ie()},{deep:!0});let oe;return pe([p,w,h],()=>{clearTimeout(oe),oe=setTimeout(ue,500)},{deep:!0}),Pe(()=>{clearTimeout(oe),ee(),document.removeEventListener("click",se),document.removeEventListener("click",me),window.removeEventListener("resize",te)}),Ue(()=>{p.value=g.filters.selectedStores||[],w.value=g.filters.startDate||"",h.value=g.filters.endDate||"",console.log("Inventory data:",g.inventory),de(),document.addEventListener("click",me),window.addEventListener("resize",te),te(),setTimeout(()=>{j.value=!1},500)}),(o,e)=>(a(),q($e(fe.value),{"active-tab":"REPORTS"},{main:ye(()=>[t("div",Ye,[S.userRole.toUpperCase()==="ADMIN"||S.userRole.toUpperCase()==="SUPERADMIN"?(a(),r("div",Ze,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Stores",-1)),t("div",et,[t("button",{onClick:e[0]||(e[0]=s=>N.value=!N.value),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-left bg-white"},[p.value.length===0?(a(),r("span",tt,"Select stores...")):p.value.length===1?(a(),r("span",st,l(p.value[0]),1)):(a(),r("span",ot,l(p.value.length)+" stores selected",1)),e[11]||(e[11]=t("svg",{class:"float-right mt-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),N.value?(a(),r("div",nt,[t("div",at,[k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>P.value=s),type:"text",placeholder:"Search stores...",class:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:e[2]||(e[2]=J(()=>{},["stop"]))},null,512),[[A,P.value]])]),t("div",{class:"p-2 border-b border-gray-200 flex gap-2"},[t("button",{onClick:Ce,class:"px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600"}," Select All "),t("button",{onClick:Ne,class:"px-3 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600"}," Clear ")]),t("div",lt,[(a(!0),r(W,null,K(Z.value,s=>(a(),r("label",{key:s,class:"flex items-center px-3 py-2 hover:bg-gray-100 cursor-pointer"},[t("input",{type:"checkbox",checked:Te(s),onChange:n=>je(s),class:"mr-2 form-checkbox h-4 w-4 text-blue-600"},null,40,rt),t("span",it,l(s),1)]))),128))]),Z.value.length===0?(a(),r("div",dt," No stores found ")):v("",!0)])):v("",!0)])])):v("",!0),t("div",ut,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),k(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[A,w.value]])]),t("div",ct,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1)),k(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=s=>h.value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[A,h.value]])]),t("div",{class:"flex items-end"},[t("button",{onClick:ce,class:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md mr-2"}," Clear Filters "),t("button",{onClick:le,class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md flex items-center gap-2"},e[15]||(e[15]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),c(" Sync Data ")]))])]),t("div",mt,[t("p",vt,[e[17]||(e[17]=t("strong",null,"Interaction Guide:",-1)),e[18]||(e[18]=t("br",null,null,-1)),e[19]||(e[19]=c(" • ")),e[20]||(e[20]=t("strong",null,"Hold/Long press 1 second:",-1)),e[21]||(e[21]=c(" View adjustment history")),e[22]||(e[22]=t("br",null,null,-1)),e[23]||(e[23]=c(" • ")),e[24]||(e[24]=t("strong",null,"Double click/tap:",-1)),e[25]||(e[25]=c(" Adjust item count")),e[26]||(e[26]=t("br",null,null,-1)),e[27]||(e[27]=c(" • ")),e[28]||(e[28]=t("strong",null,"Single click buttons:",-1)),e[29]||(e[29]=c(" Direct actions")),e[30]||(e[30]=t("br",null,null,-1)),O.value?(a(),r("span",gt,e[16]||(e[16]=[c("• "),t("strong",null,"Use floating menu",-1),c(" for exports and sync")]))):v("",!0)])]),t("details",pt,[e[50]||(e[50]=t("summary",{class:"px-4 py-3 text-lg font-medium cursor-pointer"}," Inventory Summary ",-1)),t("div",yt,[j.value?(a(),r("div",xt,e[31]||(e[31]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"},null,-1),t("span",{class:"ml-3"},"Loading data...",-1)]))):(a(),r("div",bt,[t("div",ft,[e[32]||(e[32]=t("h3",{class:"text-sm font-semibold text-gray-600"},"Beginning Balance",-1)),t("p",wt,l(f.value.beginning.toFixed(2)),1)]),t("div",ht,[e[33]||(e[33]=t("h3",{class:"text-sm font-semibold text-gray-600"},"Total Received",-1)),t("p",_t,l(f.value.receivedDelivery.toFixed(2)),1)]),t("div",kt,[e[34]||(e[34]=t("h3",{class:"text-sm font-semibold text-gray-600"},"Stock Transfer",-1)),t("p",St,l(f.value.stockTransfer.toFixed(2)),1)]),t("div",jt,[e[37]||(e[37]=t("h3",{class:"text-sm font-semibold text-gray-600"},"Total Sales",-1)),t("div",Tt,[t("div",null,[e[35]||(e[35]=t("span",{class:"text-sm text-gray-500"},"Direct:",-1)),t("p",Nt,l(f.value.sales.toFixed(2)),1)]),t("div",null,[e[36]||(e[36]=t("span",{class:"text-sm text-gray-500"},"Bundle:",-1)),t("p",Ct,l(f.value.bundleSales.toFixed(2)),1)])])]),t("div",Dt,[e[38]||(e[38]=t("h3",{class:"text-sm font-semibold text-gray-600"},"Total Waste",-1)),t("p",At,l(f.value.waste.toFixed(2)),1)]),t("div",Mt,[e[39]||(e[39]=t("h3",{class:"text-sm font-semibold text-gray-600"},"Current Count",-1)),t("p",Ft,l(f.value.itemcount.toFixed(2)),1)]),t("div",Et,[e[40]||(e[40]=t("h3",{class:"text-sm font-semibold text-gray-600"},"Ending Balance",-1)),t("p",Rt,l(f.value.ending.toFixed(2)),1)]),t("div",Bt,[e[43]||(e[43]=t("h3",{class:"text-sm font-semibold text-gray-600"},"Total Variance",-1)),t("div",Lt,[t("div",null,[e[41]||(e[41]=t("span",{class:"text-sm text-gray-500"},"Negative:",-1)),t("p",It,l(De.value.toFixed(2)),1)]),t("div",null,[e[42]||(e[42]=t("span",{class:"text-sm text-gray-500"},"Positive:",-1)),t("p",Ot,l(Ae.value.toFixed(2)),1)])])]),t("div",Vt,[e[49]||(e[49]=t("h3",{class:"text-sm font-semibold text-gray-600 mb-2"},"Waste Breakdown",-1)),t("div",Pt,[t("div",null,[e[44]||(e[44]=t("p",{class:"text-xs text-gray-500"},"Throw Away",-1)),t("p",Ut,l(f.value.throwAway.toFixed(2)),1)]),t("div",null,[e[45]||(e[45]=t("p",{class:"text-xs text-gray-500"},"Early Molds",-1)),t("p",$t,l(f.value.earlyMolds.toFixed(2)),1)]),t("div",null,[e[46]||(e[46]=t("p",{class:"text-xs text-gray-500"},"Pull Out",-1)),t("p",Ht,l(f.value.pullOut.toFixed(2)),1)]),t("div",null,[e[47]||(e[47]=t("p",{class:"text-xs text-gray-500"},"Rat Bites",-1)),t("p",zt,l(f.value.ratBites.toFixed(2)),1)]),t("div",null,[e[48]||(e[48]=t("p",{class:"text-xs text-gray-500"},"Ant Bites",-1)),t("p",qt,l(f.value.antBites.toFixed(2)),1)])])])]))])]),t("div",Jt,[j.value?(a(),r("div",Wt,e[51]||(e[51]=[t("div",{class:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-500"},null,-1),t("span",{class:"ml-4 text-lg"},"Loading inventory data...",-1)]))):v("",!0),O.value?(a(),r("div",Kt,[t("div",Xt,[(a(!0),r(W,null,K(S.inventory,s=>(a(),r("div",{key:`${s.itemid}-${s.storename}`,class:"border-b border-gray-200 p-4 hover:bg-gray-50 transition-colors select-none cursor-pointer",onTouchstart:n=>we(s,n),onTouchend:n=>he(s,n),onTouchcancel:ee,onMousedown:n=>_e(s,n),onMouseup:n=>ke(s,n),onMouseleave:ee,onContextmenu:e[5]||(e[5]=J(()=>{},["prevent"]))},[t("div",Qt,[t("div",null,[t("div",Yt,l((s==null?void 0:s.itemname)||""),1),t("div",Zt,l((s==null?void 0:s.storename)||""),1)]),t("div",es,[t("div",null,[e[52]||(e[52]=t("span",{class:"text-gray-600"},"Beginning:",-1)),t("span",ts,l(Number((s==null?void 0:s.beginning)||0).toFixed(2)),1)]),t("div",null,[e[53]||(e[53]=t("span",{class:"text-gray-600"},"Received:",-1)),t("span",ss,l(Number((s==null?void 0:s.received_delivery)||0).toFixed(2)),1)]),t("div",null,[e[54]||(e[54]=t("span",{class:"text-gray-600"},"Sales:",-1)),t("span",os,l(Number((s==null?void 0:s.sales)||0).toFixed(2)),1)]),t("div",null,[e[55]||(e[55]=t("span",{class:"text-gray-600"},"Item Count:",-1)),t("span",ns,l(Number((s==null?void 0:s.item_count)||0).toFixed(2)),1)]),t("div",null,[e[56]||(e[56]=t("span",{class:"text-gray-600"},"Ending:",-1)),t("span",as,l(Number((s==null?void 0:s.ending)||0).toFixed(2)),1)]),t("div",null,[e[57]||(e[57]=t("span",{class:"text-gray-600"},"Variance:",-1)),t("span",{class:I(["font-bold ml-1",Number((s==null?void 0:s.variance)||0)<0?"text-red-600":"text-green-600"])},l(Number((s==null?void 0:s.variance)||0).toFixed(2)),3)])]),t("div",ls,[t("div",null,"Throw Away: "+l(Number((s==null?void 0:s.throw_away)||0).toFixed(2)),1),t("div",null,"Early Molds: "+l(Number((s==null?void 0:s.early_molds)||0).toFixed(2)),1),t("div",null,"Pull Out: "+l(Number((s==null?void 0:s.pull_out)||0).toFixed(2)),1)]),t("div",rs,[t("button",{onClick:J(n=>H(s),["stop"]),class:"text-blue-600 hover:text-blue-900 text-sm px-2 py-1 border border-blue-300 rounded"}," Adjust ",8,is),t("button",{onClick:J(n=>B(s),["stop"]),class:"text-green-600 hover:text-green-900 text-sm px-2 py-1 border border-green-300 rounded"}," History ",8,ds)])])],40,Gt))),128))])])):(a(),q(Ke,{key:2,class:"max-h-[80vh] overflow-x-auto overflow-y-auto"},{default:ye(()=>[e[58]||(e[58]=t("div",{class:"p-4 bg-gray-50 border-b border-gray-200"},[t("p",{class:"text-sm text-gray-600"},[t("strong",null,"Desktop Interactions:"),c(" Hold any row for 1 second to view adjustment history, or double-click to adjust item count. ")])],-1)),He(ze(be),{data:S.inventory,columns:Re,class:"w-full relative display",options:Be},null,8,["data"])]),_:1}))]),O.value?(a(),r("div",us,[T.value?(a(),r("div",cs,[e[65]||(e[65]=t("div",{class:"px-4 py-2 border-b border-gray-200"},[t("p",{class:"text-sm font-medium text-gray-700"},"Export Data")],-1)),t("button",{onClick:Le,class:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center"},e[59]||(e[59]=[t("svg",{class:"h-4 w-4 mr-3 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),c(" Export CSV ")])),t("button",{onClick:Ie,class:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center"},e[60]||(e[60]=[t("svg",{class:"h-4 w-4 mr-3 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),c(" Export Excel ")])),t("button",{onClick:Oe,class:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center"},e[61]||(e[61]=[t("svg",{class:"h-4 w-4 mr-3 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),c(" Export PDF ")])),t("button",{onClick:Ve,class:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center"},e[62]||(e[62]=[t("svg",{class:"h-4 w-4 mr-3 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),c(" Print Report ")])),e[66]||(e[66]=t("div",{class:"border-t border-gray-200 my-2"},null,-1)),t("button",{onClick:le,class:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center"},e[63]||(e[63]=[t("svg",{class:"h-4 w-4 mr-3 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),c(" Sync Inventory Data ")])),e[67]||(e[67]=t("div",{class:"border-t border-gray-200 my-2"},null,-1)),t("button",{onClick:ce,class:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center"},e[64]||(e[64]=[t("svg",{class:"h-4 w-4 mr-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1),c(" Clear All Filters ")]))])):v("",!0),t("button",{onClick:Se,class:I(["bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-200 ease-out transform hover:scale-105",{"rotate-45":T.value}])},[T.value?(a(),q(Qe,{key:1,class:"h-6 w-6"})):(a(),q(Ge,{key:0,class:"h-6 w-6"}))],2)])):v("",!0),T.value?(a(),r("div",{key:1,onClick:_,class:"fixed inset-0 bg-black bg-opacity-25 z-30"})):v("",!0),X.value?(a(),r("div",ms,[t("div",vs,[t("div",gs,[e[71]||(e[71]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Adjust Item Count ",-1)),m.value?(a(),r("div",ps,[t("p",ys,l(m.value.itemname),1),t("p",xs,"Store: "+l(m.value.storename),1),t("p",bs,"Current Count: "+l(Number(m.value.item_count||0).toFixed(2)),1),t("p",fs,"ID: "+l(m.value.id||"No ID"),1)])):v("",!0),t("div",ws,[t("div",null,[e[69]||(e[69]=t("label",{class:"block text-sm font-medium text-gray-700"},"Adjustment Type",-1)),k(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>d.value.adjustment_type=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},e[68]||(e[68]=[t("option",{value:"set"},"Set to Value",-1),t("option",{value:"add"},"Add to Current",-1),t("option",{value:"subtract"},"Subtract from Current",-1)]),512),[[xe,d.value.adjustment_type]])]),t("div",null,[t("label",hs,[d.value.adjustment_type==="set"?(a(),r("span",_s,"New Value")):d.value.adjustment_type==="add"?(a(),r("span",ks,"Amount to Add")):(a(),r("span",Ss,"Amount to Subtract"))]),k(t("input",{type:"number",step:"0.01","onUpdate:modelValue":e[7]||(e[7]=s=>d.value.adjustment_value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Enter value",required:""},null,512),[[A,d.value.adjustment_value]])]),t("div",null,[e[70]||(e[70]=t("label",{class:"block text-sm font-medium text-gray-700"},"Remarks *",-1)),k(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>d.value.remarks=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Reason for adjustment (required)",required:""},null,512),[[A,d.value.remarks]])]),d.value.adjustment_type!=="set"&&d.value.adjustment_value&&m.value?(a(),r("div",js,[t("p",Ts,[d.value.adjustment_type==="add"?(a(),r("span",Ns," New value will be: "+l((Number(m.value.item_count||0)+Number(d.value.adjustment_value||0)).toFixed(2)),1)):(a(),r("span",Cs," New value will be: "+l((Number(m.value.item_count||0)-Number(d.value.adjustment_value||0)).toFixed(2)),1))])])):v("",!0)]),t("div",Ds,[t("button",{onClick:ae,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",disabled:E.value}," Cancel ",8,As),t("button",{onClick:Me,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-blue-300",disabled:E.value||!d.value.adjustment_value||!d.value.remarks.trim()},[E.value?(a(),r("span",Fs,"Processing...")):(a(),r("span",Es,"Apply Adjustment"))],8,Ms)])])])])):v("",!0),G.value?(a(),r("div",Rs,[t("div",Bs,[t("div",Ls,[e[74]||(e[74]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Adjustment History ",-1)),m.value?(a(),r("div",Is,[t("p",Os,l(m.value.itemname),1),t("p",Vs,"Store: "+l(m.value.storename),1)])):v("",!0),Q.value?(a(),r("div",Ps,e[72]||(e[72]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-indigo-500"},null,-1),t("span",{class:"ml-3"},"Loading history...",-1)]))):U.value.length===0?(a(),r("div",Us," No adjustment history found for this item. ")):(a(),r("div",$s,[t("table",Hs,[e[73]||(e[73]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Old Value"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"New Value"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Adjustment"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Remarks"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Adjusted By")])],-1)),t("tbody",zs,[(a(!0),r(W,null,K(U.value,s=>(a(),r("tr",{key:s.id},[t("td",qs,l(new Date(s.created_at).toLocaleString()),1),t("td",Js,[t("span",{class:I(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-blue-100 text-blue-800":s.adjustment_type==="set","bg-green-100 text-green-800":s.adjustment_type==="add","bg-red-100 text-red-800":s.adjustment_type==="subtract"}])},l(s.adjustment_type.toUpperCase()),3)]),t("td",Ws,l(Number(s.old_item_count).toFixed(2)),1),t("td",Ks,l(Number(s.new_item_count).toFixed(2)),1),t("td",{class:I(["px-6 py-4 whitespace-nowrap text-sm",{"text-green-600":s.adjustment_type==="add"||s.adjustment_type==="set"&&s.new_item_count>s.old_item_count,"text-red-600":s.adjustment_type==="subtract"||s.adjustment_type==="set"&&s.new_item_count<s.old_item_count}])},[s.adjustment_type==="add"?(a(),r("span",Xs,"+")):s.adjustment_type==="subtract"?(a(),r("span",Gs,"-")):v("",!0),c(" "+l(Number(s.adjustment_value).toFixed(2)),1)],2),t("td",Qs,[t("div",{class:"max-w-xs truncate",title:s.remarks},l(s.remarks),9,Ys)]),t("td",Zs,l(s.adjusted_by_name||"Unknown"),1)]))),128))])])])),t("div",{class:"flex justify-end mt-6"},[t("button",{onClick:Fe,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400"}," Close ")])])])])):v("",!0),$.value?(a(),r("div",eo,[t("div",to,[t("div",so,[e[86]||(e[86]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Sync Inventory Variance ",-1)),e[87]||(e[87]=t("div",{class:"mb-4 p-3 bg-blue-50 rounded"},[t("p",{class:"text-sm text-blue-700"}," This will update inventory data by syncing with waste declarations, received orders, and sales data. ")],-1)),t("div",oo,[t("div",null,[e[75]||(e[75]=t("label",{class:"block text-sm font-medium text-gray-700"},"Sync Date *",-1)),k(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>y.value.sync_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[A,y.value.sync_date]])]),S.userRole.toUpperCase()==="ADMIN"||S.userRole.toUpperCase()==="SUPERADMIN"?(a(),r("div",no,[e[77]||(e[77]=t("label",{class:"block text-sm font-medium text-gray-700"},"Store *",-1)),k(t("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>y.value.store_name=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},[e[76]||(e[76]=t("option",{value:""},"Select a store...",-1)),(a(!0),r(W,null,K(Z.value,s=>(a(),r("option",{key:s,value:s},l(s),9,ao))),128))],512),[[xe,y.value.store_name]])])):v("",!0),x.value?(a(),r("div",lo,[e[84]||(e[84]=t("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Current Data Status",-1)),Y.value?(a(),r("div",ro,e[78]||(e[78]=[t("div",{class:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-indigo-500"},null,-1),t("span",{class:"ml-2 text-sm"},"Checking status...",-1)]))):(a(),r("div",io,[t("div",uo,[e[79]||(e[79]=t("span",null,"Inventory Records:",-1)),t("span",{class:I(x.value.status.inventory_records>0?"text-green-600":"text-red-600")},l(x.value.status.inventory_records),3)]),t("div",co,[e[80]||(e[80]=t("span",null,"Waste Records:",-1)),t("span",mo,l(x.value.status.waste_records),1)]),t("div",vo,[e[81]||(e[81]=t("span",null,"Received Records:",-1)),t("span",go,l(x.value.status.received_records),1)]),t("div",po,[e[82]||(e[82]=t("span",null,"Sales Records:",-1)),t("span",yo,l(x.value.status.sales_records),1)]),x.value.status.last_sync?(a(),r("div",xo,[t("p",bo,[c(" Last sync: "+l(new Date(x.value.status.last_sync.created_at).toLocaleString())+" ",1),e[83]||(e[83]=t("br",null,null,-1)),c(" Affected records: "+l(x.value.status.last_sync.affected_records),1)])])):v("",!0),x.value.status.can_sync?v("",!0):(a(),r("div",fo," ⚠️ No inventory records found for this date/store. Cannot perform sync. "))]))])):v("",!0),e[85]||(e[85]=t("div",{class:"p-3 bg-yellow-50 border border-yellow-200 rounded"},[t("div",{class:"flex"},[t("svg",{class:"h-5 w-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),t("div",null,[t("p",{class:"text-yellow-800 text-sm"},[t("strong",null,"Warning:"),c(" This will overwrite existing waste, received, and sales data with values from the source tables. Make sure the source data is accurate before proceeding. ")])])])],-1))]),t("div",wo,[t("button",{onClick:re,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",disabled:R.value}," Cancel ",8,ho),t("button",{onClick:Ee,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-300",disabled:R.value||!y.value.sync_date||x.value&&!x.value.status.can_sync},[R.value?(a(),r("span",ko,"Syncing...")):(a(),r("span",So,"Start Sync"))],8,_o)])])])])):v("",!0)]),_:1}))}};export{$o as default};
