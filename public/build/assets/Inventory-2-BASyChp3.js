import{d as g,k,T,s as q,e as s,a as r,t as a,F as i,h as c,o}from"./app-D4KRJyko.js";const M={class:"container mx-auto p-4"},w={class:"text-2xl font-bold mb-4"},A={key:0,class:"overflow-x-auto"},D={class:"min-w-full bg-white border"},O={class:"border px-4 py-2"},S={class:"border px-4 py-2"},B=["value","onInput"],E={class:"border px-4 py-2 font-bold"},F={class:"border px-4 py-2 font-bold"},L={key:1,class:"text-center py-4"},N={__name:"Inventory-2",props:{initialItems:{type:Array,default:()=>[]},currentMonth:String},setup(p){const y=p,l=g([]),u=g([]);k(()=>{if(l.value=(y.initialItems||[]).map(t=>({...t,quantities:t.quantities||{}})),y.currentMonth){const t=new Date(y.currentMonth),e=new Date(t.getFullYear(),t.getMonth()+1,0).getDate();u.value=Array.from({length:e},(n,d)=>d+1)}});const h=T({items:l}),x=()=>{h.post("/update-inventory",{preserveScroll:!0})},b=(t,e)=>t.quantities&&t.quantities[e]||0,f=(t,e,n)=>{t.quantities||(t.quantities={}),t.quantities[e]=parseInt(n)||0},v=t=>t.quantities?Object.values(t.quantities).reduce((e,n)=>e+(n||0),0):0,_=t=>l.value.reduce((e,n)=>e+b(n,t),0),m=q(()=>l.value.reduce((t,e)=>t+v(e),0));return(t,e)=>(o(),s("div",M,[r("h1",w,"Inventory for "+a(p.currentMonth),1),l.value.length&&u.value.length?(o(),s("div",A,[r("table",D,[r("thead",null,[r("tr",null,[e[0]||(e[0]=r("th",{class:"px-4 py-2 bg-gray-100 border"},"ITEMS",-1)),e[1]||(e[1]=r("th",{class:"px-4 py-2 bg-gray-100 border"},"CATEGORY",-1)),(o(!0),s(i,null,c(u.value,n=>(o(),s("th",{key:n,class:"px-4 py-2 bg-gray-100 border"},a(n)+"/"+a(p.currentMonth.split(" ")[0].substring(0,3)),1))),128)),e[2]||(e[2]=r("th",{class:"px-4 py-2 bg-gray-100 border"},"TOTAL",-1))])]),r("tbody",null,[(o(!0),s(i,null,c(l.value,n=>(o(),s("tr",{key:n.id},[r("td",O,a(n.name),1),r("td",S,a(n.category),1),(o(!0),s(i,null,c(u.value,d=>(o(),s("td",{key:d,class:"border px-4 py-2"},[r("input",{type:"number",value:b(n,d),onInput:I=>f(n,d,I.target.value),class:"w-16 px-2 py-1 border rounded",min:"0"},null,40,B)]))),128)),r("td",E,a(v(n)),1)]))),128))]),r("tfoot",null,[r("tr",null,[e[3]||(e[3]=r("td",{colspan:"2",class:"border px-4 py-2 font-bold"},"TOTAL",-1)),(o(!0),s(i,null,c(u.value,n=>(o(),s("td",{key:n,class:"border px-4 py-2 font-bold"},a(_(n)),1))),128)),r("td",F,a(m.value),1)])])])])):(o(),s("div",L," No inventory data available. ")),r("button",{onClick:x,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," Update Inventory ")]))}};export{N as default};
