import{d as o,s as b,B as ve,T as fe,k as he,A as be,p as ge,e as ye,b as l,w as i,c as u,C as _e,F as Ce,o as c,a as s,j,y as H,f as m,i as D,g as F,u as we,D as ke}from"./app-DwAHA_Mt.js";import{_ as Ee,a as Ae,b as De}from"./More-D1JpTQBi.js";import{_ as xe,a as Me,E as L}from"./Enabled-D3pVTxtP.js";import{_ as p}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-DsXaYi2t.js";import{_ as N}from"./TransparentButton-okQ3IpTB.js";import{T as Te}from"./TableContainer-PwYTmfDA.js";import{_ as Q}from"./AdminPanel-1DfNN1pO.js";import{_ as G}from"./Excel-CHAZWTeG.js";import{A as V}from"./Add-D-ME3vlh.js";import{e as Y}from"./editblue-4ZtS245Y.js";import{I as W}from"./Import-Sh43VCub.js";import{m as Oe}from"./moreblue-CxeFy6Fy.js";import{P as X,D as Ie}from"./dataTables-7Vvj0GSY.js";import{_ as Re}from"./RetailPanel-D1_Qt4-J.js";import"./Modal-DosvBnh2.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-DMqsnpds.js";import"./SelectOption-CN7kucLr.js";import"./FormComponent-DsXdn04S.js";import"./DaisyModal-W0NxAgyd.js";/* empty css                                                                   */import"./possettings-CScHmGCI.js";import"./RetailGroup-ClNQ_vXI.js";import"./Logout-96D5XcFa.js";/* empty css                                                             */import"./RetailItems-i_spRMW5.js";import"./Attendance-CVSU-1NF.js";import"./FileSaver.min-DPdB0GQH.js";import"./exceljs.min-Z3crVyW7.js";import"./SuccessButton-BWQ5NcUW.js";import"./Excel-Ccvbr3BQ.js";const Se={class:"md:hidden"},Pe={class:"absolute adjust"},qe={class:"flex flex-col",id:"panel"},Ne={class:"flex flex-wrap items-center"},$e={class:"hidden md:block"},Ue={class:"absolute adjust"},Be={class:"flex flex-col sm:flex-row justify-start items-center",id:"panel"},je={class:"flex flex-wrap justify-center sm:justify-start w-full sm:w-auto"},He={components:{RetailPanel:Re},data(){return{showPanel:!0}},methods:{hidePanel(){this.showPanel=!1}}},yt=Object.assign(He,{__name:"Index",props:{items:{type:Array,required:!0},itemids:Array,auth:{type:Object,required:!0},rboinventitemretailgroups:{type:Array,required:!0}},setup(x){X.use(Ie);const f=o(""),g=o(""),y=o(""),_=o("");o("");const C=o(""),w=o(""),M=o(!1),k=o([]),E=x,z=b(()=>E.auth==="STORE"?Q:Q),{user:J}=ve(E.auth),T=o(J.value.role),n=b(()=>T.value==="SUPERADMIN"),d=b(()=>T.value==="OPIC"),$=b(()=>T.value==="ADMIN"),O=o(!1),I=o(!1),R=o(!1),K=o(!1),S=o(!1),Z=b(()=>{const e=[{data:"Activeondelivery",title:"ENABLEORDER"},{data:"itemid",title:"PRODUCTCODE"},{data:"itemname",title:"DESCRIPTION"},{data:"barcode",title:"BARCODE"},{data:"production",title:"PRODUCTION"},{data:"itemgroup",title:"CATEGORY"},{data:"specialgroup",title:"RETAILGROUP"},{data:"moq",title:"MOQ"},{data:"cost",title:"COST",render:(a,r,t)=>r==="display"?t.cost.toFixed(2):a},{data:"price",title:"SRP",render:(a,r,t)=>r==="display"?t.price.toFixed(2):a}];return(n||d.value||$.value)&&(e.unshift({data:null,title:'<input type="checkbox" id="selectAll" class="form-checkbox h-5 w-5 text-blue-600 rounded-full">',orderable:!1,render:(a,r,t)=>`<input type="checkbox" class="select-item form-checkbox h-5 w-5 text-blue-600 rounded-full" data-id="${t.itemid}">`}),e.push({data:null,render:"#action",title:"ACTIONS"})),e}),ee={paging:!1,scrollX:!0,scrollY:"60vh",scrollCollapse:!0},te=()=>{M.value=!M.value,document.querySelectorAll(".select-item").forEach(a=>{a.checked=M.value}),U()},U=()=>{const e=document.querySelectorAll(".select-item:checked");k.value=Array.from(e).map(a=>a.dataset.id)},ae=(e,a,r,t,h,q)=>{f.value=e,g.value=a,_.value=r,C.value=t,y.value=h,w.value=q,O.value=!0},le=e=>{f.value=e,S.value=!0},oe=(e,a,r,t,h,q)=>{f.value=e,g.value=a,_.value=r,C.value=t,y.value=h,w.value=q,I.value=!0},B=()=>{R.value=!0},se=()=>{O.value=!1},ie=()=>{I.value=!1},ne=()=>{R.value=!1},re=()=>{S.value=!1},ce=fe({title:"",content:""}),A=()=>{ce.post("/ImportProducts",{onSuccess:()=>{},onError:e=>{}})},ue=e=>{console.log("Selected Category:",e)};he(()=>{o(null),be(()=>{if(d.value||n.value){const e=document.getElementById("selectAll");e&&e.addEventListener("change",te),document.querySelectorAll(".select-item").forEach(r=>{r.addEventListener("change",U)})}})});const P=()=>{if(k.value.length===0){alert("Please select at least one item.");return}ke.post("/EnableOrder",{itemids:k.value}).then(e=>{alert(e.data.message),location.reload()}).catch(e=>{console.error("Error updating items:",e),alert("An error occurred while updating items.")})},v=o(null);v.value&&(v.value.api=v.value.dt);const me=()=>v.value&&v.value.api?v.value.api.rows({search:"applied"}).data().toArray():E.items,de=()=>{window.location.href="/items"},pe=()=>{window.location.href="/warehouse"};return(e,a)=>{const r=ge("Head");return c(),ye(Ce,null,[l(r,{title:"RETAILITEMS"},{default:i(()=>a[0]||(a[0]=[s("meta",{name:"theme-color",content:"#000000"},null,-1),s("link",{rel:"manifest",href:"/manifest.json"},null,-1),s("link",{rel:"apple-touch-icon",href:"/images/icons/icon-192x192.png"},null,-1),s("meta",{name:"apple-mobile-web-app-status-bar",content:"#000000"},null,-1),s("meta",{name:"apple-mobile-web-app-capable",content:"yes"},null,-1),s("meta",{name:"mobile-web-app-capable",content:"yes"},null,-1)])),_:1}),(c(),u(_e(z.value),{"active-tab":"RETAILITEMS"},{modals:i(()=>[l(Ee,{"show-modal":R.value,onToggleActive:ne,rboinventitemretailgroups:E.rboinventitemretailgroups,onSelectItem:ue},null,8,["show-modal","rboinventitemretailgroups"]),l(Ae,{"show-modal":O.value,itemid:f.value,itemname:g.value,itemgroup:_.value,price:C.value,cost:y.value,moq:w.value,onToggleActive:se},null,8,["show-modal","itemid","itemname","itemgroup","price","cost","moq"]),l(xe,{"show-modal":I.value,itemid:f.value,itemname:g.value,itemgroup:_.value,price:C.value,cost:y.value,moq:w.value,onToggleActive:ie},null,8,["show-modal","itemid","itemname","itemgroup","price","cost","moq"]),l(De,{"show-modal":S.value,itemid:f.value,onToggleActive:re},null,8,["show-modal","itemid"]),l(Me,{"show-modal":K.value,itemids:k.value,onClick:P},null,8,["show-modal","itemids"])]),main:i(()=>[l(Te,null,{default:i(()=>[s("div",Se,[s("div",Pe,[j(s("div",qe,[s("div",Ne,[d.value||n.value?(c(),u(p,{key:0,type:"button",onClick:B,class:"m-2 bg-navy"},{default:i(()=>[l(V,{class:"h-4"})]),_:1})):m("",!0),d.value||n.value?(c(),u(p,{key:1,type:"button",onClick:P,class:"m-2 bg-navy"},{default:i(()=>[l(L,{class:"h-4"})]),_:1})):m("",!0),s("form",{onSubmit:D(A,["prevent"]),id:"importproduct",class:"flex items-center"},[d.value||n.value?(c(),u(G,{key:0,data:x.items,headers:["ITEMID","ITEMNAME","BARCODE","CATEGORY","PRICE","PRODUCTION","MOQ"],"row-name-props":["itemid","itemname","barcode","itemgroup","price","production","moq"],class:"relative display"},null,8,["data"])):m("",!0),d.value||n.value?(c(),u(p,{key:1,class:"m-2 bg-navy",onClick:D(A,["prevent"])},{default:i(()=>[l(W,{class:"h-4"})]),_:1})):m("",!0)],32)]),a[1]||(a[1]=s("div",{class:"w-full mt-2"},null,-1))],512),[[H,e.showPanel]])])]),s("div",$e,[s("div",Ue,[j(s("div",Be,[s("div",je,[n.value?(c(),u(p,{key:0,type:"button",onClick:B,class:"m-2 sm:m-6 bg-navy"},{default:i(()=>[l(V,{class:"h-4"})]),_:1})):m("",!0),d.value||n.value?(c(),u(p,{key:1,type:"button",onClick:P,class:"m-2 sm:m-6 bg-navy"},{default:i(()=>[l(L,{class:"h-4"})]),_:1})):m("",!0)]),s("form",{onSubmit:D(A,["prevent"]),id:"importproduct",class:"flex flex-col sm:flex-row items-center w-full sm:w-auto"},[d.value||n.value?(c(),u(G,{key:0,data:me(),headers:["ITEMID","ITEMNAME","BARCODE","CATEGORY","PRICE","PRODUCTION"],"row-name-props":["itemid","itemname","barcode","itemgroup","price","production"],class:"mt-4 sm:mt-0 sm:ml-4 relative display"},null,8,["data"])):m("",!0),n.value?(c(),u(p,{key:1,class:"m-2 sm:m-6 bg-navy",onClick:D(A,["prevent"])},{default:i(()=>[l(W,{class:"h-4"})]),_:1})):m("",!0)],32),l(p,{type:"button",onClick:de,class:"sm:m-2 bg-navy"},{default:i(()=>a[2]||(a[2]=[F(" BW PRODUCTS ")])),_:1}),l(p,{type:"button",onClick:pe,class:"sm:m-2 bg-red-900"},{default:i(()=>a[3]||(a[3]=[F(" WAREHOUSE ")])),_:1})],512),[[H,e.showPanel]])])]),l(we(X),{data:x.items,columns:Z.value,class:"w-full relative display mt-10",options:ee,ref_key:"dataTable",ref:v},{action:i(t=>[d.value||n.value?(c(),u(N,{key:0,type:"button",onClick:h=>ae(t.cellData.itemid,t.cellData.itemname,t.cellData.itemgroup,t.cellData.price,t.cellData.cost,t.cellData.moq),class:"me-1"},{default:i(()=>[l(Y,{class:"h-6"})]),_:2},1032,["onClick"])):m("",!0),l(N,{type:"button",onClick:h=>le(t.cellData.itemid),class:"me-1"},{default:i(()=>[l(Oe,{class:"h-6"})]),_:2},1032,["onClick"]),$.value||n.value?(c(),u(N,{key:1,type:"button",onClick:h=>oe(t.cellData.itemid,t.cellData.itemname,t.cellData.itemgroup,t.cellData.price,t.cellData.cost,t.cellData.moq),class:"me-1"},{default:i(()=>[l(Y,{class:"h-6"})]),_:2},1032,["onClick"])):m("",!0)]),_:1},8,["data","columns"])]),_:1})]),_:1}))],64)}}});export{yt as default};
