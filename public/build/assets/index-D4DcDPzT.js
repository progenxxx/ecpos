import{T as C,d as c,s as $,k as B,l as F,o as h,c as J,w as i,a as r,i as G,b as e,u as o,j as T,v as V,e as U,F as z,h as Q,t as j,f as K,n as E,g as R,x as re,H as Y,D as le}from"./app-DwAHA_Mt.js";import{M as P}from"./Modal-DosvBnh2.js";import{_ as x}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-DsXaYi2t.js";import{_ as L,a as q,b as N}from"./InputError-DMqsnpds.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as ne}from"./TableContainer-PwYTmfDA.js";import{_ as ie}from"./AdminPanel-1DfNN1pO.js";import{S as de}from"./Save-CyUTnkDp.js";import{B as ue}from"./Back-CCs1-C1O.js";import{T as ce}from"./Trash-BXtHSHvv.js";import{P as W,D as me}from"./dataTables-7Vvj0GSY.js";import"./RetailGroup-ClNQ_vXI.js";import"./Logout-96D5XcFa.js";/* empty css                                                             */import"./RetailItems-i_spRMW5.js";import"./Attendance-CVSU-1NF.js";const pe={class:"grid grid-cols-3 gap-4 h-full"},ge={class:"col-span-3"},fe={class:"col-span-3"},ve={key:0,class:"absolute w-full mt-1 bg-white border rounded-md shadow-lg max-h-60 overflow-auto z-10"},be=["onMousedown"],ye={class:"col-span-3"},we={__name:"Create",props:{showModal:Boolean,JOURNALID:String,items:{type:Array,required:!0}},emits:["toggleActive"],setup(p,{emit:g}){const D=g,m=p,s=C({JOURNALID:"",itemname:"",qty:"",unitid:""}),t=c(""),w=c(!1),I=c(null),v=$(()=>m.items.filter(A=>A.itemname.toLowerCase().includes(t.value.toLowerCase())));function a(A){I.value=A,t.value=A.itemname,s.itemname=A.itemid,w.value=!1}function l(){setTimeout(()=>{w.value=!1},100)}const d=()=>{s.post("/ItemOrders",{preserveScroll:!0,onSuccess:()=>{s.reset(),location.reload()}})},M=()=>{D("toggleActive")};return B(()=>{s.JOURNALID=m.JOURNALID,F(()=>m.JOURNALID,A=>{s.JOURNALID=A})}),(A,b)=>(h(),J(P,{title:"ORDER ENTRIES",onToggleActive:M,"show-modal":p.showModal},{content:i(()=>[r("form",{onSubmit:G(d,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[r("div",pe,[r("div",ge,[e(L,{for:"JOURNALID",value:"JOURNALID"}),e(q,{id:"JOURNALID",modelValue:o(s).JOURNALID,"onUpdate:modelValue":b[0]||(b[0]=y=>o(s).JOURNALID=y),type:"text",class:"mt-1 block w-full input","is-error":!!o(s).errors.JOURNALID,autofocus:"",disabled:""},null,8,["modelValue","is-error"]),e(N,{message:o(s).errors.JOURNALID,class:"mt-2"},null,8,["message"])]),r("div",fe,[e(L,{for:"itemname",value:"ITEMNAME"}),T(r("input",{type:"text","onUpdate:modelValue":b[1]||(b[1]=y=>t.value=y),onFocus:b[2]||(b[2]=y=>w.value=!0),onBlur:l,placeholder:"Search items...",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[V,t.value]]),w.value?(h(),U("div",ve,[(h(!0),U(z,null,Q(v.value,y=>(h(),U("div",{key:y.itemid,onMousedown:H=>a(y),class:"px-4 py-2 cursor-pointer hover:bg-gray-100"},j(y.itemname),41,be))),128))])):K("",!0),e(N,{message:o(s).errors.itemname,class:"mt-2"},null,8,["message"])]),r("div",ye,[e(L,{for:"qty",value:"QTY"}),e(q,{id:"qty",modelValue:o(s).qty,"onUpdate:modelValue":b[3]||(b[3]=y=>o(s).qty=y),type:"number",class:"mt-1 block w-full",required:"",autocomplete:"qty"},null,8,["modelValue"]),e(N,{message:o(s).errors.qty,class:"mt-2"},null,8,["message"])])])],32)]),buttons:i(()=>[e(x,{type:"submit",onClick:d,disabled:o(s).processing,class:E({"opacity-25":o(s).processing})},{default:i(()=>b[4]||(b[4]=[R(" SUBMIT ")])),_:1},8,["disabled","class"])]),_:1},8,["show-modal"]))}},Ae=ae(we,[["__scopeId","data-v-d23c2dd7"]]),he={class:"grid grid-cols-3 gap-4 h-full"},De={class:"col-span-3"},Ie={__name:"GetBWP",props:{showModal:Boolean,inventjournaltransrepos:{type:Array,required:!1},JOURNALID:String,items:{type:Array,required:!0}},emits:["toggleActive"],setup(p,{emit:g}){const D=g,m=p,s=C({JOURNALID:"",itemname:"",qty:"",unitid:""}),t=c("");c(!1),c(null),$(()=>m.items.filter(v=>v.itemname.toLowerCase().includes(t.value.toLowerCase())));const w=()=>{console.log("Submitting form..."),s.patch("/special-orders/getbwproducts",{preserveScroll:!0,onSuccess:()=>{console.log("Form submission successful."),I()},onError:v=>{console.error("Form submission error:",v)}})},I=()=>{D("toggleActive")};return B(()=>{s.JOURNALID=m.JOURNALID,F(()=>m.JOURNALID,v=>{s.JOURNALID=v})}),(v,a)=>(h(),J(P,{title:"GET BW PRODUCTS",onToggleActive:I,"show-modal":p.showModal},{content:i(()=>[r("form",{onSubmit:G(w,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[r("div",he,[r("div",De,[e(q,{id:"JOURNALID",modelValue:o(s).JOURNALID,"onUpdate:modelValue":a[0]||(a[0]=l=>o(s).JOURNALID=l),type:"text",class:"mt-1 block w-full input","is-error":!!o(s).errors.JOURNALID,autofocus:"",disabled:""},null,8,["modelValue","is-error"]),e(N,{message:o(s).errors.JOURNALID,class:"mt-2"},null,8,["message"])])])],32)]),buttons:i(()=>[e(x,{type:"submit",onClick:w,disabled:o(s).processing,class:E({"opacity-25":o(s).processing})},{default:i(()=>a[1]||(a[1]=[R(" GET ITEMS ")])),_:1},8,["disabled","class"])]),_:1},8,["show-modal"]))}},xe={class:"grid grid-cols-3 gap-4 h-full"},Oe={class:"col-span-3"},Ne=["value"],Ue={class:"col-span-3"},Re={class:"relative"},ke=["placeholder"],Le={class:"col-span-3"},Ee=["is-error"],Se={__name:"CopyFrom",props:{showModal:Boolean,sptransrepos:{type:Array,required:!1},JOURNALID:String,items:{type:Array,required:!0},rbostoretables:{type:Array,required:!0}},emits:["toggleActive"],setup(p,{emit:g}){const D=g,m=p,s=a=>{t.storeid=a},t=C({JOURNALID:"",itemname:"",storeid:"",qty:"",unitid:"",EndDate:"",remarks:""}),w=c("");c(!1),c(null),$(()=>m.items.filter(a=>a.itemname.toLowerCase().includes(w.value.toLowerCase())));const I=()=>{t.patch("/special-orders/post",{preserveScroll:!0,onSuccess:()=>{t.reset()},onError:a=>{console.error(a)},data:{...t.data,selectStore:t.storeid}}),location.reload()},v=()=>{D("toggleActive")};return B(()=>{t.JOURNALID=m.JOURNALID,F(()=>m.JOURNALID,a=>{t.JOURNALID=a})}),(a,l)=>(h(),J(P,{title:"POST SPECIAL ORDERS",onToggleActive:v,"show-modal":p.showModal},{content:i(()=>[r("form",{onSubmit:G(I,["prevent"]),class:"px-2 py-3 max-h-[50vh] lg:max-h-[70vh] overflow-y-auto"},[r("div",xe,[r("div",Oe,[e(L,{for:"StoreName",value:"SELECT STORE"}),T(r("select",{id:"storeid","onUpdate:modelValue":l[0]||(l[0]=d=>o(t).storeid=d),class:"select select-bordered w-full",onChange:l[1]||(l[1]=d=>s(o(t).storeid))},[(h(!0),U(z,null,Q(p.rbostoretables,d=>(h(),U("option",{key:d.storeid,value:d.NAME},j(d.NAME),9,Ne))),128))],544),[[re,o(t).storeid]]),e(N,{class:"mt-2",message:o(t).errors.storeid},null,8,["message"])]),e(L,{for:"DATE",value:"DELIVERY DATE"}),r("div",Ue,[r("div",Re,[l[5]||(l[5]=r("div",{class:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"},[r("svg",{class:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[r("path",{"fill-rule":"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z","clip-rule":"evenodd"})])],-1)),T(r("input",{id:"EndDate",type:"date","onUpdate:modelValue":l[2]||(l[2]=d=>o(t).EndDate=d),onInput:l[3]||(l[3]=(...d)=>a.formattedDate2&&a.formattedDate2(...d)),placeholder:a.formattedDate2,class:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},null,40,ke),[[V,o(t).EndDate]]),e(N,{message:o(t).errors.EndDate,class:"mt-2"},null,8,["message"])])]),r("div",Le,[l[6]||(l[6]=r("label",{for:"message",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"REMARKS",-1)),T(r("textarea",{id:"remarks","onUpdate:modelValue":l[4]||(l[4]=d=>o(t).remarks=d),"is-error":!!o(t).errors.remarks,type:"text",class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},"                            ",8,Ee),[[V,o(t).remarks]]),e(N,{message:o(t).errors.remarks,class:"mt-2"},null,8,["message"])])])],32)]),buttons:i(()=>[e(x,{type:"submit",onClick:I,disabled:o(t).processing,class:E({"opacity-25":o(t).processing})},{default:i(()=>l[7]||(l[7]=[R(" POST ")])),_:1},8,["disabled","class"])]),_:1},8,["show-modal"]))}},Te={class:"flex justify-start items-center"},Qe={__name:"index",props:{sptransrepos:{type:Array,required:!0},sptrans:{type:Array,required:!0},journalid:{type:[String,Number],required:!0},items:{type:Array,required:!0},rbostoretables:{type:Array,required:!0}},setup(p){W.use(me);const g=c("");c(""),c("");const D=c(!1),m=c(!1),s=c(!1),t=p,w=u=>{console.log("Selected rbostoretables:",u)},I=[{data:"ITEMID",title:"ITEMID"},{data:"itemname",title:"ITEMNAME"},{data:"itemgroup",title:"CATEGORY"},{data:"COUNTED",title:"COUNTED",render:function(u,n,O){return n==="display"?`<input type="number" class="counted-input form-input block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" value="${Number(u).toFixed(0)}" min="0" step="1">`:u}}],v={paging:!1,scrollX:!0,scrollY:"70vh",scrollCollapse:!0,drawCallback:function(u){this.api().rows().every(function(){const O=this.data(),S=this.node().querySelector(".counted-input");S&&S.addEventListener("change",oe=>ee(oe,O))})}},a=u=>{g.value="INVENTORY",m.value=!0,console.log(g.value)},l=u=>{g.value=u,D.value=!0,console.log(g.value)},d=()=>{s.value=!1},M=()=>{m.value=!1},A=()=>{D.value=!1};C({StartDate:"",EndDate:""});const b=()=>{window.location.href="/mgcount"},y=()=>{window.confirm("Are you sure you want to delete all orders?")?window.location.href="/SP-DeleteOrders":console.log("User cancelled the delete operation.")},H=()=>{window.location.href="/specialorders/vieworders"},X=u=>{console.log("Selected Item:",u)},Z=c([]),k=Y({}),f=Y({text:"",type:""}),ee=(u,n)=>{const O=u.target.value;k[n.ITEMID]=O},te=async()=>{try{if(f.text="Updating counted values...",f.type="info",(await le.post("/api/sp-update-all-counted-values",{journalId:t.journalid,updatedValues:k})).data.success){console.log("All values updated successfully");for(const[n,O]of Object.entries(k)){const _=Z.value.find(S=>S.ITEMID===n);_&&(_.COUNTED=O)}Object.keys(k).forEach(n=>delete k[n]),f.text="All counted values updated successfully",f.type="success",location.reload()}else throw new Error("Update failed")}catch(u){console.error("You don't have any changes!",u),f.text="You don't have any changes!",f.type="error"}se()},se=()=>{setTimeout(()=>{f.text="",f.type=""},5e3)};return(u,n)=>(h(),J(ie,{"active-tab":"FGCOUNT"},{modals:i(()=>[e(Ae,{"show-modal":s.value,JOURNALID:g.value,items:t.items,onToggleActive:d,onSelectItem:X},null,8,["show-modal","JOURNALID","items"]),e(Ie,{"show-modal":m.value,JOURNALID:g.value,onToggleActive:M},null,8,["show-modal","JOURNALID"]),e(Se,{"show-modal":D.value,JOURNALID:g.value,rbostoretables:t.rbostoretables,onSelectItem:w,onToggleActive:A},null,8,["show-modal","JOURNALID","rbostoretables"])]),main:i(()=>[e(ne,null,{default:i(()=>[f.text?(h(),U("div",{key:0,class:E(["p-4 mb-4 rounded-md",f.type==="success"?"bg-green-100 text-green-700":f.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},j(f.text),3)):K("",!0),r("div",{class:E(["absolute adjust",{"mt-20":f.text}])},[r("div",Te,[e(x,{type:"button",onClick:b,class:"m-1 ml-2 bg-navy p-10"},{default:i(()=>[e(ue,{class:"h-5"})]),_:1}),e(x,{type:"button",onClick:n[0]||(n[0]=O=>a(p.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:i(()=>n[1]||(n[1]=[R(" GENERATE ")])),_:1}),e(x,{type:"button",onClick:te,class:"m-1 ml-2 bg-green-900 p-10"},{default:i(()=>[e(de,{class:"h-5"})]),_:1}),e(x,{type:"button",onClick:y,class:"m-1 ml-2 bg-red-900 p-10"},{default:i(()=>[e(ce,{class:"h-5"})]),_:1}),e(x,{type:"button",onClick:l,class:"m-2 sm:m-6 bg-red-900"},{default:i(()=>n[2]||(n[2]=[R(" POST ")])),_:1}),e(x,{type:"button",onClick:H,class:"m-1 ml-2 bg-navy p-10"},{default:i(()=>n[3]||(n[3]=[R(" FG LIST ")])),_:1})])],2),e(o(W),{data:p.sptransrepos,columns:I,class:"w-full relative display",options:v},{action:i(O=>n[4]||(n[4]=[r("label",{class:"inline-flex items-center"},[r("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600 rounded-full"}),r("span",{class:"ml-2 text-gray-700"})],-1)])),_:1},8,["data"])]),_:1})]),_:1}))}};export{Qe as default};
