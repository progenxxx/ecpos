import{d as m,s as E,l as $,k as j,c as A,w as k,D as I,o as i,a as t,n as p,t as u,b as M,e as b,h as P,E as Q,C as q,F as S,a0 as z,j as B,v as D}from"./app-DwAHA_Mt.js";import{C as x,r as G}from"./chart-8SaNzrGi.js";import{_ as H}from"./AdminPanel-1DfNN1pO.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{D as O,I as W,r as Z,R as Y,P as J}from"./CubeIcon-D7I-YHoJ.js";import"./RetailGroup-ClNQ_vXI.js";import"./Logout-96D5XcFa.js";/* empty css                                                             */import"./Modal-DosvBnh2.js";import"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-DsXaYi2t.js";import"./RetailItems-i_spRMW5.js";import"./Attendance-CVSU-1NF.js";const K={class:"min-h-screen bg-gray-50 p-6"},X={class:"text-3xl font-bold text-gray-800"},tt={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mb-8"},et=["onMouseenter"],ot={class:"p-6"},st={class:"flex items-center justify-between"},at={class:"mt-4"},rt={class:"text-sm font-medium text-gray-600"},lt={class:"text-sm text-gray-500 mt-2"},nt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},it={class:"bg-white rounded-xl shadow-md p-6"},dt={class:"h-[400px]"},ct={class:"bg-white rounded-xl shadow-md p-6"},ut={class:"space-y-4 max-h-[400px] overflow-y-auto"},mt={class:"font-semibold text-gray-800"},pt={class:"text-gray-600 mt-2"},bt={key:1,class:"text-gray-500 text-center py-4"},gt={class:"bg-white rounded-xl shadow-md p-6"},yt={class:"flex justify-between items-center mb-4"},vt={class:"flex space-x-4"},ft={class:"h-[500px]"},_t={__name:"admin copy 3",props:{username:{type:String,default:"User"},announcements:{type:Array,required:!0},metrics:{type:Object,required:!0,default:()=>({totalGross:0,totalNetsales:0,totalDiscount:0,totalCost:0,totalVat:0,totalVatableSales:0,paymentBreakdown:{cash:0,gcash:0,paymaya:0,card:0,loyaltyCard:0,foodPanda:0,grabFood:0}})}},setup(g){x.register(...G);const C=g,y=m(null),w=m(!1),v=m(null),f=m(null);let _=null,h=null;const n=m({start_date:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),d=s=>{const e=Number(s);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(isNaN(e)?0:e)},N=E(()=>{const s=C.metrics||{};return[{title:"TOTAL GROSS",value:d(s.totalGross),icon:O,color:"text-blue-600",bgColor:"bg-blue-100",description:"Total revenue before deductions"},{title:"TOTAL NETSALES",value:d(s.totalNetsales),icon:W,color:"text-green-600",bgColor:"bg-green-100",description:"Revenue after all deductions"},{title:"TOTAL DISCOUNT",value:d(s.totalDiscount),icon:O,color:"text-amber-600",bgColor:"bg-amber-100",description:"Sum of all applied discounts"},{title:"TOTAL COST",value:d(s.totalCost),icon:Z,color:"text-purple-600",bgColor:"bg-purple-100",description:"Aggregate cost of goods sold"},{title:"TOTAL VAT",value:d(s.totalVat),icon:Y,color:"text-pink-600",bgColor:"bg-pink-100",description:"Value Added Tax collected"},{title:"VATABLE SALES",value:d(s.totalVatableSales),icon:J,color:"text-indigo-600",bgColor:"bg-indigo-100",description:"Sales subject to VAT"}]}),V=()=>{var c;if(!v.value)return;const s=v.value.getContext("2d");_&&_.destroy();const e=((c=C.metrics)==null?void 0:c.paymentBreakdown)||{},o=Object.keys(e).map(l=>l.replace(/([A-Z])/g," $1").trim()),r=Object.values(e).map(l=>Number(l)||0);_=new x(s,{type:"pie",data:{labels:o,datasets:[{data:r,backgroundColor:["#3B82F6","#10B981","#F43F5E","#6366F1","#8B5CF6","#EC4899","#F97316"],hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:function(l){return`${l.label}: ${l.parsed}%`}}}}}})},T=async()=>{try{const s=await I.post(route("get.top.bottom.products"),{start_date:n.value.start_date,end_date:n.value.end_date}),e=s.data.topProducts,o=s.data.bottomProducts;R(e,o)}catch(s){console.error("Error fetching top/bottom products:",s)}},R=(s,e)=>{if(!f.value)return;const o=f.value.getContext("2d");h&&h.destroy();const r=s.slice(0,10).map(a=>a.itemname),c=e.slice(0,10).map(a=>a.itemname),l=s.slice(0,10).map(a=>a.total_quantity),F=e.slice(0,10).map(a=>a.total_quantity);h=new x(o,{type:"bar",data:{labels:[...r,...c],datasets:[{label:"Top 10 Products (Quantity)",data:l,backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Bottom 10 Products (Quantity)",data:[...Array(10).fill(0),...F],backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(a){const L=a.parsed.y;return`${a.dataset.label}: ${L.toFixed(2)}`}}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Quantity Sold"}}}}})};return $(n,()=>{T()}),j(()=>{w.value=!0,V(),T()}),(s,e)=>(i(),A(H,{"active-tab":"DASHBOARD"},{main:k(()=>[t("div",K,[t("div",{class:p(["mb-8 transform transition-all duration-500",[w.value?"translate-y-0 opacity-100":"translate-y-4 opacity-0"]])},[t("h1",X," Welcome back, "+u(g.username)+"! ðŸ‘‹ ",1),e[3]||(e[3]=t("p",{class:"text-gray-600 mt-2"}," Here's your business overview for today ",-1))],2),t("div",tt,[M(z,{"enter-active-class":"transition-all duration-500 ease-out","enter-from-class":"opacity-0 transform translate-y-4","enter-to-class":"opacity-100 transform translate-y-0","move-class":"transition-all duration-300"},{default:k(()=>[(i(!0),b(S,null,P(N.value,(o,r)=>(i(),b("div",{key:o.title,class:"metric-card",style:Q({transitionDelay:`${r*100}ms`}),onMouseenter:c=>y.value=r,onMouseleave:e[0]||(e[0]=c=>y.value=null)},[t("div",{class:p(["bg-white rounded-xl shadow-md transition-all duration-300 transform hover:scale-105",{"shadow-lg":y.value===r}])},[t("div",ot,[t("div",st,[t("div",{class:p([o.bgColor,"p-3 rounded-lg"])},[(i(),A(q(o.icon),{class:p([o.color,"w-6 h-6"])},null,8,["class"]))],2)]),t("div",at,[t("p",rt,u(o.title),1),t("p",{class:p([o.color,"text-2xl font-bold mt-2"])},u(o.value),3),t("p",lt,u(o.description),1)])])],2)],44,et))),128))]),_:1})]),t("div",nt,[t("div",it,[e[4]||(e[4]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"}," Payment Methods Distribution ",-1)),t("div",dt,[t("canvas",{ref_key:"chartRef",ref:v},null,512)])]),t("div",ct,[e[5]||(e[5]=t("h3",{class:"text-lg font-semibold text-gray-800 mb-4"}," Recent Announcements ",-1)),t("div",ut,[g.announcements.length?(i(!0),b(S,{key:0},P(g.announcements,(o,r)=>(i(),b("div",{key:r,class:"p-4 border border-gray-100 rounded-lg hover:border-blue-500 transition-all duration-300"},[t("h4",mt,u(o.title),1),t("p",pt,u(o.description),1)]))),128)):(i(),b("p",bt," No announcements available "))])])]),t("div",gt,[t("div",yt,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-800"}," Top & Bottom Products Analysis ",-1)),t("div",vt,[B(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=o=>n.value.start_date=o),class:"border rounded px-2 py-1"},null,512),[[D,n.value.start_date]]),B(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=o=>n.value.end_date=o),class:"border rounded px-2 py-1"},null,512),[[D,n.value.end_date]])])]),t("div",ft,[t("canvas",{ref_key:"topBottomProductsRef",ref:f},null,512)])])])]),_:1}))}},Vt=U(_t,[["__scopeId","data-v-b60518b9"]]);export{Vt as default};
