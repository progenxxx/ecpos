import{C as B,_ as G}from"./GetBWP-BBt_eK4k.js";import{d as r,T as J,H as b,p as q,c as F,w as a,o as C,b as o,e as P,t as Y,n as h,f as $,a as u,g,u as H,D as W}from"./app-DfIvzsOQ.js";import{_ as n}from"./Modal.vue_vue_type_style_index_0_scoped_fd08cd24_lang-C388c1rV.js";import{T as z}from"./TableContainer-B_NZ86Qn.js";import{_ as X}from"./AdminPanel-BfHVSfXn.js";import{S as K}from"./Save-DuiXAOXZ.js";import{B as Q}from"./Back-CYBxpPPh.js";import{T as Z}from"./Trash-50AZVQ22.js";import{P as D,D as ee}from"./dataTables-BsbRCurN.js";import"./Modal-CysVaCy0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputError-CglVpcef.js";/* empty css                                                               */import"./RetailGroup-B2i0gpkm.js";import"./Logout-3bWQyGlF.js";/* empty css                                                             */import"./RetailItems-COxcnIKG.js";import"./Attendance-DnkoFQCQ.js";const te={class:"flex justify-start items-center"},Ce={__name:"index-old",props:{sptransrepos:{type:Array,required:!0},sptrans:{type:Array,required:!0},journalid:{type:[String,Number],required:!0},items:{type:Array,required:!0}},setup(p){D.use(ee);const i=r("");r(""),r("");const y=r(!1),f=r(!1),v=r(!1),w=p,I=[{data:"ITEMID",title:"ITEMID"},{data:"itemname",title:"ITEMNAME"},{data:"itemgroup",title:"CATEGORY"},{data:"COUNTED",title:"COUNTED",render:function(t,e,l){return e==="display"?`<input type="number" class="counted-input form-input block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" value="${Number(t).toFixed(0)}" min="0" step="1">`:t}}],x={paging:!1,scrollX:!0,scrollY:"70vh",scrollCollapse:!0,drawCallback:function(t){this.api().rows().every(function(){const l=this.data(),m=this.node().querySelector(".counted-input");m&&m.addEventListener("change",j=>_(j,l))})}},A=t=>{i.value="SPECIAL ORDER",f.value=!0,console.log(i.value)},E=()=>{v.value=!1},T=()=>{f.value=!1},N=()=>{y.value=!1};J({StartDate:"",EndDate:""});const O=()=>{window.location.href="/mgcount"},k=()=>{window.confirm("Are you sure you want to delete all orders?")?window.location.href="/SP-DeleteOrders":console.log("User cancelled the delete operation.")},M=()=>{window.confirm("Are you sure you want to post all orders?")?window.location.href="/special-orders/post":console.log("User cancelled the post operation.")},R=()=>{window.location.href="/specialorders/vieworders"},S=t=>{console.log("Selected Item:",t)},U=r([]),d=b({}),s=b({text:"",type:""}),_=(t,e)=>{const l=t.target.value;d[e.ITEMID]=l},V=async()=>{try{if(s.text="Updating counted values...",s.type="info",(await W.post("/api/sp-update-all-counted-values",{journalId:w.journalid,updatedValues:d})).data.success){console.log("All values updated successfully");for(const[e,l]of Object.entries(d)){const c=U.value.find(m=>m.ITEMID===e);c&&(c.COUNTED=l)}Object.keys(d).forEach(e=>delete d[e]),s.text="All counted values updated successfully",s.type="success",location.reload()}else throw new Error("Update failed")}catch(t){console.error("You don't have any changes!",t),s.text="You don't have any changes!",s.type="error"}L()},L=()=>{setTimeout(()=>{s.text="",s.type=""},5e3)};return(t,e)=>{const l=q("CopyFrom");return C(),F(X,{"active-tab":"INVENTORY"},{modals:a(()=>[o(B,{"show-modal":v.value,JOURNALID:i.value,items:w.items,onToggleActive:E,onSelectItem:S},null,8,["show-modal","JOURNALID","items"]),o(G,{"show-modal":f.value,JOURNALID:i.value,onToggleActive:T},null,8,["show-modal","JOURNALID"]),o(l,{"show-modal":y.value,JOURNALID:i.value,onToggleActive:N},null,8,["show-modal","JOURNALID"])]),main:a(()=>[o(z,null,{default:a(()=>[s.text?(C(),P("div",{key:0,class:h(["p-4 mb-4 rounded-md",s.type==="success"?"bg-green-100 text-green-700":s.type==="error"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"])},Y(s.text),3)):$("",!0),u("div",{class:h(["absolute adjust",{"mt-20":s.text}])},[u("div",te,[o(n,{type:"button",onClick:O,class:"m-1 ml-2 bg-navy p-10"},{default:a(()=>[o(Q,{class:"h-5"})]),_:1}),o(n,{type:"button",onClick:e[0]||(e[0]=c=>A(p.journalid)),class:"m-1 ml-2 bg-navy p-10"},{default:a(()=>e[1]||(e[1]=[g(" GENERATE ")])),_:1}),o(n,{type:"button",onClick:V,class:"m-1 ml-2 bg-green-900 p-10"},{default:a(()=>[o(K,{class:"h-5"})]),_:1}),o(n,{type:"button",onClick:k,class:"m-1 ml-2 bg-red-900 p-10"},{default:a(()=>[o(Z,{class:"h-5"})]),_:1}),o(n,{type:"button",onClick:M,class:"m-1 ml-2 bg-red-900 p-10"},{default:a(()=>e[2]||(e[2]=[g(" POST ")])),_:1}),o(n,{type:"button",onClick:R,class:"m-1 ml-2 bg-navy p-10"},{default:a(()=>e[3]||(e[3]=[g(" SPECIAL ORDERS ")])),_:1})])],2),o(H(D),{data:p.sptransrepos,columns:I,class:"w-full relative display",options:x},{action:a(c=>e[4]||(e[4]=[u("label",{class:"inline-flex items-center"},[u("input",{type:"checkbox",class:"form-checkbox h-5 w-5 text-blue-600 rounded-full"}),u("span",{class:"ml-2 text-gray-700"})],-1)])),_:1},8,["data"])]),_:1})]),_:1})}}};export{Ce as default};
